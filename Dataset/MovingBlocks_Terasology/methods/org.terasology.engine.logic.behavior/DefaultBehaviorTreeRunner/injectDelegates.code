private BehaviorNode injectDelegates(BehaviorNode newNode,BehaviorNode treeNode){
  if (newNode.getChildrenCount() == 0) {
    return createCallbackNode(newNode,treeNode);
  }
 else {
    for (int i=0; i < newNode.getChildrenCount(); i++) {
      newNode.replaceChild(i,injectDelegates(newNode.getChild(i),treeNode.getChild(i)));
    }
    return createCallbackNode(newNode,treeNode);
  }
}
