public static void askForSubscriptionIfRequired(Roster roster,BareJid jid) throws NotLoggedInException, NotConnectedException, InterruptedException {
  RosterEntry entry=roster.getEntry(jid);
  if (entry == null || !(entry.canSeeHisPresence() || entry.isSubscriptionPending())) {
    roster.sendSubscriptionRequest(jid);
  }
}
