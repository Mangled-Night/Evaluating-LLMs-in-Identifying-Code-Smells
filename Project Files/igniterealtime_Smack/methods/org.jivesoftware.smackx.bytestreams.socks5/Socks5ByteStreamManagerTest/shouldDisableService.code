/** 
 * The SOCKS5 Bytestream feature should be removed form the service discovery manager if Socks5 bytestream feature is disabled.
 * @throws InterruptedException if the calling thread was interrupted.
 * @throws SmackException if Smack detected an exceptional situation.
 * @throws XMPPErrorException if there was an XMPP error returned.
 */
@Test public void shouldDisableService() throws XMPPErrorException, SmackException, InterruptedException {
  final Protocol protocol=new Protocol();
  final XMPPConnection connection=ConnectionUtils.createMockedConnection(protocol,initiatorJID);
  Socks5BytestreamManager byteStreamManager=Socks5BytestreamManager.getBytestreamManager(connection);
  ServiceDiscoveryManager discoveryManager=ServiceDiscoveryManager.getInstanceFor(connection);
  assertTrue(discoveryManager.includesFeature(Bytestream.NAMESPACE));
  byteStreamManager.disableService();
  assertFalse(discoveryManager.includesFeature(Bytestream.NAMESPACE));
}
