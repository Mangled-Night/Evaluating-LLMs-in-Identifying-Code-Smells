public abstract class AbstractSmackSpecificLowLevelIntegrationTest<C extends AbstractXMPPConnection> extends AbstractSmackLowLevelIntegrationTest {
  private final SmackIntegrationTestEnvironment environment;
  private final XmppConnectionDescriptor<C,? extends ConnectionConfiguration,? extends ConnectionConfiguration.Builder<?,?>> connectionDescriptor;
  public AbstractSmackSpecificLowLevelIntegrationTest(  SmackIntegrationTestEnvironment environment,  Class<C> connectionClass){
    super(environment);
    this.environment=environment;
    connectionDescriptor=environment.connectionManager.getConnectionDescriptorFor(connectionClass);
    if (connectionDescriptor == null) {
      throw new IllegalStateException("No connection descriptor for " + connectionClass + " known");
    }
  }
  public XmppConnectionDescriptor<C,? extends ConnectionConfiguration,? extends ConnectionConfiguration.Builder<?,?>> getConnectionDescriptor(){
    return connectionDescriptor;
  }
  protected C getSpecificUnconnectedConnection() throws NoResponseException, XMPPErrorException, NotConnectedException, InterruptedException {
    return environment.connectionManager.constructConnection(connectionDescriptor);
  }
  protected List<C> getSpecificUnconnectedConnections(  int count) throws NoResponseException, XMPPErrorException, NotConnectedException, InterruptedException {
    List<C> connections=new ArrayList<>(count);
    for (int i=0; i < count; i++) {
      C connection=getSpecificUnconnectedConnection();
      connections.add(connection);
    }
    return connections;
  }
}
