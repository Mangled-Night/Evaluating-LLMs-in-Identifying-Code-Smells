/** 
 * Returns the first stanza that's sent through  {@link #sendStanza(Stanza)}and that has not been returned by earlier calls to this method.
 * @param < P > the top level stream element class.
 * @return a sent packet.
 */
public <P extends TopLevelStreamElement>P getSentPacket(){
  return getSentPacket(5 * 60);
}
/** 
 * Returns the first stanza that's sent through  {@link #sendStanza(Stanza)}and that has not been returned by earlier calls to this method. This method will block for up to the specified number of seconds if no packets have been sent yet.
 * @param wait how long to wait in seconds.
 * @param < P > the top level stream element class.
 * @return a sent packet.
 */
@SuppressWarnings("unchecked") public <P extends TopLevelStreamElement>P getSentPacket(int wait){
  try {
    return (P)queue.poll(wait,TimeUnit.SECONDS);
  }
 catch (  InterruptedException e) {
    throw new IllegalStateException(e);
  }
}
