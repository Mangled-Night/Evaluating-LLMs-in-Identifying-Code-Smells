@Override protected IQChildElementXmlStringBuilder getIQChildElementBuilder(IQChildElementXmlStringBuilder buf){
switch (getType()) {
case set:
    buf.optAttribute("id",getSessionID());
  buf.optAttribute("mime-type",getMimeType());
buf.attribute("profile",NAMESPACE + "/profile/file-transfer");
buf.rightAngleBracket();
buf.optElement(file);
break;
case result:
buf.rightAngleBracket();
break;
default :
throw new IllegalArgumentException("IQ Type not understood");
}
if (featureNegotiation != null) {
buf.append(featureNegotiation.toXML());
}
return buf;
}
