private CompletableFuture<String> dispatchAuthOrPing(Channel channel,RedisCredentials credentials){
  if (credentials.hasUsername()) {
    return dispatch(channel,this.commandBuilder.auth(credentials.getUsername(),credentials.getPassword()));
  }
 else   if (credentials.hasPassword()) {
    return dispatch(channel,this.commandBuilder.auth(credentials.getPassword()));
  }
 else   if (this.pingOnConnect) {
    return dispatch(channel,this.commandBuilder.ping());
  }
  return CompletableFuture.completedFuture(null);
}
