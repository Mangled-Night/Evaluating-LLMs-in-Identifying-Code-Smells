public static class LifecycleEventChecker {
  public List<EventInfo> receivedEvents=Lists.newArrayList();
  public LifecycleEventChecker(  EventSystem eventSystem,  Class<? extends Component> forComponent){
    eventSystem.registerEventReceiver(new LifecycleEventReceiver<>(),OnAddedComponent.class,forComponent);
    eventSystem.registerEventReceiver(new LifecycleEventReceiver<>(),OnActivatedComponent.class,forComponent);
    eventSystem.registerEventReceiver(new LifecycleEventReceiver<>(),OnChangedComponent.class,forComponent);
    eventSystem.registerEventReceiver(new LifecycleEventReceiver<>(),BeforeDeactivateComponent.class,forComponent);
    eventSystem.registerEventReceiver(new LifecycleEventReceiver<>(),BeforeRemoveComponent.class,forComponent);
  }
private class LifecycleEventReceiver<T extends Event> implements EventReceiver<T> {
    @Override public void onEvent(    T event,    EntityRef entity){
      receivedEvents.add(new EventInfo(event,entity));
    }
  }
}
