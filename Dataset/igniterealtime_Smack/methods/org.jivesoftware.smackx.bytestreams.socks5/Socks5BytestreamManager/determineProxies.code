/** 
 * Returns a list of JIDs of SOCKS5 proxies by querying the XMPP server. The SOCKS5 proxies are in the same order as returned by the XMPP server.
 * @return list of JIDs of SOCKS5 proxies
 * @throws XMPPErrorException if there was an error querying the XMPP server for SOCKS5 proxies
 * @throws NoResponseException if there was no response from the server.
 * @throws NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 */
public List<Jid> determineProxies() throws NoResponseException, XMPPErrorException, NotConnectedException, InterruptedException {
  XMPPConnection connection=connection();
  ServiceDiscoveryManager serviceDiscoveryManager=ServiceDiscoveryManager.getInstanceFor(connection);
  List<Jid> proxies=new ArrayList<>();
  DiscoverItems discoverItems=serviceDiscoveryManager.discoverItems(connection.getXMPPServiceDomain());
  for (  Item item : discoverItems.getItems()) {
    if (this.proxyBlacklist.contains(item.getEntityID())) {
      continue;
    }
    DiscoverInfo proxyInfo;
    try {
      proxyInfo=serviceDiscoveryManager.discoverInfo(item.getEntityID());
    }
 catch (    NoResponseException|XMPPErrorException e) {
      proxyBlacklist.add(item.getEntityID());
      continue;
    }
    if (proxyInfo.hasIdentity("proxy","bytestreams")) {
      proxies.add(item.getEntityID());
    }
 else {
      this.proxyBlacklist.add(item.getEntityID());
    }
  }
  return proxies;
}
