public void fileTransferRequest(final FileTransferRequest request){
  new Thread(new Runnable(){
    public void run(){
      IncomingFileTransfer transfer=request.accept();
      InputStream stream;
      try {
        stream=transfer.recieveFile();
      }
 catch (      XMPPException e) {
        exception=e;
        return;
      }
      byte[] testRecieve=new byte[testTransfer.length];
      int receiveCount=0;
      try {
        while (receiveCount != -1) {
          receiveCount=stream.read(testRecieve);
        }
      }
 catch (      IOException e) {
        exception=e;
      }
 finally {
        try {
          stream.close();
        }
 catch (        IOException e) {
          e.printStackTrace();
        }
      }
      try {
        queue.put(testRecieve);
      }
 catch (      InterruptedException e) {
        exception=e;
      }
    }
  }
).start();
}
