/** 
 * Write file from input stream.
 * @param filePath The path of file.
 * @param is       The input stream.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final String filePath,final InputStream is){
  return writeFileFromIS(UtilsBridge.getFileByPath(filePath),is,false,null);
}
/** 
 * Write file from input stream.
 * @param filePath The path of file.
 * @param is       The input stream.
 * @param append   True to append, false otherwise.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final String filePath,final InputStream is,final boolean append){
  return writeFileFromIS(UtilsBridge.getFileByPath(filePath),is,append,null);
}
/** 
 * Write file from input stream.
 * @param file The file.
 * @param is   The input stream.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final File file,final InputStream is){
  return writeFileFromIS(file,is,false,null);
}
/** 
 * Write file from input stream.
 * @param file   The file.
 * @param is     The input stream.
 * @param append True to append, false otherwise.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final File file,final InputStream is,final boolean append){
  return writeFileFromIS(file,is,append,null);
}
/** 
 * Write file from input stream.
 * @param filePath The path of file.
 * @param is       The input stream.
 * @param listener The progress update listener.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final String filePath,final InputStream is,final OnProgressUpdateListener listener){
  return writeFileFromIS(UtilsBridge.getFileByPath(filePath),is,false,listener);
}
/** 
 * Write file from input stream.
 * @param filePath The path of file.
 * @param is       The input stream.
 * @param append   True to append, false otherwise.
 * @param listener The progress update listener.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final String filePath,final InputStream is,final boolean append,final OnProgressUpdateListener listener){
  return writeFileFromIS(UtilsBridge.getFileByPath(filePath),is,append,listener);
}
/** 
 * Write file from input stream.
 * @param file     The file.
 * @param is       The input stream.
 * @param listener The progress update listener.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final File file,final InputStream is,final OnProgressUpdateListener listener){
  return writeFileFromIS(file,is,false,listener);
}
/** 
 * Write file from input stream.
 * @param file     The file.
 * @param is       The input stream.
 * @param append   True to append, false otherwise.
 * @param listener The progress update listener.
 * @return {@code true}: success<br> {@code false}: fail
 */
public static boolean writeFileFromIS(final File file,final InputStream is,final boolean append,final OnProgressUpdateListener listener){
  if (is == null || !UtilsBridge.createOrExistsFile(file)) {
    Log.e("FileIOUtils","create file <" + file + "> failed.");
    return false;
  }
  OutputStream os=null;
  try {
    os=new BufferedOutputStream(new FileOutputStream(file,append),sBufferSize);
    if (listener == null) {
      byte[] data=new byte[sBufferSize];
      for (int len; (len=is.read(data)) != -1; ) {
        os.write(data,0,len);
      }
    }
 else {
      double totalSize=is.available();
      int curSize=0;
      listener.onProgressUpdate(0);
      byte[] data=new byte[sBufferSize];
      for (int len; (len=is.read(data)) != -1; ) {
        os.write(data,0,len);
        curSize+=len;
        listener.onProgressUpdate(curSize / totalSize);
      }
    }
    return true;
  }
 catch (  IOException e) {
    e.printStackTrace();
    return false;
  }
 finally {
    try {
      is.close();
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
    try {
      if (os != null) {
        os.close();
      }
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
}
