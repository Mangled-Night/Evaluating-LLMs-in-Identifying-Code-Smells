protected LeafNode getPubnode(PubSubManager pubMgr,boolean persistItems,boolean deliverPayload,String nodeId) throws XMPPException {
  LeafNode node=null;
  try {
    node=(LeafNode)pubMgr.getNode(nodeId);
  }
 catch (  XMPPException e) {
    ConfigureForm form=new ConfigureForm(FormType.submit);
    form.setPersistentItems(persistItems);
    form.setDeliverPayloads(deliverPayload);
    form.setAccessModel(AccessModel.open);
    node=(LeafNode)pubMgr.createNode(nodeId,form);
  }
  return node;
}
