public class VersionTest extends SmackTestSuite {
  @Test public void checkProvider() throws Exception {
    String control="<iq from='capulet.lit' to='juliet@capulet.lit/balcony' id='s2c1' type='get'>" + "<query xmlns='jabber:iq:version'/>" + "</iq>";
    DummyConnection con=new DummyConnection();
    con.connect();
    VersionManager.setAutoAppendSmackVersion(false);
    VersionManager.getInstanceFor(con).setVersion("Test","0.23","DummyOS");
    IQ versionRequest=PacketParserUtils.parseStanza(control);
    assertTrue(versionRequest instanceof Version);
    con.processStanza(versionRequest);
    Stanza replyPacket=con.getSentPacket();
    assertTrue(replyPacket instanceof Version);
    Version reply=(Version)replyPacket;
    assertThat("capulet.lit",equalsCharSequence(reply.getTo()));
    assertEquals("s2c1",reply.getStanzaId());
    assertEquals(IQ.Type.result,reply.getType());
    assertEquals("Test",reply.getName());
    assertEquals("0.23",reply.getVersion());
    assertEquals("DummyOS",reply.getOs());
  }
}
