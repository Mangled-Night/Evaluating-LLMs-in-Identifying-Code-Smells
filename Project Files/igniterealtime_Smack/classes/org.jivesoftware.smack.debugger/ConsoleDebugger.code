/** 
 * Very simple debugger that prints to the console (stdout) the sent and received stanzas. Use this debugger with caution since printing to the console is an expensive operation that may even block the thread since only one thread may print at a time. <p> It is possible to not only print the raw sent and received stanzas but also the interpreted packets by Smack. By default interpreted packets won't be printed. To enable this feature just change the <code>printInterpreted</code> static variable to <code>true</code>. </p>
 * @author Gaston Dombiak
 */
public class ConsoleDebugger extends AbstractDebugger {
  private final SimpleDateFormat dateFormatter=new SimpleDateFormat("HH:mm:ss");
  public ConsoleDebugger(  XMPPConnection connection){
    super(connection);
  }
  @Override protected void log(  String logMessage){
    String formatedDate;
synchronized (dateFormatter) {
      formatedDate=dateFormatter.format(new Date());
    }
    System.out.println(formatedDate + ' ' + logMessage);
  }
  @Override protected void log(  String logMessage,  Throwable throwable){
    String stacktrace=ExceptionUtil.getStackTrace(throwable);
    log(logMessage + '\n' + stacktrace);
  }
public static final class Factory implements SmackDebuggerFactory {
    public static final SmackDebuggerFactory INSTANCE=new Factory();
    private Factory(){
    }
    @Override public SmackDebugger create(    XMPPConnection connection) throws IllegalArgumentException {
      return new ConsoleDebugger(connection);
    }
  }
}
