@Override public void initialise(){
  WidgetUtil.trySubscribe(this,"gotoParent",button -> setCurrentDirectoryParent());
  WidgetUtil.trySubscribe(this,"gotoRoot",button -> setCurrentDirectoryRoot());
  WidgetUtil.trySubscribe(this,"gotoHome",button -> setCurrentDirectoryHome());
  find("gotoParent",UIButton.class).bindEnabled(new ReadOnlyBinding<Boolean>(){
    @Override public Boolean get(){
      return currentPath != null;
    }
  }
);
  find("currentPath",UILabel.class).bindText(new ReadOnlyBinding<String>(){
    @Override public String get(){
      return currentPath == null ? translationSystem.translate("${engine:menu#file-picker-roots-title}") : pathToString(currentPath,false);
    }
  }
);
  find("fileName",UIText.class).bindText(new Binding<String>(){
    @Override public String get(){
      return fileName;
    }
    @Override public void set(    String value){
      fileName=value;
    }
  }
);
  find("filePath",UILabel.class).bindText(new ReadOnlyBinding<String>(){
    @Override public String get(){
      if (currentPath == null) {
        return translationSystem.translate("${engine:menu#file-picker-invalid-location}");
      }
 else {
        return isValidFilename(fileName) ? translationSystem.translate("") + getPathToFile().toString() : translationSystem.translate("${engine:menu#file-picker-invalid-file-name}");
      }
    }
  }
);
  directoryContentsScroller=find("directoryContentsScroller",ScrollableArea.class);
  directoryContentsList=find("directoryContentsList",UIList.class);
  directoryContentsList.subscribeSelection((widget,item) -> handleItemSelection(item));
  setCurrentDirectoryHome();
  UIButton ok=find("ok",UIButton.class);
  ok.bindEnabled(new ReadOnlyBinding<Boolean>(){
    @Override public Boolean get(){
      return isValid();
    }
  }
);
  ok.subscribe(button -> {
    if (isValid()) {
      getManager().popScreen();
      okHandler.accept(getPathToFile());
    }
  }
);
  WidgetUtil.trySubscribe(this,"cancel",button -> getManager().popScreen());
}
