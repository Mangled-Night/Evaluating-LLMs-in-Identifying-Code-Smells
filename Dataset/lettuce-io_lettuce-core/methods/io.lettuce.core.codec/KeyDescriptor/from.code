static KeyDescriptor from(ByteBuffer bytes){
  int end=-1;
  int version=-1;
  if (bytes.get() != '$') {
    throw new IllegalArgumentException("Cannot extract KeyDescriptor. Malformed message header.");
  }
  int startPosition=bytes.position();
  for (int i=0; i < bytes.remaining(); i++) {
    if (bytes.get(bytes.position() + i) == '$') {
      end=(bytes.position() - startPosition) + i;
      break;
    }
    if (bytes.get(bytes.position() + i) == '+') {
      version=(bytes.position() - startPosition) + i;
    }
  }
  if (end == -1 || version == -1) {
    throw new IllegalArgumentException("Cannot extract KeyDescriptor");
  }
  byte[] name=new byte[version];
  bytes.get(name);
  bytes.get();
  byte[] versionBytes=new byte[end - version - 1];
  bytes.get(versionBytes);
  bytes.get();
  return new KeyDescriptor(name,Integer.parseInt(new String(versionBytes)));
}
