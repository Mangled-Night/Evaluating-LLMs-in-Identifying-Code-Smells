public class MessageCorrectExtensionTest {
  private static final String idInitialMessage="bad1";
  private static final String initialMessageXml="<message xmlns='jabber:client' to='juliet@capulet.net/balcony' id='good1'>" + "<body>But soft, what light through yonder window breaks?</body>" + "</message>";
  private static final CharSequence messageCorrectionXml="<replace xmlns='urn:xmpp:message-correct:0' id='bad1'/>";
  private static final CharSequence expectedXml="<message xmlns='jabber:client' to='juliet@capulet.net/balcony' id='good1'>" + "<body>But soft, what light through yonder window breaks?</body>" + "<replace xmlns='urn:xmpp:message-correct:0' id='bad1'/>"+ "</message>";
  @Test public void checkStanzas() throws Exception {
    Message initialMessage=PacketParserUtils.parseStanza(initialMessageXml);
    MessageCorrectExtension messageCorrectExtension=new MessageCorrectExtension(idInitialMessage);
    assertEquals(messageCorrectExtension.toXML().toString(),messageCorrectionXml.toString());
    initialMessage.addExtension(messageCorrectExtension);
    assertEquals(initialMessage.toXML().toString(),expectedXml.toString());
  }
}
