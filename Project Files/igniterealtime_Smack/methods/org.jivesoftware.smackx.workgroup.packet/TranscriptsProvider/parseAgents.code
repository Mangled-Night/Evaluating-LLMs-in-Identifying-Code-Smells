private static List<Transcripts.AgentDetail> parseAgents(XmlPullParser parser) throws IOException, XmlPullParserException, ParseException {
  List<Transcripts.AgentDetail> agents=new ArrayList<>();
  String agentJID=null;
  Date joinTime=null;
  Date leftTime=null;
  boolean done=false;
  while (!done) {
    XmlPullParser.Event eventType=parser.next();
    if (eventType == XmlPullParser.Event.START_ELEMENT) {
      if (parser.getName().equals("agentJID")) {
        agentJID=parser.nextText();
      }
 else       if (parser.getName().equals("joinTime")) {
synchronized (UTC_FORMAT) {
          joinTime=UTC_FORMAT.parse(parser.nextText());
        }
      }
 else       if (parser.getName().equals("leftTime")) {
synchronized (UTC_FORMAT) {
          leftTime=UTC_FORMAT.parse(parser.nextText());
        }
      }
 else       if (parser.getName().equals("agent")) {
        agentJID=null;
        joinTime=null;
        leftTime=null;
      }
    }
 else     if (eventType == XmlPullParser.Event.END_ELEMENT) {
      if (parser.getName().equals("agents")) {
        done=true;
      }
 else       if (parser.getName().equals("agent")) {
        agents.add(new Transcripts.AgentDetail(agentJID,joinTime,leftTime));
      }
    }
  }
  return agents;
}
