public static final class NoEndpointsDiscoveredException extends ConnectionException {
  private static final long serialVersionUID=1L;
  private final List<LookupConnectionEndpointsFailed> lookupFailures;
  private NoEndpointsDiscoveredException(  String message,  List<LookupConnectionEndpointsFailed> lookupFailures){
    super(message);
    this.lookupFailures=Collections.unmodifiableList(lookupFailures);
  }
  public List<LookupConnectionEndpointsFailed> getLookupFailures(){
    return lookupFailures;
  }
  public static NoEndpointsDiscoveredException from(  List<LookupConnectionEndpointsFailed> lookupFailures){
    StringBuilder sb=new StringBuilder();
    if (lookupFailures.isEmpty()) {
      sb.append("No endpoint lookup finished within the timeout");
    }
 else {
      sb.append("No endpoints could be discovered due the following lookup failures: ");
      StringUtils.appendTo(lookupFailures,sb);
    }
    return new NoEndpointsDiscoveredException(sb.toString(),lookupFailures);
  }
}
