public class ForwardedTest {
  private static Properties outputProperties=new Properties();
static {
    outputProperties.put(javax.xml.transform.OutputKeys.OMIT_XML_DECLARATION,"yes");
  }
  @Test public void forwardedTest() throws Exception {
    XmlPullParser parser;
    String control;
    Forwarded<?> fwd;
    control=XMLBuilder.create("forwarded").a("xmlns","urn:xmpp:forwarded:0").e("message").a("from","romeo@montague.com").asString(outputProperties);
    parser=PacketParserUtils.getParserFor(control);
    fwd=new ForwardedProvider().parse(parser);
    assertEquals(null,fwd.getDelayInformation());
    assertThat("romeo@montague.com",equalsCharSequence(fwd.getForwardedStanza().getFrom()));
    assertEquals(XmlPullParser.Event.END_ELEMENT,parser.getEventType());
    assertEquals("forwarded",parser.getName());
  }
  @Test public void forwardedWithDelayTest() throws Exception {
    XmlPullParser parser;
    String control;
    Forwarded<?> fwd;
    control=XMLBuilder.create("forwarded").a("xmlns","urn:xmpp:forwarded:0").e("message").a("from","romeo@montague.com").up().e("delay").ns(DelayInformation.NAMESPACE).a("stamp","2010-07-10T23:08:25Z").asString(outputProperties);
    parser=PacketParserUtils.getParserFor(control);
    fwd=new ForwardedProvider().parse(parser);
    DelayInformation delay=fwd.getDelayInformation();
    assertNotNull(delay);
    assertThat("romeo@montague.com",equalsCharSequence(fwd.getForwardedStanza().getFrom()));
    assertEquals(XmlPullParser.Event.END_ELEMENT,parser.getEventType());
    assertEquals("forwarded",parser.getName());
  }
  @Test public void forwardedEmptyTest() throws Exception {
    XmlPullParser parser;
    String control;
    control=XMLBuilder.create("forwarded").a("xmlns","urn:xmpp:forwarded:0").asString(outputProperties);
    parser=PacketParserUtils.getParserFor(control);
    assertThrows(Exception.class,() -> {
      new ForwardedProvider().parse(parser);
    }
);
  }
}
