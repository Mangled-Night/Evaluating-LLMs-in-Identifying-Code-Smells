private static Map<Character,String> parseAttributes(String string) throws SmackSaslException {
  if (string.length() == 0) {
    return Collections.emptyMap();
  }
  String[] keyValuePairs=string.split(",");
  Map<Character,String> res=new HashMap<Character,String>(keyValuePairs.length,1);
  for (  String keyValuePair : keyValuePairs) {
    if (keyValuePair.length() < 3) {
      throw new SmackSaslException("Invalid Key-Value pair: " + keyValuePair);
    }
    char key=keyValuePair.charAt(0);
    if (keyValuePair.charAt(1) != '=') {
      throw new SmackSaslException("Invalid Key-Value pair: " + keyValuePair);
    }
    String value=keyValuePair.substring(2);
    res.put(key,value);
  }
  return res;
}
