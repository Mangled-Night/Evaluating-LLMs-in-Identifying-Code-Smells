/** 
 * The SASL X-OAUTH2 mechanism as described in <a href="https://developers.google.com/talk/jep_extensions/oauth">https://developers.google .com/talk/jep_extensions/oauth</a> <p> The given password will be used as OAUTH token. </p> <p> Note that X-OAUTH2 is experimental in Smack. This is because Google defined, besides being a bad practice (XEP-134), custom attributes to the 'auth' stanza, as can be seen here </p> <pre> {@code <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="X-OAUTH2" auth:service="chromiumsync" auth:allow-generated-jid="true" auth:client-uses-full-bind-result="true" xmlns:auth="http://www.google.com/talk/protocol/auth">}</pre> from https://developers.google.com/cloud-print/docs/rawxmpp and here <pre> {@code <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="X-OAUTH2" auth:service="oauth2" xmlns:auth="http://www.google.com/talk/protocol/auth"> base64("\0" + user_name + "\0" + oauth_token) </auth>}</pre> from https://developers.google.com/talk/jep_extensions/oauth <p> Those attribute extensions are currently not supported by Smack, and it's unclear how it affects authorization and how widely they are used. </p>
 */
public class SASLXOauth2Mechanism extends SASLMechanism {
  public static final String NAME="X-OAUTH2";
  @Override protected void authenticateInternal(  CallbackHandler cbh){
    throw new UnsupportedOperationException("CallbackHandler not (yet) supported");
  }
  @Override protected byte[] getAuthenticationText(){
    return toBytes('\u0000' + authenticationId + '\u0000'+ password);
  }
  @Override public String getName(){
    return NAME;
  }
  @Override public int getPriority(){
    return 410;
  }
  @Override public SASLXOauth2Mechanism newInstance(){
    return new SASLXOauth2Mechanism();
  }
  @Override public void checkIfSuccessfulOrThrow(){
  }
}
