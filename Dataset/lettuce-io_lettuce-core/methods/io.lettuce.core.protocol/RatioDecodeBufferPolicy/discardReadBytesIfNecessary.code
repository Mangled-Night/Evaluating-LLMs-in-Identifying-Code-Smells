private void discardReadBytesIfNecessary(ByteBuf buffer){
  float usedRatio=(float)buffer.readerIndex() / buffer.capacity();
  if (usedRatio >= discardReadBytesRatio) {
    buffer.discardReadBytes();
  }
}
