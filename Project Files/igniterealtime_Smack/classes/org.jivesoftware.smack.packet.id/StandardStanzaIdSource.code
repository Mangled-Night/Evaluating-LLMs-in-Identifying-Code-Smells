public class StandardStanzaIdSource implements StanzaIdSource {
  public static final StandardStanzaIdSource DEFAULT=new StandardStanzaIdSource();
  /** 
 * A prefix helps to make sure that ID's are unique across multiple instances.
 */
  private final String prefix=StringUtils.randomString(5) + "-";
  /** 
 * Keeps track of the current increment, which is appended to the prefix to forum a unique ID.
 */
  private final AtomicLong id=new AtomicLong();
  @Override public String getNewStanzaId(){
    return prefix + Long.toString(id.incrementAndGet());
  }
public static class Factory implements StanzaIdSourceFactory {
    @Override public StandardStanzaIdSource constructStanzaIdSource(){
      return new StandardStanzaIdSource();
    }
  }
}
