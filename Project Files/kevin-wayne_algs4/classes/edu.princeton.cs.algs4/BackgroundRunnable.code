private static class BackgroundRunnable implements Runnable {
  private volatile boolean exit=false;
  private final String filename;
  public BackgroundRunnable(  String filename){
    this.filename=filename;
  }
  public void run(){
    AudioInputStream ais=getAudioInputStreamFromFile(filename);
    SourceDataLine line=null;
    int BUFFER_SIZE=4096;
    try {
      AudioFormat audioFormat=ais.getFormat();
      DataLine.Info info=new DataLine.Info(SourceDataLine.class,audioFormat);
      line=(SourceDataLine)AudioSystem.getLine(info);
      line.open(audioFormat);
      line.start();
      byte[] samples=new byte[BUFFER_SIZE];
      int count;
      while (!exit && (count=ais.read(samples,0,BUFFER_SIZE)) != -1) {
        line.write(samples,0,count);
      }
    }
 catch (    IOException|LineUnavailableException e) {
      e.printStackTrace();
    }
 finally {
      if (line != null) {
        line.drain();
        line.close();
      }
    }
  }
  public void stop(){
    exit=true;
  }
}
