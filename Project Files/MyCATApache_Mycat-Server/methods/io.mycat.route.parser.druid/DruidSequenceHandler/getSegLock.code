private ReentrantLock getSegLock(String name){
  ReentrantLock lock=segmentLock.get(name);
  if (lock == null) {
synchronized (segmentLock) {
      lock=segmentLock.get(name);
      if (lock == null) {
        lock=new ReentrantLock();
        segmentLock.put(name,lock);
      }
    }
  }
  return lock;
}
