private static boolean isSymlink(File file) throws IOException {
  Preconditions.checkNotNull(file);
  File fileInCanonicalDir=null;
  if (file.getParent() == null) {
    fileInCanonicalDir=file;
  }
 else {
    fileInCanonicalDir=new File(file.getParentFile().getCanonicalFile(),file.getName());
  }
  return !fileInCanonicalDir.getCanonicalFile().equals(fileInCanonicalDir.getAbsoluteFile());
}
