/** 
 * A request to send a file received from another user.
 * @author Alexander Wenckus
 */
public class FileTransferRequest {
  private final StreamInitiation streamInitiation;
  private final FileTransferManager manager;
  /** 
 * A receive request is constructed from the Stream Initiation request received from the initiator.
 * @param manager TODO javadoc me pleaseThe manager handling this file transfer
 * @param si TODO javadoc me pleaseThe Stream initiation received from the initiator.
 */
  public FileTransferRequest(  FileTransferManager manager,  StreamInitiation si){
    this.streamInitiation=si;
    this.manager=manager;
  }
  /** 
 * Returns the name of the file.
 * @return Returns the name of the file.
 */
  public String getFileName(){
    return streamInitiation.getFile().getName();
  }
  /** 
 * Returns the size in bytes of the file.
 * @return Returns the size in bytes of the file.
 */
  public long getFileSize(){
    return streamInitiation.getFile().getSize();
  }
  /** 
 * Returns the description of the file provided by the requester.
 * @return Returns the description of the file provided by the requester.
 */
  public String getDescription(){
    return streamInitiation.getFile().getDesc();
  }
  /** 
 * Returns the mime-type of the file.
 * @return Returns the mime-type of the file.
 */
  public String getMimeType(){
    return streamInitiation.getMimeType();
  }
  /** 
 * Returns the fully-qualified jabber ID of the user that requested this file transfer.
 * @return Returns the fully-qualified jabber ID of the user that requestedthis file transfer.
 */
  public Jid getRequestor(){
    return streamInitiation.getFrom();
  }
  /** 
 * Returns the stream ID that uniquely identifies this file transfer.
 * @return Returns the stream ID that uniquely identifies this filetransfer.
 */
  public String getStreamID(){
    return streamInitiation.getSessionID();
  }
  /** 
 * Returns the stream initiation stanza that was sent by the requester which contains the parameters of the file transfer being transfer and also the methods available to transfer the file.
 * @return Returns the stream initiation stanza that was sent by therequester which contains the parameters of the file transfer being transfer and also the methods available to transfer the file.
 */
  protected StreamInitiation getStreamInitiation(){
    return streamInitiation;
  }
  /** 
 * Accepts this file transfer and creates the incoming file transfer.
 * @return Returns the IncomingFileTransfer on which thefile transfer can be carried out.
 */
  public IncomingFileTransfer accept(){
    return manager.createIncomingFileTransfer(this);
  }
  /** 
 * Rejects the file transfer request.
 * @throws NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 */
  public void reject() throws NotConnectedException, InterruptedException {
    manager.rejectIncomingFileTransfer(this);
  }
}
