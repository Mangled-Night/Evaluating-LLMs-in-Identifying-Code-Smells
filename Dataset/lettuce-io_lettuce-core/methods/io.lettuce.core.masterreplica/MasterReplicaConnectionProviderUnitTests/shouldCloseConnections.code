@Test void shouldCloseConnections(){
  when(channelHandlerMock.closeAsync()).thenReturn(CompletableFuture.completedFuture(null));
  when(clientMock.connectAsync(eq(StringCodec.UTF8),any())).thenReturn(ConnectionFuture.completed(null,nodeConnectionMock));
  StatefulRedisConnection<String,String> connection=sut.getConnection(ConnectionIntent.READ);
  assertThat(connection).isNotNull();
  sut.close();
  verify(channelHandlerMock).closeAsync();
}
