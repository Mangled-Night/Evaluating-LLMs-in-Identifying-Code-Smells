public static EndpointConnectionException from(List<RemoteConnectionEndpointLookupFailure> lookupFailures,List<? extends RemoteConnectionException<?>> connectionExceptions){
  StringBuilder sb=new StringBuilder(256);
  if (!lookupFailures.isEmpty()) {
    sb.append("Could not lookup the following endpoints: ");
    StringUtils.appendTo(lookupFailures,sb);
  }
  if (!connectionExceptions.isEmpty()) {
    sb.append("The following addresses failed: ");
    StringUtils.appendTo(connectionExceptions,sb,rce -> sb.append(rce.getErrorMessage()));
  }
  return new EndpointConnectionException(sb.toString(),lookupFailures,connectionExceptions);
}
