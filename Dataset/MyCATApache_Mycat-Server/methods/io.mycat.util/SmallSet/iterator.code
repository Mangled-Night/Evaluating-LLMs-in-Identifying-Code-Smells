@Override public Iterator<E> iterator(){
  return new Iterator<E>(){
    private int i;
    private boolean next;
    @Override public boolean hasNext(){
      return i < size;
    }
    @Override public E next(){
      next=true;
switch (size) {
case 0:
        throw new NoSuchElementException();
case 1:
switch (i) {
case 0:
        ++i;
      return single;
default :
    throw new NoSuchElementException();
}
default :
try {
E e=list.get(i);
++i;
return e;
}
 catch (IndexOutOfBoundsException e) {
throw new NoSuchElementException(e.getMessage());
}
}
}
@Override public void remove(){
if (!next) {
throw new IllegalStateException();
}
switch (size) {
case 0:
throw new IllegalStateException();
case 1:
size=i=0;
single=null;
if (list != null && !list.isEmpty()) {
list.remove(0);
}
break;
default :
list.remove(--i);
if (--size == 1) {
single=list.get(0);
}
break;
}
next=false;
}
}
;
}
