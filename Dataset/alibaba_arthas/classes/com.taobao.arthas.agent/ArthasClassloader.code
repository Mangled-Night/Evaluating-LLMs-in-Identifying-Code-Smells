/** 
 * @author beiwei30 on 09/12/2016.
 */
public class ArthasClassloader extends URLClassLoader {
  public ArthasClassloader(  URL[] urls){
    super(urls,ClassLoader.getSystemClassLoader().getParent());
  }
  @Override protected synchronized Class<?> loadClass(  String name,  boolean resolve) throws ClassNotFoundException {
    final Class<?> loadedClass=findLoadedClass(name);
    if (loadedClass != null) {
      return loadedClass;
    }
    if (name != null && (name.startsWith("sun.") || name.startsWith("java."))) {
      return super.loadClass(name,resolve);
    }
    try {
      Class<?> aClass=findClass(name);
      if (resolve) {
        resolveClass(aClass);
      }
      return aClass;
    }
 catch (    Exception e) {
    }
    return super.loadClass(name,resolve);
  }
}
