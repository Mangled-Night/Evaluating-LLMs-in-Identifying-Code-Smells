/** 
 * Accepting a SOCKS5 Bytestream request should fail if the request doesn't contain any Socks5 proxies.
 * @throws Exception should not happen
 */
@Test public void shouldFailIfRequestHasNoStreamHosts() throws Exception {
  final Protocol protocol=new Protocol();
  final XMPPConnection connection=ConnectionUtils.createMockedConnection(protocol,targetJID);
  assertThrows(Socks5Exception.NoSocks5StreamHostsProvided.class,() -> {
    Bytestream bytestreamInitialization=Socks5PacketUtils.createBytestreamInitiation(initiatorJID,targetJID,sessionID);
    Socks5BytestreamManager byteStreamManager=Socks5BytestreamManager.getBytestreamManager(connection);
    Socks5BytestreamRequest byteStreamRequest=new Socks5BytestreamRequest(byteStreamManager,bytestreamInitialization);
    byteStreamRequest.accept();
  }
);
  assertEquals(1,protocol.getRequests().size());
  Stanza targetResponse=protocol.getRequests().remove(0);
  assertTrue(IQ.class.isInstance(targetResponse));
  assertEquals(initiatorJID,targetResponse.getTo());
  assertEquals(IQ.Type.error,((IQ)targetResponse).getType());
  assertEquals(StanzaError.Condition.item_not_found,targetResponse.getError().getCondition());
}
