private static <CC extends ConnectionConfiguration>Method getBuilderMethod(Class<CC> connectionConfigurationClass) throws NoSuchMethodException, SecurityException {
  Method builderMethod=connectionConfigurationClass.getMethod("builder");
  if (!Modifier.isStatic(builderMethod.getModifiers())) {
    throw new IllegalArgumentException();
  }
  Class<?> returnType=builderMethod.getReturnType();
  if (!ConnectionConfiguration.Builder.class.isAssignableFrom(returnType)) {
    throw new IllegalArgumentException();
  }
  return builderMethod;
}
