/** 
 * 测试发送COM_STMT_SEND_LONG_DATA命令
 * @throws IOException 
 */
public static void testComStmtSendLondData() throws IOException {
  Connection conn=null;
  PreparedStatement pstmt=null;
  ClassLoader classLoader=Thread.currentThread().getContextClassLoader();
  InputStream image0In=classLoader.getResourceAsStream("blob/image0.jpg");
  InputStream image1In=classLoader.getResourceAsStream("blob/image1.png");
  InputStream image2In=classLoader.getResourceAsStream("blob/image2.png");
  InputStream image3In=classLoader.getResourceAsStream("blob/image3.png");
  byte[] image0Bytes=getBytes(image0In);
  byte[] image1Bytes=getBytes(image1In);
  byte[] image2Bytes=getBytes(image2In);
  byte[] image3Bytes=getBytes(image3In);
  try {
    conn=DriverManager.getConnection(DB_URL,USER,PASS);
    pstmt=conn.prepareStatement("insert into hotnews(id, title, content, image0, image1, image2, image3) values(?,?,?,?,?,?,?)");
    pstmt.setInt(1,1314);
    pstmt.setString(2,"hotnew");
    pstmt.setBinaryStream(3,new ByteArrayInputStream("this is a content of hotnew".getBytes("UTF-8")));
    Blob image0Blob=conn.createBlob();
    Blob image1Blob=conn.createBlob();
    Blob image2Blob=conn.createBlob();
    Blob image3Blob=conn.createBlob();
    image0Blob.setBytes(1,image0Bytes);
    image1Blob.setBytes(1,image1Bytes);
    image2Blob.setBytes(1,image2Bytes);
    image3Blob.setBytes(1,image3Bytes);
    pstmt.setBlob(4,image0Blob);
    pstmt.setBlob(5,image1Blob);
    pstmt.setBlob(6,image2Blob);
    pstmt.setBlob(7,image3Blob);
    pstmt.execute();
    pstmt=conn.prepareStatement("select image0, image1, image2, image3 from hotnews where id = ?");
    pstmt.setInt(1,1314);
    ResultSet rs=pstmt.executeQuery();
    if (rs.next()) {
      InputStream _image0In=rs.getBlob(1).getBinaryStream();
      InputStream _image1In=rs.getBlob(2).getBinaryStream();
      InputStream _image2In=rs.getBlob(3).getBinaryStream();
      InputStream _image3In=rs.getBlob(4).getBinaryStream();
      Assert.assertArrayEquals(image0Bytes,getBytes(_image0In));
      Assert.assertArrayEquals(image1Bytes,getBytes(_image1In));
      Assert.assertArrayEquals(image2Bytes,getBytes(_image2In));
      Assert.assertArrayEquals(image3Bytes,getBytes(_image3In));
    }
    pstmt.close();
  }
 catch (  SQLException e) {
    e.printStackTrace();
  }
catch (  UnsupportedEncodingException e) {
    e.printStackTrace();
  }
 finally {
    if (conn != null) {
      try {
        conn.close();
      }
 catch (      SQLException e) {
        e.printStackTrace();
      }
    }
  }
}
