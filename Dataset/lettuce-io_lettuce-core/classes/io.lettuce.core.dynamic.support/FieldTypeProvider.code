/** 
 * {@link TypeProvider} for {@link Type}s obtained from a  {@link Field}.
 */
@SuppressWarnings("serial") static class FieldTypeProvider implements TypeProvider {
  private final String fieldName;
  private final Class<?> declaringClass;
  private transient Field field;
  public FieldTypeProvider(  Field field){
    this.fieldName=field.getName();
    this.declaringClass=field.getDeclaringClass();
    this.field=field;
  }
  @Override public Type getType(){
    return this.field.getGenericType();
  }
  @Override public Object getSource(){
    return this.field;
  }
  private void readObject(  ObjectInputStream inputStream) throws IOException, ClassNotFoundException {
    inputStream.defaultReadObject();
    try {
      this.field=this.declaringClass.getDeclaredField(this.fieldName);
    }
 catch (    Throwable ex) {
      throw new IllegalStateException("Could not find original class structure",ex);
    }
  }
}
