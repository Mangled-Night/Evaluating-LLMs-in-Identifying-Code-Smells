/** 
 * Refresh and merge device list of contact.
 * @param connection authenticated XMPP connection
 * @param userDevice our OmemoDevice
 * @param contact contact we want to fetch the deviceList from
 * @return cached device list after refresh.
 * @throws InterruptedException if the calling thread was interrupted.
 * @throws PubSubException.NotALeafNodeException if a PubSub leaf node operation was attempted on a non-leaf node.
 * @throws XMPPException.XMPPErrorException if there was an XMPP error returned.
 * @throws SmackException.NotConnectedException if the XMPP connection is not connected.
 * @throws SmackException.NoResponseException if there was no response from the remote entity.
 * @throws IOException if an I/O error occurred.
 */
OmemoCachedDeviceList refreshDeviceList(XMPPConnection connection,OmemoDevice userDevice,BareJid contact) throws InterruptedException, PubSubException.NotALeafNodeException, XMPPException.XMPPErrorException, SmackException.NotConnectedException, SmackException.NoResponseException, IOException {
  OmemoDeviceListElement publishedList;
  try {
    publishedList=fetchDeviceList(connection,contact);
  }
 catch (  PubSubException.NotAPubSubNodeException e) {
    LOGGER.log(Level.WARNING,"Error refreshing deviceList: ",e);
    publishedList=null;
  }
  if (publishedList == null) {
    publishedList=new OmemoDeviceListElement_VAxolotl(Collections.<Integer>emptySet());
  }
  return getOmemoStoreBackend().mergeCachedDeviceList(userDevice,contact,publishedList);
}
