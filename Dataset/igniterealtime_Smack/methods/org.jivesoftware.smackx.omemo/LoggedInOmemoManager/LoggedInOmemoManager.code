public LoggedInOmemoManager(OmemoManager manager) throws SmackException.NotLoggedInException {
  if (manager == null) {
    throw new IllegalArgumentException("OmemoManager cannot be null.");
  }
  if (manager.getOwnJid() == null) {
    if (manager.getConnection().isAuthenticated()) {
      manager.ownJid=manager.getConnection().getUser().asBareJid();
    }
 else {
      throw new SmackException.NotLoggedInException();
    }
  }
  this.manager=manager;
}
