/** 
 * Tests a reconnection in a anonymously logged connection. Closes the connection and then reconnects.
 */
public void testAnonymousReconnection() throws Exception {
  XMPPTCPConnection connection=createConnection();
  connection.connect();
  XMPPTCPConnectionTestListener listener=new XMPPConnectionTestListener();
  connection.addConnectionListener(listener);
  connection.loginAnonymously();
  connection.disconnect();
  assertEquals("ConnectionListener.connectionClosed() was not notified",true,listener.connectionClosed);
  connection.connect();
  connection.loginAnonymously();
  assertEquals("Failed the manual connection",true,connection.isAnonymous());
}
