private <T extends ExecutorService>T addReference(T reference){
  lock.lock();
  try {
    long counter=0;
    if (refCounter.containsKey(reference)) {
      counter=refCounter.get(reference);
    }
    logger.debug("Adding reference to {}, existing ref count {}",reference,counter);
    counter++;
    refCounter.put(reference,counter);
  }
  finally {
    lock.unlock();
  }
  return reference;
}
