public EntitySystemLibrary(Context context,TypeHandlerLibrary typeHandlerLibrary){
  ModuleManager manager=context.get(ModuleManager.class);
  ModuleEnvironment environment=null;
  if (manager != null) {
    environment=manager.getEnvironment();
  }
  ReflectFactory reflectFactory=context.get(ReflectFactory.class);
  CopyStrategyLibrary copyStrategyLibrary=context.get(CopyStrategyLibrary.class);
  this.typeHandlerLibrary=typeHandlerLibrary;
  this.componentLibrary=new ComponentLibrary(environment,reflectFactory,copyStrategyLibrary);
  this.eventLibrary=new EventLibrary(environment,reflectFactory,copyStrategyLibrary);
}
