public class ReceivedExtensionTest {
  String receivedMessageStanza="<message to='northumberland@shakespeare.lit/westminster' id='message-2'>" + "<received xmlns='urn:xmpp:chat-markers:0' id='message-1'/>" + "</message>";
  String receivedExtension="<received xmlns='urn:xmpp:chat-markers:0' id='message-1'/>";
  @Test public void checkReceivedExtension() throws Exception {
    Message message=StanzaBuilder.buildMessage("message-2").to("northumberland@shakespeare.lit/westminster").addExtension(new ChatMarkersElements.ReceivedExtension("message-1")).build();
    assertEquals(receivedMessageStanza,message.toXML(StreamOpen.CLIENT_NAMESPACE).toString());
  }
  @Test public void checkReceivedProvider() throws Exception {
    XmlPullParser parser=PacketParserUtils.getParserFor(receivedExtension);
    ReceivedExtension receivedExtension1=new ReceivedProvider().parse(parser);
    assertEquals("message-1",receivedExtension1.getId());
    Message message=PacketParserUtils.parseStanza(receivedMessageStanza);
    ReceivedExtension receivedExtension2=ReceivedExtension.from(message);
    assertEquals("message-1",receivedExtension2.getId());
  }
}
