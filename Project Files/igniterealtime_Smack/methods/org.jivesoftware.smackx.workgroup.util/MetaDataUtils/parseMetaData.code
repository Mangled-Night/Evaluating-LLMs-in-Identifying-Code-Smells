/** 
 * Parses any available meta-data and returns it as a Map of String name/value pairs. The parser must be positioned at an opening meta-data tag, or the an empty map will be returned.
 * @param parser the XML parser positioned at an opening meta-data tag.
 * @return the meta-data.
 * @throws XmlPullParserException if an error occurs while parsing the XML.
 * @throws IOException            if an error occurs while parsing the XML.
 */
public static Map<String,List<String>> parseMetaData(XmlPullParser parser) throws XmlPullParserException, IOException {
  XmlPullParser.Event eventType=parser.getEventType();
  if ((eventType == XmlPullParser.Event.START_ELEMENT) && parser.getName().equals(MetaData.ELEMENT_NAME) && parser.getNamespace().equals(MetaData.NAMESPACE)) {
    Map<String,List<String>> metaData=new Hashtable<>();
    eventType=parser.next();
    while ((eventType != XmlPullParser.Event.END_ELEMENT) || !parser.getName().equals(MetaData.ELEMENT_NAME)) {
      String name=parser.getAttributeValue(0);
      String value=parser.nextText();
      if (metaData.containsKey(name)) {
        List<String> values=metaData.get(name);
        values.add(value);
      }
 else {
        List<String> values=new ArrayList<>();
        values.add(value);
        metaData.put(name,values);
      }
      eventType=parser.next();
    }
    return metaData;
  }
  return Collections.emptyMap();
}
