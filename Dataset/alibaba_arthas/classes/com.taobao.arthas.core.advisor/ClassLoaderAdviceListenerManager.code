static class ClassLoaderAdviceListenerManager {
  private ConcurrentHashMap<String,List<AdviceListener>> map=new ConcurrentHashMap<String,List<AdviceListener>>();
  private String key(  String className,  String methodName,  String methodDesc){
    return className + methodName + methodDesc;
  }
  private String keyForTrace(  String className,  String owner,  String methodName,  String methodDesc){
    return className + owner + methodName+ methodDesc;
  }
  public void registerAdviceListener(  String className,  String methodName,  String methodDesc,  AdviceListener listener){
synchronized (this) {
      className=className.replace('/','.');
      String key=key(className,methodName,methodDesc);
      List<AdviceListener> listeners=map.get(key);
      if (listeners == null) {
        listeners=new ArrayList<AdviceListener>();
        map.put(key,listeners);
      }
      if (!listeners.contains(listener)) {
        listeners.add(listener);
      }
    }
  }
  public List<AdviceListener> queryAdviceListeners(  String className,  String methodName,  String methodDesc){
    className=className.replace('/','.');
    String key=key(className,methodName,methodDesc);
    List<AdviceListener> listeners=map.get(key);
    return listeners;
  }
  public void registerTraceAdviceListener(  String className,  String owner,  String methodName,  String methodDesc,  AdviceListener listener){
    className=className.replace('/','.');
    String key=keyForTrace(className,owner,methodName,methodDesc);
    List<AdviceListener> listeners=map.get(key);
    if (listeners == null) {
      listeners=new ArrayList<AdviceListener>();
      map.put(key,listeners);
    }
    if (!listeners.contains(listener)) {
      listeners.add(listener);
    }
  }
  public List<AdviceListener> queryTraceAdviceListeners(  String className,  String owner,  String methodName,  String methodDesc){
    className=className.replace('/','.');
    String key=keyForTrace(className,owner,methodName,methodDesc);
    List<AdviceListener> listeners=map.get(key);
    return listeners;
  }
}
