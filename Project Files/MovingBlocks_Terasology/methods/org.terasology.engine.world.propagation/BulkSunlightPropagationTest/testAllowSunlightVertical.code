@Test public void testAllowSunlightVertical(){
  for (  Vector3ic pos : new BlockRegion(0,16,0).union(Chunks.SIZE_X - 1,Chunks.SIZE_Y - 1,Chunks.SIZE_Z - 1)) {
    regenWorldView.setValueAt(pos,Chunks.MAX_SUNLIGHT_REGEN);
    lightWorldView.setValueAt(pos,Chunks.MAX_SUNLIGHT);
  }
  for (  Vector3ic pos : new BlockRegion(0,15,0).union(Chunks.SIZE_X - 1,15,Chunks.SIZE_Z - 1)) {
    regenWorldView.setBlockAt(new Vector3i(pos),solid);
  }
  for (  Vector3ic pos : new BlockRegion(0,0,0).union(Chunks.SIZE_X - 1,14,Chunks.SIZE_Z - 1)) {
    regenWorldView.setValueAt(pos,(byte)(14 - pos.y()));
  }
  regenWorldView.setBlockAt(new Vector3i(16,15,16),air);
  propagator.process(new BlockChange(new Vector3i(16,15,16),solid,air));
  sunlightPropagator.process(new BlockChange(new Vector3i(16,15,16),solid,air));
  for (int y=0; y < 16; y++) {
    assertEquals(Chunks.MAX_SUNLIGHT_REGEN,regenWorldView.getValueAt(new Vector3i(16,y,16)),"Incorrect value at " + y);
    assertEquals(Chunks.MAX_SUNLIGHT,lightWorldView.getValueAt(new Vector3i(16,y,16)));
  }
  for (int y=0; y < 15; y++) {
    assertEquals(Chunks.MAX_SUNLIGHT - 1,lightWorldView.getValueAt(new Vector3i(15,y,16)));
  }
}
