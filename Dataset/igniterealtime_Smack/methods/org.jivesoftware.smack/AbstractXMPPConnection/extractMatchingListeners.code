private static void extractMatchingListeners(Stanza stanza,Map<StanzaListener,ListenerWrapper> listeners,Collection<StanzaListener> listenersToNotify){
synchronized (listeners) {
    for (    ListenerWrapper listenerWrapper : listeners.values()) {
      if (listenerWrapper.filterMatches(stanza)) {
        listenersToNotify.add(listenerWrapper.getListener());
      }
    }
  }
}
