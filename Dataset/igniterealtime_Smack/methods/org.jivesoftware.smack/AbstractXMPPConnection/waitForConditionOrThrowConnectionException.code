protected final void waitForConditionOrThrowConnectionException(Supplier<Boolean> condition,String waitFor) throws InterruptedException, SmackException, XMPPException {
  boolean success=waitFor(() -> condition.get().booleanValue() || hasCurrentConnectionException());
  if (hasCurrentConnectionException()) {
    throwCurrentConnectionException();
  }
  if (!success) {
    throw NoResponseException.newWith(this,waitFor);
  }
}
