public class BlockAreaTypeHandlerTest extends ModuleEnvironmentTest {
static class TestObject {
    public BlockArea b1;
    public BlockAreac b2;
  }
  private TypeHandlerLibrary typeHandlerLibrary;
  private Serializer<?> gsonSerializer;
  private Gson gson=new Gson();
  @Override public void setup(){
    ModuleContext.setContext(moduleManager.getEnvironment().get(new Name("unittest")));
    typeHandlerLibrary=TypeHandlerLibraryImpl.forModuleEnvironment(moduleManager,typeRegistry);
    gsonSerializer=new Serializer<>(typeHandlerLibrary,new GsonPersistedDataSerializer(),new GsonPersistedDataWriter(gson),new GsonPersistedDataReader(gson));
  }
  @Test public void testGsonSerialization() throws IOException {
    TestObject a=new TestObject();
    a.b1=new BlockArea(-1,-1,0,0);
    a.b2=new BlockArea(0,0,1,1);
    byte[] data=gsonSerializer.serialize(a,new TypeInfo<TestObject>(){
    }
).get();
    TestObject o=gsonSerializer.deserialize(new TypeInfo<TestObject>(){
    }
,data).get();
    assertEquals(new BlockArea(-1,-1,0,0),o.b1);
    assertEquals(new BlockArea(0,0,1,1),o.b2);
  }
}
