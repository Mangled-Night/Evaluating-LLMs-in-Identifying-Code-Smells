/** 
 * Tests creating new MUC rooms.
 * @author Gaston Dombiak
 */
public class MultiUserChatCreationTest extends SmackTestCase {
  private String room;
  /** 
 * Constructor for MultiUserChatCreationTest.
 * @param arg0 TODO javadoc me please
 */
  public MultiUserChatCreationTest(  String arg0){
    super(arg0);
  }
  /** 
 * Tests creating a new "Reserved Room".
 */
  public void testCreateReservedRoom(){
    MultiUserChat muc=new MultiUserChat(getConnection(0),room);
    try {
      muc.create("testbot1");
      Form form=muc.getConfigurationForm();
      assertNotNull("No room configuration form",form);
      Form submitForm=form.createAnswerForm();
      for (Iterator<FormField> fields=form.getFields(); fields.hasNext(); ) {
        FormField field=fields.next();
        if (!FormField.TYPE_HIDDEN.equals(field.getType()) && field.getVariable() != null) {
          submitForm.setDefaultAnswer(field.getVariable());
        }
      }
      List<String> owners=new ArrayList<String>();
      owners.add(getBareJID(0));
      submitForm.setAnswer("muc#roomconfig_roomowners",owners);
      muc.sendConfigurationForm(submitForm);
      muc.destroy("The room has almost no activity...",null);
    }
 catch (    XMPPException e) {
      e.printStackTrace();
      fail(e.getMessage());
    }
  }
  /** 
 * Tests creating a new "Instant Room".
 */
  public void testCreateInstantRoom(){
    MultiUserChat muc=new MultiUserChat(getConnection(0),room);
    try {
      muc.create("testbot");
      muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT));
      muc.destroy("The room has almost no activity...",null);
    }
 catch (    XMPPException e) {
      e.printStackTrace();
      fail(e.getMessage());
    }
  }
  protected int getMaxConnections(){
    return 2;
  }
  protected void setUp() throws Exception {
    super.setUp();
    room="fruta124@" + getMUCDomain();
  }
}
