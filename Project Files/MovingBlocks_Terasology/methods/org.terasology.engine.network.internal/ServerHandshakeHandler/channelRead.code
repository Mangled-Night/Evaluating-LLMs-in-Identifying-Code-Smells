@Override public void channelRead(ChannelHandlerContext ctx,Object msg) throws Exception {
  NetData.NetMessage message=(NetData.NetMessage)msg;
  if (message.hasNewIdentityRequest()) {
    processNewIdentityRequest(message.getNewIdentityRequest(),ctx);
  }
 else   if (message.hasHandshakeHello() && message.hasHandshakeVerification()) {
    processClientHandshake(message.getHandshakeHello(),message.getHandshakeVerification(),ctx);
  }
}
