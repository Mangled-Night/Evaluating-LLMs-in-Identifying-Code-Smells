public class GsonPersistedDataReader implements PersistedDataReader<GsonPersistedData> {
  private final Gson gson;
  private final Charset charset;
  public GsonPersistedDataReader(  Gson gson,  Charset charset){
    this.gson=gson;
    this.charset=charset;
  }
  public GsonPersistedDataReader(  Gson gson){
    this(gson,StandardCharsets.UTF_8);
  }
  @Override public GsonPersistedData read(  InputStream inputStream) throws IOException {
    JsonObject jsonObject=gson.fromJson(new InputStreamReader(inputStream),JsonObject.class);
    return new GsonPersistedData(jsonObject);
  }
  @Override public GsonPersistedData read(  byte[] byteBuffer) throws IOException {
    JsonObject jsonObject=gson.fromJson(new String(byteBuffer,charset),JsonObject.class);
    return new GsonPersistedData(jsonObject);
  }
}
