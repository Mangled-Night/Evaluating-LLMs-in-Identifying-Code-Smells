private TlsState(SmackTlsContext smackTlsContext) throws IOException {
  this.smackTlsContext=smackTlsContext;
  String peerHost=connectionInternal.connection.getConfiguration().getXMPPServiceDomain().toString();
  engine=smackTlsContext.sslContext.createSSLEngine(peerHost,remoteAddress.getPort());
  engine.setUseClientMode(true);
  SSLSession session=engine.getSession();
  int applicationBufferSize=session.getApplicationBufferSize();
  int packetBufferSize=session.getPacketBufferSize();
  myNetData=ByteBuffer.allocateDirect(packetBufferSize);
  peerAppData=ByteBuffer.allocate(applicationBufferSize);
}
