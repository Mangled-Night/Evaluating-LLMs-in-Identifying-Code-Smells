/** 
 * Return all OmemoFingerprints of active devices of a contact. TODO: Make more fail-safe
 * @param contact contact
 * @return Map of all active devices of the contact and their fingerprints.
 * @throws SmackException.NotLoggedInException if the XMPP connection is not authenticated.
 * @throws CorruptedOmemoKeyException if the OMEMO key is corrupted.
 * @throws CannotEstablishOmemoSessionException if no OMEMO session could be established.
 * @throws SmackException.NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 * @throws SmackException.NoResponseException if there was no response from the remote entity.
 * @throws IOException if an I/O error occurred.
 */
public synchronized HashMap<OmemoDevice,OmemoFingerprint> getActiveFingerprints(BareJid contact) throws SmackException.NotLoggedInException, CorruptedOmemoKeyException, CannotEstablishOmemoSessionException, SmackException.NotConnectedException, InterruptedException, SmackException.NoResponseException, IOException {
  if (getOwnJid() == null) {
    throw new SmackException.NotLoggedInException();
  }
  HashMap<OmemoDevice,OmemoFingerprint> fingerprints=new HashMap<>();
  OmemoCachedDeviceList deviceList=getOmemoService().getOmemoStoreBackend().loadCachedDeviceList(getOwnDevice(),contact);
  for (  int id : deviceList.getActiveDevices()) {
    OmemoDevice device=new OmemoDevice(contact,id);
    OmemoFingerprint fingerprint=getFingerprint(device);
    if (fingerprint != null) {
      fingerprints.put(device,fingerprint);
    }
  }
  return fingerprints;
}
