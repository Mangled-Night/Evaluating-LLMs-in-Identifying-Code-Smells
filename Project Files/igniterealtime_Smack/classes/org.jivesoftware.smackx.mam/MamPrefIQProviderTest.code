public class MamPrefIQProviderTest extends MamTest {
  private static final String exampleMamPrefsIQ1="<prefs xmlns='urn:xmpp:mam:2' default='roster'>" + "<always>" + "<jid>romeo@montague.lit</jid>"+ "</always>"+ "<never>"+ "<jid>montague@montague.lit</jid>"+ "</never>"+ "</prefs>";
  private static final String exampleMamPrefsIQ2="<prefs xmlns='urn:xmpp:mam:2' default='roster'>" + "<always>" + "<jid>romeo@montague.lit</jid>"+ "<jid>montague@montague.lit</jid>"+ "</always>"+ "<never>"+ "</never>"+ "</prefs>";
  private static final String exampleMamPrefsIQ3="<prefs xmlns='urn:xmpp:mam:2'>" + "</prefs>";
  private static final String exampleMamPrefsResultIQ="<iq type='result' id='juliet3'>" + "<prefs xmlns='urn:xmpp:mam:2' default='roster'>" + "<always>"+ "<jid>romeo@montague.lit</jid>"+ "</always>"+ "<never>"+ "<jid>sarasa@montague.lit</jid>"+ "<jid>montague@montague.lit</jid>"+ "</never>"+ "</prefs>"+ "</iq>";
  @ParameterizedTest @EnumSource(value=SmackTestUtil.XmlPullParserKind.class) public void checkMamPrefsIQProvider(  XmlPullParserKind parserKind) throws XmlPullParserException, IOException, SmackParsingException {
    XmlPullParser parser1=SmackTestUtil.getParserFor(exampleMamPrefsIQ1,parserKind);
    MamPrefsIQ mamPrefIQ1=MamPrefsIQProvider.INSTANCE.parse(parser1,null);
    assertEquals(IQ.Type.set,mamPrefIQ1.getType());
    assertEquals(mamPrefIQ1.getAlwaysJids().get(0).toString(),"romeo@montague.lit");
    assertEquals(mamPrefIQ1.getNeverJids().get(0).toString(),"montague@montague.lit");
    XmlPullParser parser2=SmackTestUtil.getParserFor(exampleMamPrefsIQ2,parserKind);
    MamPrefsIQ mamPrefIQ2=MamPrefsIQProvider.INSTANCE.parse(parser2,null);
    assertEquals(IQ.Type.set,mamPrefIQ2.getType());
    assertEquals(mamPrefIQ2.getAlwaysJids().get(0).toString(),"romeo@montague.lit");
    assertEquals(mamPrefIQ2.getAlwaysJids().get(1).toString(),"montague@montague.lit");
    assertTrue(mamPrefIQ2.getNeverJids().isEmpty());
    XmlPullParser parser3=SmackTestUtil.getParserFor(exampleMamPrefsIQ3,parserKind);
    MamPrefsIQ mamPrefIQ3=MamPrefsIQProvider.INSTANCE.parse(parser3,null);
    assertEquals(IQ.Type.set,mamPrefIQ3.getType());
  }
  @Test public void checkMamPrefResult() throws Exception {
    IQ iq=PacketParserUtils.parseStanza(exampleMamPrefsResultIQ);
    MamPrefsIQ mamPrefsIQ=(MamPrefsIQ)iq;
    List<Jid> alwaysJids=mamPrefsIQ.getAlwaysJids();
    List<Jid> neverJids=mamPrefsIQ.getNeverJids();
    assertEquals(alwaysJids.size(),1);
    assertEquals(neverJids.size(),2);
    assertEquals(alwaysJids.get(0).toString(),"romeo@montague.lit");
    assertEquals(neverJids.get(1).toString(),"montague@montague.lit");
  }
}
