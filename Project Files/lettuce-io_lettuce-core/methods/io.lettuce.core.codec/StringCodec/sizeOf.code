/** 
 * Calculate either the maximum number of bytes a string may occupy in a given character set or the average number of bytes it may hold.
 */
int sizeOf(String value,boolean estimate){
  if (utf8) {
    return ByteBufUtil.utf8MaxBytes(value);
  }
  if (ascii) {
    return value.length();
  }
  if (estimate) {
    return (int)averageBytesPerChar * value.length();
  }
  return (int)maxBytesPerChar * value.length();
}
