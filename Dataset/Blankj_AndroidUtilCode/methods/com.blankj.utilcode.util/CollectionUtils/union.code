/** 
 * Returns a  {@link Collection} containing the unionof the given  {@link Collection}s. <p> The cardinality of each element in the returned  {@link Collection}will be equal to the maximum of the cardinality of that element in the two given  {@link Collection}s.
 * @param a the first collection
 * @param b the second collection
 * @return the union of the two collections
 * @see Collection#addAll
 */
public static Collection union(final Collection a,final Collection b){
  if (a == null && b == null)   return new ArrayList();
  if (a == null)   return new ArrayList<Object>(b);
  if (b == null)   return new ArrayList<Object>(a);
  ArrayList<Object> list=new ArrayList<>();
  Map<Object,Integer> mapA=getCardinalityMap(a);
  Map<Object,Integer> mapB=getCardinalityMap(b);
  Set<Object> elts=new HashSet<Object>(a);
  elts.addAll(b);
  for (  Object obj : elts) {
    for (int i=0, m=Math.max(getFreq(obj,mapA),getFreq(obj,mapB)); i < m; i++) {
      list.add(obj);
    }
  }
  return list;
}
