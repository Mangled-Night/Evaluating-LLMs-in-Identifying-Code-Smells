public void writeRow(RowDataPacket rowDataPkg){
  ServerConnection sc=session.getSource();
  try {
    writeLock.lock();
    rowDataPkg.packetId=incPackageId();
    ByteBuffer buf=rowDataPkg.write(sc.allocate(),sc,true);
    sc.write(buf);
  }
  finally {
    writeLock.unlock();
  }
}
