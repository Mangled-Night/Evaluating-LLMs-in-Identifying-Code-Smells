void processMessage(String source,String channel,String message,Supplier<Runnable> runnableSupplier){
  if (!processingAllowed(channel,message)) {
    return;
  }
  timedSemaphore.onEvent(timeout -> {
    Runnable runnable=runnableSupplier.get();
    if (timeout == null) {
      EventRecorder.getInstance().record(new SentinelTopologyRefreshEvent(source,message,0));
      eventExecutors.submit(runnable);
    }
 else {
      EventRecorder.getInstance().record(new SentinelTopologyRefreshEvent(source,message,timeout.remaining()));
      eventExecutors.schedule(runnable,timeout.remaining(),TimeUnit.MILLISECONDS);
    }
  }
);
}
