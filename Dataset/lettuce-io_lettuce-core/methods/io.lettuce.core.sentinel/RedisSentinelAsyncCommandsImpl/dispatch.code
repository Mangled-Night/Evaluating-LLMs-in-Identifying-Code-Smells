@Override public <T>RedisFuture<T> dispatch(ProtocolKeyword type,CommandOutput<K,V,T> output){
  LettuceAssert.notNull(type,"Command type must not be null");
  LettuceAssert.notNull(output,"CommandOutput type must not be null");
  return dispatch(new AsyncCommand<>(new Command<>(type,output)));
}
@Override public <T>RedisFuture<T> dispatch(ProtocolKeyword type,CommandOutput<K,V,T> output,CommandArgs<K,V> args){
  LettuceAssert.notNull(type,"Command type must not be null");
  LettuceAssert.notNull(output,"CommandOutput type must not be null");
  LettuceAssert.notNull(args,"CommandArgs type must not be null");
  return dispatch(new AsyncCommand<>(new Command<>(type,output,args)));
}
public <T>AsyncCommand<K,V,T> dispatch(RedisCommand<K,V,T> cmd){
  AsyncCommand<K,V,T> asyncCommand=new AsyncCommand<>(cmd);
  RedisCommand<K,V,T> dispatched=connection.dispatch(asyncCommand);
  if (dispatched instanceof AsyncCommand) {
    return (AsyncCommand<K,V,T>)dispatched;
  }
  return asyncCommand;
}
