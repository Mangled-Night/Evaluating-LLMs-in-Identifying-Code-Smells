@Override public void free(MemoryBlock memory){
  final long size=memory.size();
  if (shouldPool(size)) {
synchronized (this) {
      LinkedList<WeakReference<MemoryBlock>> pool=bufferPoolsBySize.get(size);
      if (pool == null) {
        pool=new LinkedList<WeakReference<MemoryBlock>>();
        bufferPoolsBySize.put(size,pool);
      }
      pool.add(new WeakReference<MemoryBlock>(memory));
    }
  }
 else {
  }
}
