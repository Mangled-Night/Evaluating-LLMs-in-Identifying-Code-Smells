@Test public void testUnblockedSunlightPropagationAfterHittingMaxRegen(){
  Chunk chunk=new ChunkImpl(0,0,0,blockManager,extraDataManager);
  InternalLightProcessor.generateInternalLighting(chunk);
  for (  Vector3ic pos : new BlockRegion(0,15,0).setSize(Chunks.SIZE_X,Chunks.SIZE_Y - 15,Chunks.SIZE_Z)) {
    assertEquals(0,chunk.getSunlight(pos));
  }
  for (  Vector3ic pos : new BlockRegion(0,0,0).setSize(Chunks.SIZE_X,Chunks.SIZE_Y - Chunks.MAX_SUNLIGHT_REGEN,Chunks.SIZE_Z)) {
    byte expectedSunlight=(byte)Math.min(Chunks.SIZE_Y - Chunks.SUNLIGHT_REGEN_THRESHOLD - pos.y()- 1,Chunks.MAX_SUNLIGHT);
    assertEquals(expectedSunlight,chunk.getSunlight(pos),() -> "Incorrect lighting at " + pos);
  }
}
