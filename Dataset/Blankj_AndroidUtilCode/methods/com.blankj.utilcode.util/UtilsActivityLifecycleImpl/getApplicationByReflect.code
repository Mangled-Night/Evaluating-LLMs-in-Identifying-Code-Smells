Application getApplicationByReflect(){
  try {
    Class activityThreadClass=Class.forName("android.app.ActivityThread");
    Object thread=getActivityThread();
    if (thread == null)     return null;
    Object app=activityThreadClass.getMethod("getApplication").invoke(thread);
    if (app == null)     return null;
    return (Application)app;
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return null;
}
