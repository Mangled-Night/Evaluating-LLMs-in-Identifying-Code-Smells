/** 
 * Create a transactional wrapper proxy for  {@link RedisCommands}.
 * @param connection the connection
 * @return the wrapper proxy.
 */
@SuppressWarnings("unchecked") public static <K,V>RedisCommands<K,V> sync(StatefulRedisConnection<K,V> connection){
  try {
    TxSyncInvocationHandler<K,V> handler=new TxSyncInvocationHandler<>(connection.sync());
    return (RedisCommands<K,V>)Proxy.newProxyInstance(handler.getClass().getClassLoader(),new Class<?>[]{RedisCommands.class},handler);
  }
 catch (  Exception e) {
    throw new IllegalStateException(e);
  }
}
