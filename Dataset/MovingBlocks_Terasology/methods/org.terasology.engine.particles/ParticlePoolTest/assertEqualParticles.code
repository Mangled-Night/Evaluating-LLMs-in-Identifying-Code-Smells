private static void assertEqualParticles(final ParticlePool expected,final int expIndex,final ParticlePool actual,final int actIndex,final float epsilon){
  final int expIndex3=expIndex * 3;
  final int expIndex4=expIndex * 4;
  final int actIndex3=actIndex * 3;
  final int actIndex4=actIndex * 4;
  assertTrue(TeraMath.fastAbs(expected.energy[expIndex] - actual.energy[actIndex]) < epsilon);
  for (int i=0; i < 3; i++) {
    assertTrue(TeraMath.fastAbs(expected.position[expIndex3 + i] - actual.position[actIndex3 + i]) < epsilon);
    assertTrue(TeraMath.fastAbs(expected.previousPosition[expIndex3 + i] - actual.previousPosition[actIndex3 + i]) < epsilon);
    assertTrue(TeraMath.fastAbs(expected.velocity[expIndex3 + i] - actual.velocity[actIndex3 + i]) < epsilon);
    assertTrue(TeraMath.fastAbs(expected.scale[expIndex3 + i] - actual.scale[actIndex3 + i]) < epsilon);
  }
  for (int i=0; i < 4; i++) {
    assertTrue(TeraMath.fastAbs(expected.color[expIndex4 + i] - actual.color[actIndex4 + i]) < epsilon);
  }
}
