@Override public void setVisible(boolean visible){
  super.setVisible(visible);
  if (isVisible()) {
    refresh();
  }
 else {
    hideImmediately();
  }
}
