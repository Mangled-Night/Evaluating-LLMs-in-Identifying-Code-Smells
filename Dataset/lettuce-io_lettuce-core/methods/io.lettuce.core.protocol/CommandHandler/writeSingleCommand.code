private void writeSingleCommand(ChannelHandlerContext ctx,RedisCommand<?,?,?> command,ChannelPromise promise){
  if (!isWriteable(command)) {
    promise.trySuccess();
    return;
  }
  addToStack(command,promise);
  attachTracing(ctx,command);
  ctx.write(command,promise);
}
