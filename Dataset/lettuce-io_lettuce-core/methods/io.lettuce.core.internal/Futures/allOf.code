/** 
 * Create a composite  {@link CompletableFuture} is composed from the given {@code stages}.
 * @param stages must not be {@code null}.
 * @return the composed {@link CompletableFuture}.
 * @since 5.1.1
 */
@SuppressWarnings({"rawtypes"}) public static CompletableFuture<Void> allOf(Collection<? extends CompletionStage<?>> stages){
  LettuceAssert.notNull(stages,"Futures must not be null");
  CompletableFuture[] futures=new CompletableFuture[stages.size()];
  int index=0;
  for (  CompletionStage<?> stage : stages) {
    futures[index++]=stage.toCompletableFuture();
  }
  return CompletableFuture.allOf(futures);
}
