@IntegrationEnvironment public class ModuleTestingEnvironmentTest {
  public static final int THE_ANSWER=42;
  @Test public void runUntilWithUnsatisfiedFutureExplainsTimeout(  MainLoop mainLoop){
    SettableFuture<?> unsatisfiedFuture=SettableFuture.create();
    UncheckedTimeoutException exception=assertThrows(UncheckedTimeoutException.class,() -> mainLoop.runUntil(unsatisfiedFuture));
    assertThat(exception).hasMessageThat().contains("default timeout");
  }
  @Test public void runUntilWithImmediateFutureReturnsValue(  MainLoop mainLoop){
    ListenableFuture<Integer> valueFuture=Futures.immediateFuture(THE_ANSWER);
    assertThat(mainLoop.runUntil(valueFuture)).isEqualTo(THE_ANSWER);
  }
}
