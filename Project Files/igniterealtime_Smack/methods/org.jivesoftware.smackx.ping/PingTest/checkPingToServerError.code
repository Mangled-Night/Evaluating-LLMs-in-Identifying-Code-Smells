/** 
 * Server returns an exception.
 * @throws Exception if an exception occurs.
 */
@Test public void checkPingToServerError() throws Exception {
  ThreadedDummyConnection con=getAuthenticatedDummyConnection();
  String reply="<iq type='error' id='qrzSp-16' to='test@myserver.com' from='" + con.getXMPPServiceDomain() + "'>"+ "<ping xmlns='urn:xmpp:ping'/>"+ "<error type='cancel'>"+ "<service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>"+ "</error>"+ "</iq>";
  IQ serviceUnavailable=PacketParserUtils.parseStanza(reply);
  con.addIQReply(serviceUnavailable);
  PingManager pinger=PingManager.getInstanceFor(con);
  boolean pingSuccess=pinger.pingMyServer();
  assertTrue(pingSuccess);
}
