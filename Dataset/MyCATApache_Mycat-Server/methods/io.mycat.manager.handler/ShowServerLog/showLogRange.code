public static PackageBufINf showLogRange(ManagerConnection c,ByteBuffer buffer,byte packetId,String key,String regex,int start,int end,String logFile){
  PackageBufINf bufINf=new PackageBufINf();
  Pattern pattern=null;
  if (regex != null) {
    pattern=Pattern.compile(regex,Pattern.CASE_INSENSITIVE);
  }
  if (key != null) {
    key=key.toLowerCase();
  }
  File file=getLogFile(logFile);
  BufferedReader br=null;
  int curLine=0;
  try {
    br=new BufferedReader(new FileReader(file));
    String line=null;
    while ((line=br.readLine()) != null) {
      curLine++;
      if (curLine >= start && curLine <= end && ((pattern != null && pattern.matcher(line).find()) || (pattern == null && key == null) || (key != null && line.toLowerCase().contains(key)))) {
        RowDataPacket row=new RowDataPacket(FIELD_COUNT);
        row.add(StringUtil.encode(curLine + "->" + line,c.getCharset()));
        row.packetId=++packetId;
        buffer=row.write(buffer,c,true);
      }
    }
    bufINf.buffer=buffer;
    bufINf.packetId=packetId;
    return bufINf;
  }
 catch (  Exception e) {
    LOGGER.error("showLogRangeError",e);
    RowDataPacket row=new RowDataPacket(FIELD_COUNT);
    row.add(StringUtil.encode(e.toString(),c.getCharset()));
    row.packetId=++packetId;
    buffer=row.write(buffer,c,true);
    bufINf.buffer=buffer;
  }
 finally {
    if (br != null) {
      try {
        br.close();
      }
 catch (      IOException e) {
        LOGGER.error("showLogRangeError",e);
      }
    }
  }
  bufINf.packetId=packetId;
  return bufINf;
}
