private static <MPB extends MessageOrPresenceBuilder<MP,MPB>,MP extends MessageOrPresence<MPB>>void addInterceptor(Map<Consumer<MPB>,GenericInterceptorWrapper<MPB,MP>> interceptors,Consumer<MPB> interceptor,Predicate<MP> filter){
  Objects.requireNonNull(interceptor,"Interceptor must not be null");
  GenericInterceptorWrapper<MPB,MP> interceptorWrapper=new GenericInterceptorWrapper<>(interceptor,filter);
synchronized (interceptors) {
    interceptors.put(interceptor,interceptorWrapper);
  }
}
