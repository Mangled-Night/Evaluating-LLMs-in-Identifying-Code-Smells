void runTest(Map<String,Long> map,List<RedisClusterNodeSnapshot> expectation,List<RedisClusterNodeSnapshot> nodes){
  for (  RedisClusterNodeSnapshot node : nodes) {
    node.setLatencyNs(map.get(node.getNodeId()));
  }
  List<RedisClusterNode> result=TopologyComparators.sortByLatency((Iterable)nodes);
  assertThat(result).containsExactly(expectation.toArray(new RedisClusterNodeSnapshot[expectation.size()]));
}
