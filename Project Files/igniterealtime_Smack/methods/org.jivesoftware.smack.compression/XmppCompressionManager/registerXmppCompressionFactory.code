public static XmppCompressionFactory registerXmppCompressionFactory(XmppCompressionFactory xmppCompressionFactory){
  final String method=xmppCompressionFactory.getCompressionMethod();
  XmppCompressionFactory previousFactory=null;
synchronized (xmppCompressionFactories) {
    for (Iterator<XmppCompressionFactory> it=xmppCompressionFactories.iterator(); it.hasNext(); ) {
      XmppCompressionFactory factory=it.next();
      if (factory.getCompressionMethod().equals(method)) {
        it.remove();
        previousFactory=factory;
        break;
      }
    }
    xmppCompressionFactories.add(xmppCompressionFactory);
    Collections.sort(xmppCompressionFactories);
  }
  return previousFactory;
}
