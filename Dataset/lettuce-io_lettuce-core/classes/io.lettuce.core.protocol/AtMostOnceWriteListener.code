static class AtMostOnceWriteListener extends ListenerSupport implements ChannelFutureListener {
  private static final Recycler<AtMostOnceWriteListener> RECYCLER=new Recycler<AtMostOnceWriteListener>(){
    @Override protected AtMostOnceWriteListener newObject(    Handle<AtMostOnceWriteListener> handle){
      return new AtMostOnceWriteListener(handle);
    }
  }
;
  private final Recycler.Handle<AtMostOnceWriteListener> handle;
  AtMostOnceWriteListener(  Recycler.Handle<AtMostOnceWriteListener> handle){
    this.handle=handle;
  }
  static AtMostOnceWriteListener newInstance(  DefaultEndpoint endpoint,  RedisCommand<?,?,?> command){
    AtMostOnceWriteListener entry=RECYCLER.get();
    entry.endpoint=endpoint;
    entry.sentCommand=command;
    return entry;
  }
  static AtMostOnceWriteListener newInstance(  DefaultEndpoint endpoint,  Collection<? extends RedisCommand<?,?,?>> commands){
    AtMostOnceWriteListener entry=RECYCLER.get();
    entry.endpoint=endpoint;
    entry.sentCommands=commands;
    return entry;
  }
  @Override public void operationComplete(  ChannelFuture future){
    try {
      dequeue();
      if (!future.isSuccess() && future.cause() != null) {
        complete(future.cause());
      }
    }
  finally {
      recycle();
    }
  }
  private void recycle(){
    this.endpoint=null;
    this.sentCommand=null;
    this.sentCommands=null;
    handle.recycle(this);
  }
}
