/** 
 * 资源文件读取工具
 * @author shuzheng
 * @date 2016年10月15日
 */
public class PropertiesFileUtil {
  private static HashMap<String,PropertiesFileUtil> configMap=new HashMap<String,PropertiesFileUtil>();
  private Date loadTime=null;
  private ResourceBundle resourceBundle=null;
  private static final String NAME="config";
  private static final Integer TIME_OUT=60 * 1000;
  private PropertiesFileUtil(  String name){
    this.loadTime=new Date();
    this.resourceBundle=ResourceBundle.getBundle(name);
  }
  public static synchronized PropertiesFileUtil getInstance(){
    return getInstance(NAME);
  }
  public static synchronized PropertiesFileUtil getInstance(  String name){
    PropertiesFileUtil conf=configMap.get(name);
    if (null == conf) {
      conf=new PropertiesFileUtil(name);
      configMap.put(name,conf);
    }
    if ((System.currentTimeMillis() - conf.getLoadTime().getTime()) > TIME_OUT) {
      conf=new PropertiesFileUtil(name);
      configMap.put(name,conf);
    }
    return conf;
  }
  public String get(  String key){
    try {
      String value=resourceBundle.getString(key);
      return value;
    }
 catch (    MissingResourceException e) {
      return "";
    }
  }
  public Integer getInt(  String key){
    try {
      String value=resourceBundle.getString(key);
      return Integer.parseInt(value);
    }
 catch (    MissingResourceException e) {
      return null;
    }
  }
  public boolean getBool(  String key){
    try {
      String value=resourceBundle.getString(key);
      if ("true".equals(value)) {
        return true;
      }
      return false;
    }
 catch (    MissingResourceException e) {
      return false;
    }
  }
  public Date getLoadTime(){
    return loadTime;
  }
}
