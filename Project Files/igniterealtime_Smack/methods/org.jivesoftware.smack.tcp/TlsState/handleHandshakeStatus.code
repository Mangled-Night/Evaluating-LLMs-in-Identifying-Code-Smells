private SSLEngineResult.HandshakeStatus handleHandshakeStatus(SSLEngineResult sslEngineResult){
  SSLEngineResult.HandshakeStatus handshakeStatus=sslEngineResult.getHandshakeStatus();
switch (handshakeStatus) {
case NEED_TASK:
    while (true) {
      final Runnable delegatedTask=engine.getDelegatedTask();
      if (delegatedTask == null) {
        break;
      }
      sslEngineDelegatedTasks++;
      int currentPendingDelegatedTasks=pendingDelegatedTasks.incrementAndGet();
      if (currentPendingDelegatedTasks > maxPendingSslEngineDelegatedTasks) {
        maxPendingSslEngineDelegatedTasks=currentPendingDelegatedTasks;
      }
      Runnable wrappedDelegatedTask=() -> {
        delegatedTask.run();
        int wrappedCurrentPendingDelegatedTasks=pendingDelegatedTasks.decrementAndGet();
        if (wrappedCurrentPendingDelegatedTasks == 0) {
          callChannelSelectedCallback(true,true);
        }
      }
;
      connectionInternal.asyncGo(wrappedDelegatedTask);
    }
  break;
case FINISHED:
onHandshakeFinished();
break;
default :
break;
}
SSLEngineResult.HandshakeStatus afterHandshakeStatus=engine.getHandshakeStatus();
return afterHandshakeStatus;
}
