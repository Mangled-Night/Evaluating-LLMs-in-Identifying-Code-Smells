@Override public int set(int x,int y,int z,int value){
  int pos=pos(x,y,z);
  int old=data[pos];
  data[pos]=(short)value;
  return old;
}
@Override public boolean set(int x,int y,int z,int value,int expected){
  int pos=pos(x,y,z);
  int old=data[pos];
  if (old == expected) {
    data[pos]=(short)value;
    return true;
  }
  return false;
}
