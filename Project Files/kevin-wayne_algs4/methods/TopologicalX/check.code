private boolean check(Digraph G){
  if (hasOrder()) {
    boolean[] found=new boolean[G.V()];
    for (int i=0; i < G.V(); i++) {
      found[rank(i)]=true;
    }
    for (int i=0; i < G.V(); i++) {
      if (!found[i]) {
        System.err.println("No vertex with rank " + i);
        return false;
      }
    }
    for (int v=0; v < G.V(); v++) {
      for (      int w : G.adj(v)) {
        if (rank(v) > rank(w)) {
          System.err.printf("%d-%d: rank(%d) = %d, rank(%d) = %d\n",v,w,v,rank(v),w,rank(w));
          return false;
        }
      }
    }
    int r=0;
    for (    int v : order()) {
      if (rank(v) != r) {
        System.err.println("order() and rank() inconsistent");
        return false;
      }
      r++;
    }
  }
  return true;
}
private boolean check(EdgeWeightedDigraph G){
  if (hasOrder()) {
    boolean[] found=new boolean[G.V()];
    for (int i=0; i < G.V(); i++) {
      found[rank(i)]=true;
    }
    for (int i=0; i < G.V(); i++) {
      if (!found[i]) {
        System.err.println("No vertex with rank " + i);
        return false;
      }
    }
    for (int v=0; v < G.V(); v++) {
      for (      DirectedEdge e : G.adj(v)) {
        int w=e.to();
        if (rank(v) > rank(w)) {
          System.err.printf("%d-%d: rank(%d) = %d, rank(%d) = %d\n",v,w,v,rank(v),w,rank(w));
          return false;
        }
      }
    }
    int r=0;
    for (    int v : order()) {
      if (rank(v) != r) {
        System.err.println("order() and rank() inconsistent");
        return false;
      }
      r++;
    }
  }
  return true;
}
