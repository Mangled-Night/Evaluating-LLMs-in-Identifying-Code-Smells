@Override public XmlStringBuilder toXML(org.jivesoftware.smack.packet.XmlEnvironment enclosingNamespace){
  if (xmlCache != null) {
    return xmlCache;
  }
  XmlStringBuilder xml=new XmlStringBuilder(this,enclosingNamespace);
  for (  Map.Entry<String,String> entry : attributes.entrySet()) {
    xml.attribute(entry.getKey(),entry.getValue());
  }
  xml.rightAngleBracket();
  if (text != null) {
    xml.text(text);
  }
  if (elements != null) {
    for (    Map.Entry<QName,StandardExtensionElement> entry : elements.entrySet()) {
      xml.append(entry.getValue().toXML(getNamespace()));
    }
  }
  xml.closeElement(this);
  xmlCache=xml;
  return xml;
}
