/** 
 * Obtain the CarbonManager responsible for a connection.
 * @param connection the connection object.
 * @return a CarbonManager instance
 */
public static synchronized CarbonManager getInstanceFor(XMPPConnection connection){
  CarbonManager carbonManager=INSTANCES.get(connection);
  if (carbonManager == null) {
    carbonManager=new CarbonManager(connection);
    INSTANCES.put(connection,carbonManager);
  }
  return carbonManager;
}
