/** 
 * MUC Light configuration IQ provider class.
 * @author Fernando Ramirez
 */
public class MUCLightConfigurationIQProvider extends IqProvider<MUCLightConfigurationIQ> {
  @Override public MUCLightConfigurationIQ parse(  XmlPullParser parser,  int initialDepth,  IqData iqData,  XmlEnvironment xmlEnvironment) throws XmlPullParserException, IOException {
    String version=null;
    String roomName=null;
    String subject=null;
    HashMap<String,String> customConfigs=null;
    outerloop:     while (true) {
      XmlPullParser.Event eventType=parser.next();
      if (eventType == XmlPullParser.Event.START_ELEMENT) {
        if (parser.getName().equals("version")) {
          version=parser.nextText();
        }
 else         if (parser.getName().equals("roomname")) {
          roomName=parser.nextText();
        }
 else         if (parser.getName().equals("subject")) {
          subject=parser.nextText();
        }
 else {
          if (customConfigs == null) {
            customConfigs=new HashMap<>();
          }
          customConfigs.put(parser.getName(),parser.nextText());
        }
      }
 else       if (eventType == XmlPullParser.Event.END_ELEMENT) {
        if (parser.getDepth() == initialDepth) {
          break outerloop;
        }
      }
    }
    MUCLightRoomConfiguration configuration=new MUCLightRoomConfiguration(roomName,subject,customConfigs);
    return new MUCLightConfigurationIQ(version,configuration);
  }
}
