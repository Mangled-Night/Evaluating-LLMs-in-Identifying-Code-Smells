public <T extends Component>Iterable<Map.Entry<EntityRef,T>> listComponents(Class<T> componentClass){
  List<TLongObjectIterator<T>> iterators=new ArrayList<>();
  if (isWorldPoolGlobalPool()) {
    iterators.add(globalPool.getComponentStore().componentIterator(componentClass));
  }
 else {
    iterators.add(globalPool.getComponentStore().componentIterator(componentClass));
    iterators.add(getCurrentWorldPool().getComponentStore().componentIterator(componentClass));
  }
  iterators.add(sectorManager.getComponentStore().componentIterator(componentClass));
  List<Map.Entry<EntityRef,T>> list=new ArrayList<>();
  for (  TLongObjectIterator<T> iterator : iterators) {
    if (iterator != null) {
      while (iterator.hasNext()) {
        iterator.advance();
        list.add(new EntityEntry<>(getEntity(iterator.key()),iterator.value()));
      }
    }
  }
  return list;
}
