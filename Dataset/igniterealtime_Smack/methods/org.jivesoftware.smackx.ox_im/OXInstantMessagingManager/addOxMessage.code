/** 
 * Add an OX-IM message element to a message.
 * @param messageBuilder a message builder.
 * @param contact recipient of the message
 * @param payload payload which will be encrypted and signed
 * @return {@link EncryptionResult} containing metadata about the messages encryption + metadata.
 * @throws SmackException.NotLoggedInException in case we are not logged in
 * @throws PGPException in case something goes wrong during encryption
 * @throws IOException IO is dangerous (we need to read keys)
 */
public EncryptionResult addOxMessage(MessageBuilder messageBuilder,OpenPgpContact contact,List<ExtensionElement> payload) throws SmackException.NotLoggedInException, PGPException, IOException {
  return addOxMessage(messageBuilder,Collections.singleton(contact),payload);
}
/** 
 * Add an OX-IM message element to a message.
 * @param messageBuilder message
 * @param recipients recipients of the message
 * @param payload payload which will be encrypted and signed
 * @return {@link EncryptionResult} containing metadata about the messages encryption + signatures.
 * @throws SmackException.NotLoggedInException in case we are not logged in
 * @throws PGPException in case something goes wrong during encryption
 * @throws IOException IO is dangerous (we need to read keys)
 */
public EncryptionResult addOxMessage(MessageBuilder messageBuilder,Set<OpenPgpContact> recipients,List<ExtensionElement> payload) throws SmackException.NotLoggedInException, IOException, PGPException {
  OpenPgpElementAndMetadata openPgpElementAndMetadata=signAndEncrypt(recipients,payload);
  messageBuilder.addExtension(openPgpElementAndMetadata.getElement());
  ExplicitMessageEncryptionElement.set(messageBuilder,ExplicitMessageEncryptionElement.ExplicitMessageEncryptionProtocol.openpgpV0);
  StoreHint.set(messageBuilder);
  setOXBodyHint(messageBuilder);
  return openPgpElementAndMetadata.getMetadata();
}
