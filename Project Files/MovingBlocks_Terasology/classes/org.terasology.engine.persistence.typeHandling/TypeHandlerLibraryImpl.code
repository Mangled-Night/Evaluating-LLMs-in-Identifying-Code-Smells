/** 
 * A library of type handlers. This is used for the construction of class metadata. This library should be initialised by adding a number of base type handlers, describing how to serialize each supported type. It will then produce serializers for classes (through their ClassMetadata) on request.
 */
public class TypeHandlerLibraryImpl extends TypeHandlerLibrary {
  public TypeHandlerLibraryImpl(  Reflections reflections){
    super(reflections);
    addTypeHandlerFactory(new ComponentClassTypeHandlerFactory());
  }
  protected TypeHandlerLibraryImpl(  SerializationSandbox sandbox){
    super(sandbox);
    addTypeHandlerFactory(new ComponentClassTypeHandlerFactory());
  }
  public TypeHandlerLibraryImpl(  ModuleManager moduleManager,  TypeRegistry typeRegistry){
    super(new ModuleEnvironmentSandbox(moduleManager,typeRegistry));
  }
  public static TypeHandlerLibrary withReflections(  Reflections reflections){
    TypeHandlerLibrary library=new TypeHandlerLibraryImpl(reflections);
    populateWithDefaultHandlers(library);
    return library;
  }
  public static TypeHandlerLibrary forModuleEnvironment(  ModuleManager moduleManager,  TypeRegistry typeRegistry){
    TypeHandlerLibrary library=new TypeHandlerLibraryImpl(moduleManager,typeRegistry);
    populateWithDefaultHandlers(library);
    return library;
  }
  private static void populateWithDefaultHandlers(  TypeHandlerLibrary serializationLibrary){
    serializationLibrary.addTypeHandlerFactory(new AssetTypeHandlerFactory());
    serializationLibrary.addTypeHandler(Name.class,new NameTypeHandler());
    serializationLibrary.addTypeHandler(SimpleUri.class,new SimpleUriTypeHandler());
    serializationLibrary.addTypeHandler(BlockUri.class,new BlockUriTypeHandler());
    serializationLibrary.addTypeHandler(TextureRegion.class,new TextureRegionTypeHandler());
    serializationLibrary.addTypeHandler(UITextureRegion.class,new UITextureRegionTypeHandler());
    serializationLibrary.addTypeHandler(ChunkMesh.class,new ChunkMeshTypeHandler());
    serializationLibrary.addTypeHandlerFactory(new TextureRegionAssetTypeHandlerFactory());
    serializationLibrary.addTypeHandler(Color.class,new ColorTypeHandler());
    serializationLibrary.addTypeHandler(Colorc.class,new ColorcTypeHandler());
    serializationLibrary.addTypeHandler(Vector4f.class,new Vector4fTypeHandler());
    serializationLibrary.addTypeHandler(Vector4fc.class,new Vector4fcTypeHandler());
    serializationLibrary.addTypeHandler(Vector3f.class,new Vector3fTypeHandler());
    serializationLibrary.addTypeHandler(Vector3fc.class,new Vector3fcTypeHandler());
    serializationLibrary.addTypeHandler(Vector2f.class,new Vector2fTypeHandler());
    serializationLibrary.addTypeHandler(Vector2fc.class,new Vector2fcTypeHandler());
    serializationLibrary.addTypeHandler(Vector3i.class,new Vector3iTypeHandler());
    serializationLibrary.addTypeHandler(Vector3ic.class,new Vector3icTypeHandler());
    serializationLibrary.addTypeHandler(Vector2i.class,new Vector2iTypeHandler());
    serializationLibrary.addTypeHandler(Vector2ic.class,new Vector2icTypeHandler());
    serializationLibrary.addTypeHandler(Vector4i.class,new Vector4iTypeHandler());
    serializationLibrary.addTypeHandler(Vector4ic.class,new Vector4icTypeHandler());
    serializationLibrary.addTypeHandler(Rectanglei.class,new RectangleiTypeHandler());
    serializationLibrary.addTypeHandler(Rectanglef.class,new RectanglefTypeHandler());
    serializationLibrary.addTypeHandler(AABBi.class,new AABBiTypeHandler());
    serializationLibrary.addTypeHandler(AABBf.class,new AABBfTypeHandler());
    serializationLibrary.addTypeHandler(BlockRegion.class,new BlockRegionTypeHandler());
    serializationLibrary.addTypeHandler(BlockArea.class,new BlockAreaTypeHandler());
    serializationLibrary.addTypeHandler(BlockAreac.class,new BlockAreacTypeHandler());
    serializationLibrary.addTypeHandler(Quaternionf.class,new QuaternionfTypeHandler());
    serializationLibrary.addTypeHandler(Quaternionfc.class,new QuaternionfcTypeHandler());
    serializationLibrary.addTypeHandler(IntegerRange.class,new IntegerRangeHandler());
  }
}
