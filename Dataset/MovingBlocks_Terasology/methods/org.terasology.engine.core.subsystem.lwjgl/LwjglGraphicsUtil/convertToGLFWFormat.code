/** 
 * Converting BufferedImage to GLFWImage.
 * @param image image to convert
 * @return convertedImage
 */
public static GLFWImage convertToGLFWFormat(BufferedImage image){
  BufferedImage convertedImage;
  if (image.getType() != BufferedImage.TYPE_INT_ARGB_PRE) {
    convertedImage=new BufferedImage(image.getWidth(),image.getHeight(),BufferedImage.TYPE_INT_ARGB_PRE);
    final Graphics2D graphics=convertedImage.createGraphics();
    final int targetWidth=image.getWidth();
    final int targetHeight=image.getHeight();
    graphics.drawImage(image,0,0,targetWidth,targetHeight,null);
    graphics.dispose();
  }
  final ByteBuffer buffer=BufferUtils.createByteBuffer(image.getWidth() * image.getHeight() * 4);
  for (int i=0; i < image.getHeight(); i++) {
    for (int j=0; j < image.getWidth(); j++) {
      int colorSpace=image.getRGB(j,i);
      buffer.put((byte)((colorSpace << 8) >> 24));
      buffer.put((byte)((colorSpace << 16) >> 24));
      buffer.put((byte)((colorSpace << 24) >> 24));
      buffer.put((byte)(colorSpace >> 24));
    }
  }
  buffer.flip();
  final GLFWImage result=GLFWImage.create();
  result.set(image.getWidth(),image.getHeight(),buffer);
  return result;
}
