private List<RedisCommand<Object,Object,Object>> prepareDefaultFlush(int consume){
  List<RedisCommand<Object,Object,Object>> batch=new ArrayList<>(Math.max(consume,10));
  while ((batch.size() < consume || consume == -1) && !queue.isEmpty()) {
    RedisCommand<Object,Object,Object> poll=queue.poll();
    assert poll != null;
    batch.add(poll);
  }
  return batch;
}
