@Test void shouldNotWriteCancelledCommand() throws Exception {
  command.cancel();
  sut.write(context,command,promise);
  verifyNoInteractions(context);
  assertThat(stack).isEmpty();
  verify(promise).trySuccess();
}
