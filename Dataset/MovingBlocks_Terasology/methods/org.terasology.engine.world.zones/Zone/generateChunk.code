/** 
 * Generate the chunk for this zone, based on the rasterizers and nested zones that have been added. This will only change blocks for which  {@link #containsBlock(int,int,int,Region)} returns true.
 * @see WorldRasterizer#generateChunk(Chunk,Region)
 */
@Override public void generateChunk(Chunk chunk,Region chunkRegion){
  Block[][][] savedBlocks=new Block[Chunks.SIZE_X][Chunks.SIZE_Y][Chunks.SIZE_Z];
  boolean changeAllBlocks=true;
  boolean saveAllBlocks=true;
  int offsetX=chunk.getChunkWorldOffsetX();
  int offsetY=chunk.getChunkWorldOffsetY();
  int offsetZ=chunk.getChunkWorldOffsetZ();
  for (int x=0; x < Chunks.SIZE_X; x++) {
    for (int y=0; y < Chunks.SIZE_Y; y++) {
      for (int z=0; z < Chunks.SIZE_Z; z++) {
        if (!containsBlock(x + offsetX,y + offsetY,z + offsetZ,chunkRegion)) {
          savedBlocks[x][y][z]=chunk.getBlock(x,y,z);
          changeAllBlocks=false;
        }
 else {
          saveAllBlocks=false;
        }
      }
    }
  }
  if (!saveAllBlocks) {
    rasterizers.forEach(r -> r.generateChunk(chunk,chunkRegion));
    if (!changeAllBlocks) {
      for (int x=0; x < Chunks.SIZE_X; x++) {
        for (int y=0; y < Chunks.SIZE_Y; y++) {
          for (int z=0; z < Chunks.SIZE_Z; z++) {
            Block block=savedBlocks[x][y][z];
            if (block != null) {
              chunk.setBlock(x,y,z,block);
            }
          }
        }
      }
    }
  }
}
