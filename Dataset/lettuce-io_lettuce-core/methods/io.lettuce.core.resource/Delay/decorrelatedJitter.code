/** 
 * Creates a  {@link Supplier} that constructs new {@link DecorrelatedJitterDelay} instances with default boundaries.
 * @return a {@link Supplier} of {@link DecorrelatedJitterDelay}.
 */
public static Supplier<Delay> decorrelatedJitter(){
  return decorrelatedJitter(DEFAULT_LOWER_BOUND,DEFAULT_UPPER_BOUND,0L,DEFAULT_TIMEUNIT);
}
/** 
 * Creates a  {@link Supplier} that constructs new {@link DecorrelatedJitterDelay} instances.
 * @param lower the lower boundary, must be non-negative
 * @param upper the upper boundary, must be greater than the lower boundary
 * @param base the base, must be greater or equal to 0
 * @param targetTimeUnit the unit of the delay.
 * @return a new {@link Supplier} of {@link DecorrelatedJitterDelay}.
 * @since 5.0
 */
public static Supplier<Delay> decorrelatedJitter(Duration lower,Duration upper,long base,TimeUnit targetTimeUnit){
  LettuceAssert.notNull(lower,"Lower boundary must not be null");
  LettuceAssert.isTrue(lower.toNanos() >= 0,"Lower boundary must be greater or equal to 0");
  LettuceAssert.notNull(upper,"Upper boundary must not be null");
  LettuceAssert.isTrue(upper.toNanos() > lower.toNanos(),"Upper boundary must be greater than the lower boundary");
  LettuceAssert.isTrue(base >= 0,"Base must be greater or equal to 1");
  LettuceAssert.notNull(targetTimeUnit,"Target TimeUnit must not be null");
  return () -> new DecorrelatedJitterDelay(lower,upper,base,targetTimeUnit);
}
/** 
 * Creates a  {@link Supplier} that constructs new {@link DecorrelatedJitterDelay} instances.
 * @param lower the lower boundary, must be non-negative
 * @param upper the upper boundary, must be greater than the lower boundary
 * @param base the base, must be greater or equal to 0
 * @param unit the unit of the delay.
 * @return a new {@link Supplier} of {@link DecorrelatedJitterDelay}.
 */
public static Supplier<Delay> decorrelatedJitter(long lower,long upper,long base,TimeUnit unit){
  LettuceAssert.isTrue(lower >= 0,"Lower boundary must be greater or equal to 0");
  LettuceAssert.isTrue(upper > lower,"Upper boundary must be greater than the lower boundary");
  LettuceAssert.isTrue(base >= 0,"Base must be greater or equal to 0");
  LettuceAssert.notNull(unit,"TimeUnit must not be null");
  return decorrelatedJitter(Duration.ofNanos(unit.toNanos(lower)),Duration.ofNanos(unit.toNanos(upper)),base,unit);
}
