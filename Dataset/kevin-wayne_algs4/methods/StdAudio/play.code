/** 
 * Writes one sample (between –1.0 and +1.0) to standard audio. If the sample is outside the range, it will be clipped (rounded to –1.0 or +1.0).
 * @param sample the sample to play
 * @throws IllegalArgumentException if the sample is {@code Double.NaN}
 */
public static void play(double sample){
  if (Double.isNaN(sample))   throw new IllegalArgumentException("sample is NaN");
  if (sample < -1.0)   sample=-1.0;
  if (sample > +1.0)   sample=+1.0;
  if (isRecording) {
    recordedSamples.enqueue(sample);
  }
  short s=(short)(MAX_16_BIT * sample);
  if (sample == 1.0)   s=Short.MAX_VALUE;
  buffer[bufferSize++]=(byte)s;
  buffer[bufferSize++]=(byte)(s >> 8);
  if (bufferSize >= buffer.length) {
    line.write(buffer,0,buffer.length);
    bufferSize=0;
  }
}
/** 
 * Writes the array of samples (between –1.0 and +1.0) to standard audio. If a sample is outside the range, it will be clipped.
 * @param samples the array of samples to play
 * @throws IllegalArgumentException if any sample is {@code Double.NaN}
 * @throws IllegalArgumentException if {@code samples} is {@code null}
 */
public static void play(double[] samples){
  if (samples == null)   throw new IllegalArgumentException("argument to play() is null");
  for (int i=0; i < samples.length; i++) {
    play(samples[i]);
  }
}
/** 
 * Plays an audio file (in WAVE, AU, AIFF, or MIDI format) and waits for it to finish.
 * @param filename the name of the audio file
 * @throws IllegalArgumentException if unable to play {@code filename}
 * @throws IllegalArgumentException if {@code filename} is {@code null}
 */
public static void play(String filename){
  AudioInputStream ais=getAudioInputStreamFromFile(filename);
  SourceDataLine line=null;
  int BUFFER_SIZE=4096;
  try {
    AudioFormat audioFormat=ais.getFormat();
    DataLine.Info info=new DataLine.Info(SourceDataLine.class,audioFormat);
    line=(SourceDataLine)AudioSystem.getLine(info);
    line.open(audioFormat);
    line.start();
    byte[] samples=new byte[BUFFER_SIZE];
    int count;
    while ((count=ais.read(samples,0,BUFFER_SIZE)) != -1) {
      line.write(samples,0,count);
    }
  }
 catch (  IOException|LineUnavailableException e) {
    e.printStackTrace();
  }
 finally {
    if (line != null) {
      line.drain();
      line.close();
    }
  }
}
