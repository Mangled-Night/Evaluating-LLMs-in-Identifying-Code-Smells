/** 
 * Make the given field accessible, explicitly setting it accessible if necessary. The  {@code setAccessible(true)} method isonly called when actually necessary, to avoid unnecessary conflicts with a JVM SecurityManager (if active).
 * @param field the field to make accessible
 * @see java.lang.reflect.Field#setAccessible
 */
private static void makeAccessible(Field field){
  if ((!Modifier.isPublic(field.getModifiers()) || !Modifier.isPublic(field.getDeclaringClass().getModifiers()) || Modifier.isFinal(field.getModifiers())) && !field.isAccessible()) {
    field.setAccessible(true);
  }
}
