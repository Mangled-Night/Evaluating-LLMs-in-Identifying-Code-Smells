@Override public MamResultExtension parse(XmlPullParser parser,int initialDepth,XmlEnvironment xmlEnvironment) throws XmlPullParserException, IOException, SmackParsingException, ParseException {
  MamElementFactory elementFactory=MamElementFactory.forParser(parser);
  Forwarded<Message> forwarded=null;
  String queryId=parser.getAttributeValue("","queryid");
  String id=parser.getAttributeValue("","id");
  outerloop:   while (true) {
    final XmlPullParser.Event eventType=parser.next();
switch (eventType) {
case START_ELEMENT:
      final String name=parser.getName();
switch (name) {
case Forwarded.ELEMENT:
      forwarded=ForwardedProvider.parseForwardedMessage(parser,xmlEnvironment);
    break;
}
break;
case END_ELEMENT:
if (parser.getDepth() == initialDepth) {
break outerloop;
}
break;
default :
break;
}
}
return elementFactory.newResultExtension(queryId,id,forwarded);
}
