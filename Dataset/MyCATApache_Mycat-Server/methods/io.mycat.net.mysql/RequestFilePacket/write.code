@Override public ByteBuffer write(ByteBuffer buffer,FrontendConnection c,boolean writeSocketIfFull){
  int size=calcPacketSize();
  buffer=c.checkWriteBuffer(buffer,c.getPacketHeaderSize() + size,writeSocketIfFull);
  BufferUtil.writeUB3(buffer,size);
  buffer.put(packetId);
  buffer.put(command);
  if (fileName != null) {
    buffer.put(fileName);
  }
  c.write(buffer);
  return buffer;
}
