@Test void unsubscribe() throws Exception {
  TestFutures.awaitOrTimeout(pubsub.unsubscribe(channel));
  assertThat(channels.take()).isEqualTo(channel);
  assertThat((long)counts.take()).isEqualTo(0);
  RedisFuture<Void> future=pubsub.unsubscribe();
  assertThat(TestFutures.getOrTimeout(future)).isNull();
  assertThat(future.getError()).isNull();
  assertThat(channels).isEmpty();
  assertThat(patterns).isEmpty();
}
