@Test void reconnectNotifiesListener(){
class MyListener implements RedisConnectionStateListener {
    final AtomicInteger connect=new AtomicInteger();
    final AtomicInteger disconnect=new AtomicInteger();
    @Override public void onRedisConnected(    RedisChannelHandler<?,?> connection,    SocketAddress socketAddress){
      connect.incrementAndGet();
    }
    @Override public void onRedisDisconnected(    RedisChannelHandler<?,?> connection){
      disconnect.incrementAndGet();
    }
  }
  MyListener listener=new MyListener();
  redis.getStatefulConnection().addListener(listener);
  redis.quit();
  Wait.untilTrue(redis::isOpen).waitOrTimeout();
  assertThat(listener.connect).hasValueGreaterThan(0);
  assertThat(listener.disconnect).hasValueGreaterThan(0);
}
