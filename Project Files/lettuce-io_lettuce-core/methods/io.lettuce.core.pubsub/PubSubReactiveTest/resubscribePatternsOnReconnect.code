@Test void resubscribePatternsOnReconnect() throws Exception {
  StepVerifier.create(pubsub.psubscribe(pattern)).verifyComplete();
  assertThat(patterns.take()).isEqualTo(pattern);
  assertThat((long)counts.take()).isEqualTo(1);
  block(pubsub.quit());
  assertThat(patterns.take()).isEqualTo(pattern);
  assertThat((long)counts.take()).isEqualTo(1);
  Wait.untilTrue(pubsub::isOpen).waitOrTimeout();
  StepVerifier.create(pubsub2.publish(channel,message)).expectNextCount(1).verifyComplete();
  assertThat(channels.take()).isEqualTo(channel);
  assertThat(messages.take()).isEqualTo(message);
}
