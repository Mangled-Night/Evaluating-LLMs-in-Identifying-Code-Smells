private void updateParentsFree(int id){
  int logChild=depthMap[id] + 1;
  while (id > 1) {
    int parentId=id >>> 1;
    byte val1=memoryMap[id];
    byte val2=memoryMap[id ^ 1];
    logChild-=1;
    if (val1 == logChild && val2 == logChild) {
      memoryMap[parentId]=(byte)(logChild - 1);
    }
 else {
      byte val=val1 < val2 ? val1 : val2;
      memoryMap[parentId]=val;
    }
    id=parentId;
  }
}
