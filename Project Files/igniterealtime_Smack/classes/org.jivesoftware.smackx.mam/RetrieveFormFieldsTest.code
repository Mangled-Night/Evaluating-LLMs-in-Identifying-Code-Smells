public class RetrieveFormFieldsTest extends MamTest {
  private static final String retrieveFormFieldStanza="<iq id='sarasa' type='get'>" + "<query xmlns='" + MamVersion.MAM2.getNamespace() + "' queryid='testid'></query>"+ "</iq>";
  private static final String additionalFieldsStanza="<x xmlns='jabber:x:data' type='submit'>" + "<field var='FORM_TYPE'>" + "<value>" + MamVersion.MAM2.getNamespace() + "</value>"+ "</field>"+ "<field var='urn:example:xmpp:free-text-search'>"+ "<value>Hi</value>"+ "</field>"+ "<field var='urn:example:xmpp:stanza-content'>"+ "<value>one@exampleone.org</value>"+ "</field>"+ "</x>";
  @Test public void checkRetrieveFormFieldsStanza() throws Exception {
    MamQueryIQ mamQueryIQ=new MamQueryIQ(MamVersion.MAM2,queryId);
    mamQueryIQ.setStanzaId("sarasa");
    assertEquals(retrieveFormFieldStanza,mamQueryIQ.toXML(StreamOpen.CLIENT_NAMESPACE).toString());
  }
  @Test public void checkAddAdditionalFieldsStanza() throws Exception {
    FormField field1=FormField.builder("urn:example:xmpp:free-text-search").setValue("Hi").build();
    FormField field2=FormField.jidSingleBuilder("urn:example:xmpp:stanza-content").setValue(JidTestUtil.BARE_JID_1).build();
    MamQueryArgs mamQueryArgs=MamQueryArgs.builder().withAdditionalFormField(field1).withAdditionalFormField(field2).build();
    DataForm dataForm=mamQueryArgs.getDataForm(MamVersion.MAM2);
    String dataFormResult=dataForm.toXML().toString();
    assertXmlSimilar(additionalFieldsStanza,dataFormResult);
  }
}
