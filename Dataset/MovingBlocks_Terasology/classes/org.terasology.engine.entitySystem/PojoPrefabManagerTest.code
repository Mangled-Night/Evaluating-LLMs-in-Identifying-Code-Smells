public class PojoPrefabManagerTest {
  public static final String PREFAB_NAME="unittest:myprefab";
  private PojoPrefabManager prefabManager;
  @BeforeEach public void setup() throws Exception {
    ContextImpl context=new ContextImpl();
    CoreRegistry.setContext(context);
    ModuleManager moduleManager=ModuleManagerFactory.create();
    ModuleAwareAssetTypeManager assetTypeManager=new ModuleAwareAssetTypeManagerImpl();
    assetTypeManager.createAssetType(Prefab.class,PojoPrefab::new,"prefabs");
    assetTypeManager.switchEnvironment(moduleManager.getEnvironment());
    context.put(AssetManager.class,assetTypeManager.getAssetManager());
    prefabManager=new PojoPrefabManager(context);
  }
  @Test public void testRetrieveNonExistentPrefab(){
    assertNull(prefabManager.getPrefab(PREFAB_NAME));
  }
  @Test public void testRetrievePrefab(){
    PrefabData data=new PrefabData();
    data.addComponent(new StringComponent("Test"));
    Assets.generateAsset(new ResourceUrn(PREFAB_NAME),data,Prefab.class);
    Prefab ref=prefabManager.getPrefab(PREFAB_NAME);
    assertNotNull(ref);
    assertEquals(PREFAB_NAME,ref.getName());
  }
}
