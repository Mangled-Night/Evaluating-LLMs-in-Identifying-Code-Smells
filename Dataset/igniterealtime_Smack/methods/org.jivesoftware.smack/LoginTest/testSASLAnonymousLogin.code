/** 
 * Check that the server handles anonymous users correctly.
 */
public void testSASLAnonymousLogin(){
  if (!isTestAnonymousLogin())   return;
  try {
    XMPPTCPConnection conn1=createConnection();
    XMPPTCPConnection conn2=createConnection();
    conn1.connect();
    conn2.connect();
    try {
      conn1.loginAnonymously();
      conn2.loginAnonymously();
      assertNotNull("Resource is null",StringUtils.parseResource(conn1.getUser()));
      assertNotNull("Resource is null",StringUtils.parseResource(conn2.getUser()));
      assertNotNull("Username is null",StringUtils.parseName(conn1.getUser()));
      assertNotNull("Username is null",StringUtils.parseName(conn2.getUser()));
    }
 catch (    XMPPException e) {
      fail(e.getMessage());
    }
 finally {
      conn1.disconnect();
      conn2.disconnect();
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
