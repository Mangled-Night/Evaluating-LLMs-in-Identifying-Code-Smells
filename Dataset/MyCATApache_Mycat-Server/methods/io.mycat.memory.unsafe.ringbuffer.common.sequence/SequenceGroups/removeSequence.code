/** 
 * 原子移除某个指定的sequence
 * @param holder 原子更新的域所属的类对象
 * @param sequenceUpdater 原子更新的域对象
 * @param sequence 要移除的sequence
 * @param < T >
 * @return
 */
public static <T>boolean removeSequence(final T holder,final AtomicReferenceFieldUpdater<T,Sequence[]> sequenceUpdater,final Sequence sequence){
  int numToRemove;
  Sequence[] oldSequences;
  Sequence[] newSequences;
  do {
    oldSequences=sequenceUpdater.get(holder);
    numToRemove=countMatching(oldSequences,sequence);
    if (0 == numToRemove) {
      break;
    }
    final int oldSize=oldSequences.length;
    newSequences=new Sequence[oldSize - numToRemove];
    for (int i=0, pos=0; i < oldSize; i++) {
      final Sequence testSequence=oldSequences[i];
      if (sequence != testSequence) {
        newSequences[pos++]=testSequence;
      }
    }
  }
 while (!sequenceUpdater.compareAndSet(holder,oldSequences,newSequences));
  return numToRemove != 0;
}
