/** 
 * Returns the <code>index</code>-th value in <code>object</code>, throwing <code>IndexOutOfBoundsException</code> if there is no such element or <code>IllegalArgumentException</code> if <code>object</code> is not an instance of one of the supported types. <p> The supported types, and associated semantics are: <ul> <li> Map -- the value returned is the <code>Map.Entry</code> in position <code>index</code> in the map's <code>entrySet</code> iterator, if there is such an entry.</li> <li> List -- this method is equivalent to the list's get method.</li> <li> Array -- the <code>index</code>-th array entry is returned, if there is such an entry; otherwise an <code>IndexOutOfBoundsException</code> is thrown.</li> <li> Collection -- the value returned is the <code>index</code>-th object returned by the collection's default iterator, if there is such an element.</li> <li> Iterator or Enumeration -- the value returned is the <code>index</code>-th object in the Iterator/Enumeration, if there is such an element.  The Iterator/Enumeration is advanced to <code>index</code> (or to the end, if <code>index</code> exceeds the number of entries) as a side effect of this method.</li> </ul>
 * @param object the object to get a value from
 * @param index  the index to get
 * @return the object at the specified index
 * @throws IndexOutOfBoundsException if the index is invalid
 * @throws IllegalArgumentException  if the object type is invalid
 */
public static Object get(Object object,int index){
  if (object == null)   return null;
  if (index < 0) {
    throw new IndexOutOfBoundsException("Index cannot be negative: " + index);
  }
  if (object instanceof Map) {
    Map map=(Map)object;
    Iterator iterator=map.entrySet().iterator();
    return get(iterator,index);
  }
 else   if (object instanceof List) {
    return ((List)object).get(index);
  }
 else   if (object instanceof Object[]) {
    return ((Object[])object)[index];
  }
 else   if (object instanceof Iterator) {
    Iterator it=(Iterator)object;
    while (it.hasNext()) {
      index--;
      if (index == -1) {
        return it.next();
      }
 else {
        it.next();
      }
    }
    throw new IndexOutOfBoundsException("Entry does not exist: " + index);
  }
 else   if (object instanceof Collection) {
    Iterator iterator=((Collection)object).iterator();
    return get(iterator,index);
  }
 else   if (object instanceof Enumeration) {
    Enumeration it=(Enumeration)object;
    while (it.hasMoreElements()) {
      index--;
      if (index == -1) {
        return it.nextElement();
      }
 else {
        it.nextElement();
      }
    }
    throw new IndexOutOfBoundsException("Entry does not exist: " + index);
  }
 else {
    try {
      return Array.get(object,index);
    }
 catch (    IllegalArgumentException ex) {
      throw new IllegalArgumentException("Unsupported object type: " + object.getClass().getName());
    }
  }
}
