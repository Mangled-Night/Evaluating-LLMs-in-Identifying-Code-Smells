/** 
 * @author mycat
 */
public class BindValueUtil {
  public static final void read(  MySQLMessage mm,  BindValue bv,  String charsetName) throws UnsupportedEncodingException {
switch (bv.type & 0xff) {
case Fields.FIELD_TYPE_BIT:
      bv.value=mm.readBytesWithLength();
    break;
case Fields.FIELD_TYPE_TINY:
  bv.byteBinding=mm.read();
break;
case Fields.FIELD_TYPE_SHORT:
bv.shortBinding=(short)mm.readUB2();
break;
case Fields.FIELD_TYPE_LONG:
bv.intBinding=mm.readInt();
break;
case Fields.FIELD_TYPE_LONGLONG:
bv.longBinding=mm.readLong();
break;
case Fields.FIELD_TYPE_FLOAT:
bv.floatBinding=mm.readFloat();
break;
case Fields.FIELD_TYPE_DOUBLE:
bv.doubleBinding=mm.readDouble();
break;
case Fields.FIELD_TYPE_TIME:
bv.value=mm.readTime();
break;
case Fields.FIELD_TYPE_DATE:
case Fields.FIELD_TYPE_DATETIME:
case Fields.FIELD_TYPE_TIMESTAMP:
bv.value=mm.readDate();
break;
case Fields.FIELD_TYPE_VAR_STRING:
case Fields.FIELD_TYPE_STRING:
case Fields.FIELD_TYPE_VARCHAR:
case Fields.FIELD_TYPE_DECIMAL:
case Fields.FIELD_TYPE_NEW_DECIMAL:
case Fields.FIELD_TYPE_BLOB:
byte[] vv=mm.readBytesWithLength();
if (vv == null) {
bv.isNull=true;
}
 else {
if (charsetName == null) {
charsetName=StandardCharsets.UTF_8.name();
}
Charset charset=Charset.forName(charsetName);
try {
bv.value=charset.newDecoder().onMalformedInput(CodingErrorAction.REPORT).decode(ByteBuffer.wrap(vv));
}
 catch (CharacterCodingException e) {
bv.value=vv;
}
}
break;
default :
throw new IllegalArgumentException("bindValue error,unsupported type:" + bv.type);
}
bv.isSet=true;
}
}
