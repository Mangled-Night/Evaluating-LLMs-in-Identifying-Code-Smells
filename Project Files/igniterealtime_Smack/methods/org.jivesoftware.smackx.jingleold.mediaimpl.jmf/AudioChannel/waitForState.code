@SuppressWarnings("LockOnBoxedPrimitive") private synchronized boolean waitForState(Processor p,int state){
  p.addControllerListener(new StateListener());
  failed=false;
  if (state == Processor.Configured) {
    p.configure();
  }
 else   if (state == Processor.Realized) {
    p.realize();
  }
  while (p.getState() < state && !failed) {
synchronized (getStateLock()) {
      try {
        getStateLock().wait();
      }
 catch (      InterruptedException ie) {
        return false;
      }
    }
  }
  return !failed;
}
