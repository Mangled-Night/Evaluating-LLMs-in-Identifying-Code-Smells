public static String unencodeHTMLLike(String text){
  StringBuilder result=new StringBuilder();
  char[] chars=text.toCharArray();
  int i=0;
  while (i < chars.length) {
    char c=chars[i];
    if (c == '&') {
      if (i + 4 < chars.length && chars[i + 1] == 'a' && chars[i + 2] == 'm' && chars[i + 3] == 'p' && chars[i + 4] == ';') {
        result.append('&');
        i+=4;
      }
 else       if (i + 3 < chars.length && chars[i + 1] == 'l' && chars[i + 2] == 't' && chars[i + 3] == ';') {
        result.append('<');
        i+=3;
      }
 else       if (i + 3 < chars.length && chars[i + 1] == 'g' && chars[i + 2] == 't' && chars[i + 3] == ';') {
        result.append('>');
        i+=3;
      }
 else {
        throw new IllegalArgumentException("Invalid entity definition.");
      }
    }
 else {
      result.append(c);
    }
    i++;
  }
  return result.toString();
}
