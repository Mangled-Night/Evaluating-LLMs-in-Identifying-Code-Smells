public class DoX {
  public static void main(  String[] args) throws XMPPException, SmackException, IOException, InterruptedException {
    SmackConfiguration.DEBUG=true;
    XMPPTCPConnection connection=new XMPPTCPConnection(args[0],args[1]);
    connection.setReplyTimeout(60000);
    connection.connect().login();
    DnsOverXmppManager dox=DnsOverXmppManager.getInstanceFor(connection);
    Jid target=JidCreate.from("dns@moparisthebest.com/listener");
    Question question=new Question("geekplace.eu",Record.TYPE.A);
    DnsMessage response=dox.query(target,question);
    System.out.println(response);
    connection.disconnect();
  }
  public static XMPPTCPConnection runDoxResolver(  String jid,  String password) throws XMPPException, SmackException, IOException, InterruptedException {
    XMPPTCPConnectionConfiguration config=XMPPTCPConnectionConfiguration.builder().setXmppAddressAndPassword(jid,password).setResource("dns").setDebuggerFactory(ConsoleDebugger.Factory.INSTANCE).build();
    XMPPTCPConnection connection=new XMPPTCPConnection(config);
    connection.connect().login();
    DnsOverXmppManager dox=DnsOverXmppManager.getInstanceFor(connection);
    dox.setDnsOverXmppResolver(DnsOverXmppMiniDnsResolver.INSTANCE);
    dox.enable();
    return connection;
  }
}
