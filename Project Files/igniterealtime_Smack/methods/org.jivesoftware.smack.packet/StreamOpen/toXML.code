@Override public XmlStringBuilder toXML(XmlEnvironment enclosingXmlEnvironment){
  XmlStringBuilder xml=new XmlStringBuilder();
  xml.halfOpenElement(getElementName());
  String namespace=CLIENT_NAMESPACE;
  if (enclosingXmlEnvironment != null) {
    namespace=enclosingXmlEnvironment.getEffectiveNamespaceOrUse(CLIENT_NAMESPACE);
  }
  xml.attribute("xmlns",namespace);
  xml.attribute("to",to);
  xml.attribute("xmlns:stream","http://etherx.jabber.org/streams");
  xml.attribute("version",VERSION);
  xml.optAttribute("from",from);
  xml.optAttribute("id",id);
  xml.xmllangAttribute(lang);
  xml.rightAngleBracket();
  return xml;
}
