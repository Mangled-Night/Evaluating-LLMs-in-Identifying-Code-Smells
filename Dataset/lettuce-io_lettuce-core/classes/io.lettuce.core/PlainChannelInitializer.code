static class PlainChannelInitializer extends ChannelInitializer<Channel> {
  private final Supplier<List<ChannelHandler>> handlers;
  private final ClientResources clientResources;
  PlainChannelInitializer(  Supplier<List<ChannelHandler>> handlers,  ClientResources clientResources){
    this.handlers=handlers;
    this.clientResources=clientResources;
  }
  @Override protected void initChannel(  Channel channel){
    doInitialize(channel);
  }
  private void doInitialize(  Channel channel){
    for (    ChannelHandler handler : handlers.get()) {
      channel.pipeline().addLast(handler);
    }
    clientResources.nettyCustomizer().afterChannelInitialized(channel);
  }
}
