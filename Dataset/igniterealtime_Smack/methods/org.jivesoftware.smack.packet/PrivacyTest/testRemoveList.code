/** 
 * Check when a client add a new list and then remove it.
 */
public void testRemoveList(){
  try {
    String listName="testRemoveList";
    PrivacyListManager privacyManager=PrivacyListManager.getInstanceFor(getConnection(0));
    PrivacyClient client=new PrivacyClient(privacyManager);
    privacyManager.addListener(client);
    ArrayList<PrivacyItem> items=new ArrayList<PrivacyItem>();
    PrivacyItem item=new PrivacyItem(PrivacyItem.Type.jid.name(),true,1);
    item.setValue(getConnection(0).getUser());
    items.add(item);
    privacyManager.createPrivacyList(listName,items);
    Thread.sleep(500);
    privacyManager.setDefaultListName(listName);
    Thread.sleep(500);
    privacyManager.deletePrivacyList(listName);
    Thread.sleep(500);
    try {
      privacyManager.getPrivacyList(listName);
    }
 catch (    XMPPException xmppException) {
      assertEquals(404,xmppException.getStanzaError().getCode());
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
