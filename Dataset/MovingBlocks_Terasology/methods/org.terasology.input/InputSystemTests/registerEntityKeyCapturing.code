private void registerEntityKeyCapturing(){
  when(clientEntity.send(Mockito.any())).then(invocation -> {
    Event event=invocation.getArgument(0);
    if (event instanceof KeyEvent) {
      clientEntityKeyEvents.add(new CapturedKeyEvent((KeyEvent)event));
    }
    return event;
  }
);
  when(characterEntity.send(Mockito.any())).then(invocation -> {
    Event event=invocation.getArgument(0);
    if (event instanceof KeyEvent) {
      characterEntityKeyEvents.add(new CapturedKeyEvent((KeyEvent)event));
    }
    return event;
  }
);
}
