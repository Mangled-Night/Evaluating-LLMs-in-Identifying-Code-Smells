@Override public void run(){
  while (true) {
    ServerSocket serverSocket=Socks5Proxy.this.serverSocket;
    if (serverSocket == null || serverSocket.isClosed() || Thread.currentThread().isInterrupted()) {
      return;
    }
    Socket socket=null;
    try {
      socket=serverSocket.accept();
      establishConnection(socket);
    }
 catch (    SmackException|IOException e) {
      LOGGER.log(Level.FINE,"Exception while " + Socks5Proxy.this + " was handling connection",e);
      CloseableUtil.maybeClose(socket,LOGGER);
    }
  }
}
