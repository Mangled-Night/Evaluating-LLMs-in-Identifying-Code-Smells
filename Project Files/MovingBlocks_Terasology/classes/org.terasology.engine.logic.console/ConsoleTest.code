@Tag("TteTest") public class ConsoleTest extends TerasologyTestingEnvironment {
  private static final String MESSAGE_TEXT="Test message";
  @Test public void testClearCommand(){
    for (int i=0; i < 10; i++) {
      getConsole().addMessage("Just a message");
    }
    getConsole().clear();
    Iterator<Message> it=getConsole().getMessages().iterator();
    assertFalse(it.hasNext());
  }
  @Test public void testAddMessage(){
    getConsole().addMessage(MESSAGE_TEXT);
    checkMessage(getConsole().getMessages().iterator(),true);
  }
  @Test public void testAddConsoleMessage(){
    getConsole().addMessage(new Message(MESSAGE_TEXT));
    checkMessage(getConsole().getMessages().iterator(),true);
  }
  @Test public void testAddInlineMessage(){
    getConsole().addMessage(MESSAGE_TEXT,false);
    checkMessage(getConsole().getMessages().iterator(),false);
  }
  @Test public void testAddInlineMessage2(){
    getConsole().addMessage(new Message(MESSAGE_TEXT,false));
    checkMessage(getConsole().getMessages().iterator(),false);
  }
  private void checkMessage(  Iterator<Message> it,  boolean hasNewLine){
    assertNotNull(it);
    assertTrue(it.hasNext());
    final Message message=it.next();
    assertEquals(MESSAGE_TEXT,message.getMessage());
    assertEquals(hasNewLine,message.hasNewLine());
    assertFalse(it.hasNext());
  }
  private Console getConsole(){
    return context.get(Console.class);
  }
}
