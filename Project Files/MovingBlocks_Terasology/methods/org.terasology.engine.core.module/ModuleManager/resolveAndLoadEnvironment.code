public void resolveAndLoadEnvironment(Name... modules){
  resolveAndLoadEnvironment(Arrays.asList(modules));
}
public void resolveAndLoadEnvironment(Iterable<Name> modules){
  DependencyResolver resolver=new DependencyResolver(registry);
  ResolutionResult result=resolver.resolve(modules);
  if (!result.isSuccess()) {
    throw new RuntimeException("Failed to resolve dependencies for " + modules);
  }
  loadEnvironment(result.getModules(),true);
}
