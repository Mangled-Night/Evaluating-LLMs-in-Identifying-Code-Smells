@Test void resubscribeChannelsOnReconnect() throws Exception {
  StepVerifier.create(pubsub.subscribe(channel)).verifyComplete();
  assertThat(channels.take()).isEqualTo(channel);
  assertThat((long)counts.take()).isEqualTo(1);
  block(pubsub.quit());
  assertThat(channels.take()).isEqualTo(channel);
  assertThat((long)counts.take()).isEqualTo(1);
  Wait.untilTrue(pubsub::isOpen).waitOrTimeout();
  redis.publish(channel,message);
  assertThat(channels.take()).isEqualTo(channel);
  assertThat(messages.take()).isEqualTo(message);
}
