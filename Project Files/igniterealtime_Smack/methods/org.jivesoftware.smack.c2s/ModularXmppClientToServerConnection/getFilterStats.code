private Map<String,Object> getFilterStats(){
  Collection<XmppInputOutputFilter> filters;
synchronized (this) {
    if (inputOutputFilters.isEmpty() && previousInputOutputFilters != null) {
      filters=previousInputOutputFilters;
    }
 else {
      filters=inputOutputFilters;
    }
  }
  Map<String,Object> filterStats=new HashMap<>(filters.size());
  for (  XmppInputOutputFilter xmppInputOutputFilter : filters) {
    Object stats=xmppInputOutputFilter.getStats();
    String filterName=xmppInputOutputFilter.getFilterName();
    filterStats.put(filterName,stats);
  }
  return filterStats;
}
