private void processPendingState(){
  if (pendingState != null) {
    switchState(pendingState);
    pendingState=null;
  }
}
