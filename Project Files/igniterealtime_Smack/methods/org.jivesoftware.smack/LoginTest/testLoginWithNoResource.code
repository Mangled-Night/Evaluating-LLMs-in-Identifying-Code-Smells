/** 
 * Check that the server does not allow to log in without specifying a resource.
 */
public void testLoginWithNoResource(){
  try {
    XMPPTCPConnection conn=createConnection();
    conn.connect();
    try {
      conn.getAccountManager().createAccount("user_1","user_1",getAccountCreationParameters());
    }
 catch (    XMPPException e) {
      if (e.getStanzaError().getCode() != 409) {
        throw e;
      }
      conn=createConnection();
      conn.connect();
    }
    conn.login("user_1","user_1",(String)null);
    if (conn.getSASLAuthentication().isAuthenticated()) {
      assertNotNull("JID assigned by server is missing",conn.getUser());
      assertNotNull("JID assigned by server does not have a resource",StringUtils.parseResource(conn.getUser()));
      conn.disconnect();
    }
 else {
      fail("User with no resource was not able to log into the server");
    }
  }
 catch (  XMPPException e) {
    if (e.getStanzaError() != null) {
      assertEquals("Wrong error code returned",406,e.getStanzaError().getCode());
    }
 else {
      fail(e.getMessage());
    }
  }
}
