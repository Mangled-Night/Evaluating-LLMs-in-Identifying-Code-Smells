public class ResultsLimitTest extends MamTest {
  private static final String resultsLimitStanza="<iq id='sarasa' type='set'>" + "<query xmlns='urn:xmpp:mam:2' queryid='testid'>" + "<x xmlns='jabber:x:data' type='submit'>"+ "<field var='FORM_TYPE'>"+ "<value>" + MamVersion.MAM2.getNamespace() + "</value>"+ "</field>"+ "</x>"+ "<set xmlns='http://jabber.org/protocol/rsm'>"+ "<max>10</max>"+ "</set>"+ "</query>"+ "</iq>";
  @Test public void checkResultsLimit() throws Exception {
    DataForm dataForm=getNewMamForm();
    MamQueryIQ mamQueryIQ=new MamQueryIQ(MamVersion.MAM2,queryId,dataForm);
    mamQueryIQ.setType(IQ.Type.set);
    mamQueryIQ.setStanzaId("sarasa");
    MamQueryArgs mamQueryArgs=MamQueryArgs.builder().setResultPageSize(10).build();
    mamQueryArgs.maybeAddRsmSet(mamQueryIQ);
    assertEquals(resultsLimitStanza,mamQueryIQ.toXML(StreamOpen.CLIENT_NAMESPACE).toString());
  }
}
