/** 
 * Test that  {@link Socks5BytestreamManager#getBytestreamManager(XMPPConnection)} returns onebytestream manager for every connection.
 */
@Test public void shouldHaveOneManagerForEveryConnection(){
  XMPPConnection connection1=mock(XMPPConnection.class);
  XMPPConnection connection2=mock(XMPPConnection.class);
  ServiceDiscoveryManager.getInstanceFor(connection1);
  ServiceDiscoveryManager.getInstanceFor(connection2);
  Socks5BytestreamManager conn1ByteStreamManager1=Socks5BytestreamManager.getBytestreamManager(connection1);
  Socks5BytestreamManager conn1ByteStreamManager2=Socks5BytestreamManager.getBytestreamManager(connection1);
  Socks5BytestreamManager conn2ByteStreamManager1=Socks5BytestreamManager.getBytestreamManager(connection2);
  assertEquals(conn1ByteStreamManager1,conn1ByteStreamManager2);
  assertNotSame(conn1ByteStreamManager1,conn2ByteStreamManager1);
}
