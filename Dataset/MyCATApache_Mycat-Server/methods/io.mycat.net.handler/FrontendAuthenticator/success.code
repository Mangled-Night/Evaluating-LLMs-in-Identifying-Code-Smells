protected void success(AuthPacket auth){
  source.setAuthenticated(true);
  source.setUser(auth.user);
  source.setSchema(auth.database);
  source.setCharsetIndex(auth.charsetIndex);
  if (auth.allowMultiStatements) {
    String warnMsg="Mycat does not support the allowMultiQueries value to be true, maybe occur some error.Client connection is[{}]";
    if (LOGGER.isInfoEnabled()) {
      LOGGER.info(warnMsg,this);
    }
  }
  source.setHandler(new FrontendCommandHandler(source));
  if (LOGGER.isInfoEnabled()) {
    StringBuilder s=new StringBuilder();
    s.append(source).append('\'').append(auth.user).append("' login success");
    byte[] extra=auth.extra;
    if (extra != null && extra.length > 0) {
      s.append(",extra:").append(new String(extra));
    }
    LOGGER.info(s.toString());
  }
  ByteBuffer buffer=source.allocate();
  source.write(source.writeToBuffer(AUTH_OK,buffer));
  boolean clientCompress=Capabilities.CLIENT_COMPRESS == (Capabilities.CLIENT_COMPRESS & auth.clientFlags);
  boolean usingCompress=MycatServer.getInstance().getConfig().getSystem().getUseCompression() == 1;
  if (clientCompress && usingCompress) {
    source.setSupportCompress(true);
  }
}
