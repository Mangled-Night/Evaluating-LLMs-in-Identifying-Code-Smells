public class XHTMLExtensionProviderTest {
  public static final String XHTML_EXTENSION_SAMPLE_RESOURCE_NAME="xhtml.xml";
  @Test public void parsesWell() throws IOException, XmlPullParserException {
    InputStream inputStream=getClass().getResourceAsStream(XHTML_EXTENSION_SAMPLE_RESOURCE_NAME);
    XmlPullParser parser=PacketParserUtils.getParserFor(inputStream);
    XHTMLExtensionProvider provider=new XHTMLExtensionProvider();
    ExtensionElement extension=provider.parse(parser,parser.getDepth(),null);
    assertThat(extension,instanceOf(XHTMLExtension.class));
    XHTMLExtension attachmentsInfo=(XHTMLExtension)extension;
    assertThat(sampleXhtml(),equalsCharSequence(attachmentsInfo.getBodies().get(0)));
  }
  private static String sampleXhtml(){
    return "<body xmlns='http://www.w3.org/1999/xhtml'>" + "<span style='color: rgb(0, 0, 0); font-family: sans-serif, &apos;trebuchet ms&apos;" + ", &apos;lucida grande&apos;, &apos;lucida sans unicode&apos;, arial, helvetica, "+ "sans-serif; font-weight: 600; line-height: 18px;'>Generic family<br/>AnotherLine</span></body>";
  }
}
