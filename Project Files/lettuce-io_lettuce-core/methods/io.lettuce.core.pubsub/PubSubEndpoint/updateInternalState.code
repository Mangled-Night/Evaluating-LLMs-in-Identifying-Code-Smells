private void updateInternalState(PubSubMessage<K,V> message){
switch (message.type()) {
case psubscribe:
    patterns.add(new Wrapper<>(message.pattern()));
  break;
case punsubscribe:
patterns.remove(new Wrapper<>(message.pattern()));
break;
case subscribe:
channels.add(new Wrapper<>(message.channel()));
break;
case unsubscribe:
channels.remove(new Wrapper<>(message.channel()));
break;
default :
break;
}
}
