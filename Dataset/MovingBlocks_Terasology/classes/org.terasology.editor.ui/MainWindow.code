/** 
 * TeraEd main class.
 */
@SuppressWarnings("serial") public final class MainWindow extends JFrame implements ActionListener, WindowListener, StateChangeSubscriber {
  private static final Logger logger=LoggerFactory.getLogger(MainWindow.class);
  private TeraEd teraEd;
  private TerasologyEngine engine;
  private BorderLayout borderLayout;
  private Viewport viewport;
  private PropertyPanel propertyPanel;
  private JSplitPane verticalSplitPane;
  private JMenuBar mainMenuBar;
  private JMenu fileMenu;
  private JMenuItem fileMenuExitItem;
  private JMenu shaderPropertiesMenu;
  private java.util.List<JMenuItem> shaderPropertyMenuEntries=new ArrayList<>(64);
  private JMenu propertiesMenu;
  private JMenuItem propertiesMenuScene;
  private JScrollPane propertyPanelScrollPane;
  public MainWindow(  TeraEd teraEd,  TerasologyEngine engine){
    this.teraEd=teraEd;
    this.addWindowListener(this);
    this.engine=engine;
    viewport=new Viewport();
    borderLayout=new BorderLayout();
    getContentPane().setLayout(borderLayout);
    propertyPanel=new PropertyPanel();
    propertyPanelScrollPane=new JScrollPane(propertyPanel,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    propertyPanelScrollPane.setMinimumSize(new Dimension(350,720));
    propertyPanelScrollPane.setPreferredSize(new Dimension(350,720));
    verticalSplitPane=new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,viewport,propertyPanelScrollPane);
    verticalSplitPane.setContinuousLayout(true);
    verticalSplitPane.setResizeWeight(0.5);
    getContentPane().add(verticalSplitPane,BorderLayout.CENTER);
    setTitle("TeraEd - Terasology" + " | " + "Alpha");
    mainMenuBar=new JMenuBar();
    setJMenuBar(mainMenuBar);
    fileMenu=new JMenu("File");
    fileMenuExitItem=new JMenuItem("Exit");
    fileMenuExitItem.addActionListener(this);
    fileMenu.add(fileMenuExitItem);
    shaderPropertiesMenu=new JMenu("Shader Properties");
    propertiesMenu=new JMenu("Properties");
    propertiesMenuScene=new JMenuItem("Scene");
    propertiesMenuScene.addActionListener(this);
    propertiesMenu.add(propertiesMenuScene);
    mainMenuBar.add(fileMenu);
    mainMenuBar.add(shaderPropertiesMenu);
    mainMenuBar.add(propertiesMenu);
    pack();
    setVisible(true);
  }
  public Viewport getViewport(){
    return viewport;
  }
  public void onStateChange(){
  }
  @Override public void actionPerformed(  ActionEvent e){
    if (e.getSource() == fileMenuExitItem) {
      teraEd.getEngine().shutdown();
    }
 else     if (e.getSource() == propertiesMenuScene) {
      propertyPanel.setActivePropertyProvider(teraEd.getSceneProperties());
      propertyPanel.setTitle("Scene Properties");
    }
  }
  @Override public void windowOpened(  WindowEvent e){
  }
  @Override public void windowClosing(  WindowEvent e){
    teraEd.getEngine().shutdown();
  }
  @Override public void windowClosed(  WindowEvent e){
  }
  @Override public void windowIconified(  WindowEvent e){
  }
  @Override public void windowDeiconified(  WindowEvent e){
  }
  @Override public void windowActivated(  WindowEvent e){
  }
  @Override public void windowDeactivated(  WindowEvent e){
  }
}
