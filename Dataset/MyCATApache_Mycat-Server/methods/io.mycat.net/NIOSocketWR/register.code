public void register(Selector selector) throws IOException {
  try {
    processKey=channel.register(selector,SelectionKey.OP_READ,con);
  }
  finally {
    if (con.isClosed.get()) {
      clearSelectionKey();
    }
  }
}
