/** 
 * Optimization: Determine command intents and optimize for bulk execution preferring one node. <p> If there is only one connectionIntent, then we take the connectionIntent derived from the commands. If there is more than one connectionIntent, then use  {@link ConnectionIntent#WRITE}.
 * @param commands {@link Collection} of {@link RedisCommand commands}.
 * @return the connectionIntent.
 */
static ConnectionIntent getIntent(Collection<? extends RedisCommand<?,?,?>> commands){
  boolean w=false;
  boolean r=false;
  ConnectionIntent singleConnectionIntent=ConnectionIntent.WRITE;
  for (  RedisCommand<?,?,?> command : commands) {
    if (command instanceof ClusterCommand) {
      continue;
    }
    singleConnectionIntent=getIntent(command.getType());
    if (singleConnectionIntent == ConnectionIntent.READ) {
      r=true;
    }
    if (singleConnectionIntent == ConnectionIntent.WRITE) {
      w=true;
    }
    if (r && w) {
      return ConnectionIntent.WRITE;
    }
  }
  return singleConnectionIntent;
}
private static ConnectionIntent getIntent(ProtocolKeyword type){
  return ReadOnlyCommands.isReadOnlyCommand(type) ? ConnectionIntent.READ : ConnectionIntent.WRITE;
}
