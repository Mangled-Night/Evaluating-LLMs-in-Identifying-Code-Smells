@BeforeEach void before(){
  RedisURI node1=RedisURI.Builder.redis(host,TestSettings.port(3)).withClientName("my-client").withDatabase(2).build();
  RedisURI node2=RedisURI.Builder.redis(host,TestSettings.port(4)).withClientName("my-client").withDatabase(2).build();
  this.connection1=client.connect(node1).sync();
  this.connection2=client.connect(node2).sync();
  RedisInstance node1Instance=RoleParser.parse(this.connection1.role());
  RedisInstance node2Instance=RoleParser.parse(this.connection2.role());
  if (node1Instance.getRole().isUpstream() && node2Instance.getRole().isReplica()) {
    upstream=node1;
    replica=node2;
  }
 else   if (node2Instance.getRole().isUpstream() && node1Instance.getRole().isReplica()) {
    upstream=node2;
    replica=node1;
  }
 else {
    assumeTrue(false,String.format("Cannot run the test because I don't have a distinct master and replica but %s and %s",node1Instance,node2Instance));
  }
  WithPassword.enableAuthentication(this.connection1);
  this.connection1.auth(passwd);
  this.connection1.configSet("masterauth",passwd.toString());
  WithPassword.enableAuthentication(this.connection2);
  this.connection2.auth(passwd);
  this.connection2.configSet("masterauth",passwd.toString());
  upstream.setPassword(passwd);
  replica.setPassword(passwd);
  connection=MasterSlave.connect(client,StringCodec.UTF8,Arrays.asList(upstream,replica));
  connection.setReadFrom(ReadFrom.REPLICA);
}
