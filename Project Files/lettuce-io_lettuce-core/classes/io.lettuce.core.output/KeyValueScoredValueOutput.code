/** 
 * {@link KeyValue} encapsulating {@link ScoredValue}. See  {@code BZPOPMIN}/ {@code BZPOPMAX} commands.
 * @param < K > Key type.
 * @param < V > Value type.
 * @author Mark Paluch
 * @since 5.1
 */
public class KeyValueScoredValueOutput<K,V> extends CommandOutput<K,V,KeyValue<K,ScoredValue<V>>> {
  private K key;
  private V value;
  public KeyValueScoredValueOutput(  RedisCodec<K,V> codec){
    super(codec,null);
  }
  @Override public void set(  ByteBuffer bytes){
    if (bytes == null) {
      return;
    }
    if (key == null) {
      key=codec.decodeKey(bytes);
      return;
    }
    if (value == null) {
      value=codec.decodeValue(bytes);
      return;
    }
    double score=LettuceStrings.toDouble(decodeAscii(bytes));
    set(score);
  }
  @Override public void set(  double number){
    output=KeyValue.just(key,ScoredValue.just(number,value));
    key=null;
    value=null;
  }
}
