@Test public void setMessageTypeTest() throws IOException, SAXException {
  Message.Type type=Message.Type.chat;
  Message.Type type2=Message.Type.headline;
  StringBuilder controlBuilder=new StringBuilder();
  controlBuilder.append("<message").append(" type=\"").append(type).append("\">").append("</message>");
  String control=controlBuilder.toString();
  Message messageBuildWithBuilder=StanzaBuilder.buildMessage().ofType(Message.Type.chat).build();
  assertEquals(type,messageBuildWithBuilder.getType());
  assertXmlSimilar(control,messageBuildWithBuilder.toXML(StreamOpen.CLIENT_NAMESPACE).toString());
  controlBuilder=new StringBuilder();
  controlBuilder.append("<message").append(" type=\"").append(type2).append("\">").append("</message>");
  control=controlBuilder.toString();
  Message messageTypeSet=StanzaBuilder.buildMessage().ofType(type2).build();
  assertEquals(type2,messageTypeSet.getType());
  assertXmlSimilar(control,messageTypeSet.toXML(StreamOpen.CLIENT_NAMESPACE).toString());
}
