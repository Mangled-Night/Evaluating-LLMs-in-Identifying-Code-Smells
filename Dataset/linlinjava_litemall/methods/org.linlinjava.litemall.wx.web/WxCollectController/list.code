/** 
 * 用户收藏列表
 * @param userId 用户ID
 * @param type   类型，如果是0则是商品收藏，如果是1则是专题收藏
 * @param page   分页页数
 * @param limit   分页大小
 * @return 用户收藏列表
 */
@GetMapping("list") public Object list(@LoginUser Integer userId,@NotNull Byte type,@RequestParam(defaultValue="1") Integer page,@RequestParam(defaultValue="10") Integer limit,@Sort @RequestParam(defaultValue="add_time") String sort,@Order @RequestParam(defaultValue="desc") String order){
  if (userId == null) {
    return ResponseUtil.unlogin();
  }
  List<LitemallCollect> collectList=collectService.queryByType(userId,type,page,limit,sort,order);
  List<Object> collects=new ArrayList<>(collectList.size());
  for (  LitemallCollect collect : collectList) {
    Map<String,Object> c=new HashMap<String,Object>();
    c.put("id",collect.getId());
    c.put("type",collect.getType());
    c.put("valueId",collect.getValueId());
    if (type == (byte)0) {
      LitemallGoods goods=goodsService.findById(collect.getValueId());
      c.put("name",goods.getName());
      c.put("brief",goods.getBrief());
      c.put("picUrl",goods.getPicUrl());
      c.put("retailPrice",goods.getRetailPrice());
    }
 else {
      LitemallTopic topic=topicService.findById(collect.getValueId());
      c.put("title",topic.getTitle());
      c.put("subtitle",topic.getTitle());
      c.put("price",topic.getPrice());
      c.put("picUrl",topic.getPicUrl());
    }
    collects.add(c);
  }
  return ResponseUtil.okList(collects,collectList);
}
