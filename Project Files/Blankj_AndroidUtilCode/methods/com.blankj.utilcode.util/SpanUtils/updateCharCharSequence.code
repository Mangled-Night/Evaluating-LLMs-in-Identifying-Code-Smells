private void updateCharCharSequence(){
  if (mText.length() == 0)   return;
  int start=mBuilder.length();
  if (start == 0 && lineHeight != -1) {
    mBuilder.append(Character.toString((char)2)).append("\n").setSpan(new AbsoluteSizeSpan(0),0,2,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    start=2;
  }
  mBuilder.append(mText);
  int end=mBuilder.length();
  if (verticalAlign != -1) {
    mBuilder.setSpan(new VerticalAlignSpan(verticalAlign),start,end,flag);
  }
  if (foregroundColor != COLOR_DEFAULT) {
    mBuilder.setSpan(new ForegroundColorSpan(foregroundColor),start,end,flag);
  }
  if (backgroundColor != COLOR_DEFAULT) {
    mBuilder.setSpan(new BackgroundColorSpan(backgroundColor),start,end,flag);
  }
  if (first != -1) {
    mBuilder.setSpan(new LeadingMarginSpan.Standard(first,rest),start,end,flag);
  }
  if (quoteColor != COLOR_DEFAULT) {
    mBuilder.setSpan(new CustomQuoteSpan(quoteColor,stripeWidth,quoteGapWidth),start,end,flag);
  }
  if (bulletColor != COLOR_DEFAULT) {
    mBuilder.setSpan(new CustomBulletSpan(bulletColor,bulletRadius,bulletGapWidth),start,end,flag);
  }
  if (fontSize != -1) {
    mBuilder.setSpan(new AbsoluteSizeSpan(fontSize,false),start,end,flag);
  }
  if (proportion != -1) {
    mBuilder.setSpan(new RelativeSizeSpan(proportion),start,end,flag);
  }
  if (xProportion != -1) {
    mBuilder.setSpan(new ScaleXSpan(xProportion),start,end,flag);
  }
  if (lineHeight != -1) {
    mBuilder.setSpan(new CustomLineHeightSpan(lineHeight,alignLine),start,end,flag);
  }
  if (isStrikethrough) {
    mBuilder.setSpan(new StrikethroughSpan(),start,end,flag);
  }
  if (isUnderline) {
    mBuilder.setSpan(new UnderlineSpan(),start,end,flag);
  }
  if (isSuperscript) {
    mBuilder.setSpan(new SuperscriptSpan(),start,end,flag);
  }
  if (isSubscript) {
    mBuilder.setSpan(new SubscriptSpan(),start,end,flag);
  }
  if (isBold) {
    mBuilder.setSpan(new StyleSpan(Typeface.BOLD),start,end,flag);
  }
  if (isItalic) {
    mBuilder.setSpan(new StyleSpan(Typeface.ITALIC),start,end,flag);
  }
  if (isBoldItalic) {
    mBuilder.setSpan(new StyleSpan(Typeface.BOLD_ITALIC),start,end,flag);
  }
  if (fontFamily != null) {
    mBuilder.setSpan(new TypefaceSpan(fontFamily),start,end,flag);
  }
  if (typeface != null) {
    mBuilder.setSpan(new CustomTypefaceSpan(typeface),start,end,flag);
  }
  if (alignment != null) {
    mBuilder.setSpan(new AlignmentSpan.Standard(alignment),start,end,flag);
  }
  if (clickSpan != null) {
    mBuilder.setSpan(clickSpan,start,end,flag);
  }
  if (url != null) {
    mBuilder.setSpan(new URLSpan(url),start,end,flag);
  }
  if (blurRadius != -1) {
    mBuilder.setSpan(new MaskFilterSpan(new BlurMaskFilter(blurRadius,style)),start,end,flag);
  }
  if (shader != null) {
    mBuilder.setSpan(new ShaderSpan(shader),start,end,flag);
  }
  if (shadowRadius != -1) {
    mBuilder.setSpan(new ShadowSpan(shadowRadius,shadowDx,shadowDy,shadowColor),start,end,flag);
  }
  if (spans != null) {
    for (    Object span : spans) {
      mBuilder.setSpan(span,start,end,flag);
    }
  }
}
