public static List<FileItem> getFileItems(final FileItem parent){
  if (parent == null)   return getFileItems();
  List<File> files=FileUtils.listFilesInDir(parent.getFile(),new Comparator<File>(){
    @Override public int compare(    File o1,    File o2){
      if (o1.isDirectory() && o2.isFile()) {
        return -1;
      }
 else       if (o1.isFile() && o2.isDirectory()) {
        return 1;
      }
 else {
        return o1.getName().toLowerCase().compareTo(o2.getName().toLowerCase());
      }
    }
  }
);
  return (List<FileItem>)CollectionUtils.collect(files,new CollectionUtils.Transformer<File,FileItem>(){
    @Override public FileItem transform(    File input){
      return new FileItem(parent,input);
    }
  }
);
}
private static List<FileItem> getFileItems(){
  List<FileItem> fileItems=new ArrayList<>();
  String internalAppDataPath=PathUtils.getInternalAppDataPath();
  if (!StringUtils.isEmpty(internalAppDataPath)) {
    File internalDataFile=new File(internalAppDataPath);
    if (internalDataFile.exists()) {
      fileItems.add(new FileItem(internalDataFile,"internal"));
    }
  }
  String externalAppDataPath=PathUtils.getExternalAppDataPath();
  if (!StringUtils.isEmpty(externalAppDataPath)) {
    File externalDataFile=new File(externalAppDataPath);
    if (externalDataFile.exists()) {
      fileItems.add(new FileItem(externalDataFile,"external"));
    }
  }
  List<String> mountedSDCardPath=SDCardUtils.getMountedSDCardPath();
  if (!mountedSDCardPath.isEmpty()) {
    for (int i=0; i < mountedSDCardPath.size(); i++) {
      String path=mountedSDCardPath.get(i);
      File sdPath=new File(path);
      if (sdPath.exists()) {
        fileItems.add(new FileItem(sdPath,"sdcard" + i + "_"+ sdPath.getName(),true));
      }
    }
  }
  return fileItems;
}
