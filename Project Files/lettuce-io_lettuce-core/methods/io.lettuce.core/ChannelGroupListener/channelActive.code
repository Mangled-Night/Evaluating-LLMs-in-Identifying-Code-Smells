@Override public void channelActive(ChannelHandlerContext ctx) throws Exception {
  CommandHandler commandHandler=getCommandHandler(ctx);
  String epid=commandHandler.getEndpoint().getId();
  eventBus.publish(new ConnectedEvent(getRedisUri(ctx.channel()),epid,commandHandler.getChannelId(),local(ctx),remote(ctx)));
  channels.add(ctx.channel());
  super.channelActive(ctx);
}
