public class RegisterSystems extends SingleStepLoadProcess {
  private final Context context;
  private final NetworkMode netMode;
  private ComponentSystemManager componentSystemManager;
  public RegisterSystems(  Context context,  NetworkMode netMode){
    this.context=context;
    this.netMode=netMode;
  }
  @Override public String getMessage(){
    return "Registering systems...";
  }
  @Override public boolean step(){
    componentSystemManager=context.get(ComponentSystemManager.class);
    ModuleManager moduleManager=context.get(ModuleManager.class);
    TerasologyEngine terasologyEngine=(TerasologyEngine)context.get(GameEngine.class);
    for (    EngineSubsystem subsystem : terasologyEngine.getSubsystems()) {
      subsystem.registerSystems(componentSystemManager);
    }
    componentSystemManager.loadSystems(moduleManager.getEnvironment(),netMode);
    return true;
  }
  @Override public int getExpectedCost(){
    return 1;
  }
}
