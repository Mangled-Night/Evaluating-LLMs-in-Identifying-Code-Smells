/** 
 * 测试单表别名更新分片字段
 * @throws NoSuchMethodException
 */
@Test public void testAliasUpdateShardColumn() throws NoSuchMethodException {
  throwExceptionParse("update hotnews h set h.id = 1 where h.name = 234;",true);
  throwExceptionParse("update hotnews h set h.id = 1 where h.id = 3;",true);
  throwExceptionParse("update hotnews h set h.id = 1, h.name = '123' where h.id = 1 and h.name = '234'",false);
  throwExceptionParse("update hotnews h set h.id = 1, h.name = '123' where h.id = 1 or h.name = '234'",true);
  throwExceptionParse("update hotnews h set h.id = 'A', h.name = '123' where h.id = 'A' and h.name = '234'",false);
  throwExceptionParse("update hotnews h set h.id = 'A', h.name = '123' where h.id = 'A' or h.name = '234'",true);
  throwExceptionParse("update hotnews h set h.id = 1.5, h.name = '123' where h.id = 1.5 and h.name = '234'",false);
  throwExceptionParse("update hotnews h set h.id = 1.5, h.name = '123' where h.id = 1.5 or h.name = '234'",true);
  throwExceptionParse("update hotnews h set id = 1, h.name = '123' where h.id = 1 and h.name = '234'",false);
  throwExceptionParse("update hotnews h set h.id = 1, h.name = '123' where id = 1 or h.name = '234'",true);
  throwExceptionParse("update hotnews h set h.id = 1, h.name = '123' where h.name = '234' and (h.id = 1 or h.age > 3)",true);
  throwExceptionParse("update hotnews h set h.id = 1, h.name = '123' where h.id = 1 and (h.name = '234' or h.age > 3)",false);
}
