/** 
 * Restores the AVL tree property of the subtree.
 * @param x the subtree
 * @return the subtree with restored AVL property
 */
private Node balance(Node x){
  if (balanceFactor(x) < -1) {
    if (balanceFactor(x.right) > 0) {
      x.right=rotateRight(x.right);
    }
    x=rotateLeft(x);
  }
 else   if (balanceFactor(x) > 1) {
    if (balanceFactor(x.left) < 0) {
      x.left=rotateLeft(x.left);
    }
    x=rotateRight(x);
  }
  return x;
}
