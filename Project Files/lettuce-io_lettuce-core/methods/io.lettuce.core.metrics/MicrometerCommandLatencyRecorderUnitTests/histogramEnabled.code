@Test void histogramEnabled(){
  MicrometerOptions options=MicrometerOptions.builder().histogram(true).build();
  MicrometerCommandLatencyRecorder commandLatencyRecorder=new MicrometerCommandLatencyRecorder(meterRegistry,options);
  commandLatencyRecorder.recordCommandLatency(LOCAL_ADDRESS,REMOTE_ADDRESS,CommandType.AUTH,1,10);
  commandLatencyRecorder.recordCommandLatency(LOCAL_ADDRESS,REMOTE_ADDRESS,CommandType.AUTH,2,5);
  assertThat(meterRegistry.find(METRIC_COMPLETION).timers()).hasSize(1).element(0).extracting(Timer::takeSnapshot).extracting(HistogramSnapshot::percentileValues,InstanceOfAssertFactories.array(ValueAtPercentile[].class)).extracting(ValueAtPercentile::percentile).containsExactlyElementsOf(Arrays.asList(ArrayUtils.toObject(options.targetPercentiles())));
  assertThat(meterRegistry.find(METRIC_FIRST_RESPONSE).timers()).hasSize(1).element(0).extracting(Timer::takeSnapshot).extracting(HistogramSnapshot::percentileValues,InstanceOfAssertFactories.array(ValueAtPercentile[].class)).extracting(ValueAtPercentile::percentile).containsExactlyElementsOf(Arrays.asList(ArrayUtils.toObject(options.targetPercentiles())));
}
