public void quit(){
  if (isQuit.compareAndSet(false,true) && !isClosed()) {
    if (isAuthenticated) {
      write(writeToBuffer(QuitPacket.QUIT,allocate()));
      write(allocate());
    }
 else {
      close("normal");
    }
  }
}
