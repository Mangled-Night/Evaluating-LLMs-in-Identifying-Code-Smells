private StreamNegotiator getOutgoingNegotiator(final FormField field) throws NoAcceptableTransferMechanisms {
  boolean isByteStream=false;
  boolean isIBB=false;
  for (  CharSequence variable : field.getValues()) {
    String variableString=variable.toString();
    if (variableString.equals(Bytestream.NAMESPACE) && !IBB_ONLY) {
      isByteStream=true;
    }
 else     if (variableString.equals(DataPacketExtension.NAMESPACE)) {
      isIBB=true;
    }
  }
  if (!isByteStream && !isIBB) {
    throw new FileTransferException.NoAcceptableTransferMechanisms();
  }
  if (isByteStream) {
    return byteStreamTransferManager;
  }
 else {
    return inbandTransferManager;
  }
}
