/** 
 * Saves the double array as an audio file (using WAV, AU, or AIFF format). The file extension type must be either  {@code .wav},  {@code .au}, or  {@code .aiff}. The format uses a sampling rate of 44,100 Hz, 16-bit audio, mono, signed PCM, ands little Endian.
 * @param filename the name of the audio file
 * @param samples the array of samples
 * @throws IllegalArgumentException if unable to save {@code filename}
 * @throws IllegalArgumentException if {@code samples} is {@code null}
 * @throws IllegalArgumentException if {@code filename} is {@code null}
 * @throws IllegalArgumentException if {@code filename} extension is not{@code .wav},  {@code .au}, or  {@code .aiff}.
 */
public static void save(String filename,double[] samples){
  if (filename == null) {
    throw new IllegalArgumentException("filename is null");
  }
  if (samples == null) {
    throw new IllegalArgumentException("samples[] is null");
  }
  AudioFormat format=new AudioFormat(SAMPLE_RATE,16,MONO,SIGNED,LITTLE_ENDIAN);
  byte[] data=new byte[2 * samples.length];
  for (int i=0; i < samples.length; i++) {
    int temp=(short)(samples[i] * MAX_16_BIT);
    if (samples[i] == 1.0)     temp=Short.MAX_VALUE;
    data[2 * i + 0]=(byte)temp;
    data[2 * i + 1]=(byte)(temp >> 8);
  }
  try (ByteArrayInputStream bais=new ByteArrayInputStream(data);AudioInputStream ais=new AudioInputStream(bais,format,samples.length)){
    if (filename.endsWith(".wav") || filename.endsWith(".WAV")) {
      if (!AudioSystem.isFileTypeSupported(AudioFileFormat.Type.WAVE,ais)) {
        throw new IllegalArgumentException("saving to WAVE file format is not supported on this system");
      }
      AudioSystem.write(ais,AudioFileFormat.Type.WAVE,new File(filename));
    }
 else     if (filename.endsWith(".au") || filename.endsWith(".AU")) {
      if (!AudioSystem.isFileTypeSupported(AudioFileFormat.Type.AU,ais)) {
        throw new IllegalArgumentException("saving to AU file format is not supported on this system");
      }
      AudioSystem.write(ais,AudioFileFormat.Type.AU,new File(filename));
    }
 else     if (filename.endsWith(".aif") || filename.endsWith(".aiff") || filename.endsWith(".AIF")|| filename.endsWith(".AIFF")) {
      if (!AudioSystem.isFileTypeSupported(AudioFileFormat.Type.AIFF,ais)) {
        throw new IllegalArgumentException("saving to AIFF file format is not supported on this system");
      }
      AudioSystem.write(ais,AudioFileFormat.Type.AIFF,new File(filename));
    }
 else {
      throw new IllegalArgumentException("file extension for saving must be .wav, .au, or .aif");
    }
  }
 catch (  IOException ioe) {
    throw new IllegalArgumentException("unable to save file '" + filename + "'",ioe);
  }
}
