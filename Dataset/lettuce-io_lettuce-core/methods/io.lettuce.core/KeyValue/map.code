/** 
 * Returns a  {@link KeyValue} consisting of the results of applying the given function to the value of this element. Mappingis performed only if a  {@link #hasValue() value is present}.
 * @param < R > The element type of the new {@link KeyValue}
 * @param mapper a stateless function to apply to each element
 * @return the new {@link KeyValue}
 */
@SuppressWarnings("unchecked") @Override public <R>KeyValue<K,R> map(Function<? super V,? extends R> mapper){
  LettuceAssert.notNull(mapper,"Mapper function must not be null");
  if (hasValue()) {
    return new KeyValue<>(getKey(),mapper.apply(getValue()));
  }
  return (KeyValue<K,R>)this;
}
