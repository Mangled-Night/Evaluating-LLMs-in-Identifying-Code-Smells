/** 
 * Wait for stateLock and increment writers. Will wait if stateLock is locked and if writer counter is negative.
 */
void incrementWriters(){
  if (exclusiveLockOwner == Thread.currentThread()) {
    return;
  }
  lock.lock();
  try {
    for (; ; ) {
      if (WRITERS.get(this) >= 0) {
        WRITERS.incrementAndGet(this);
        return;
      }
    }
  }
  finally {
    lock.unlock();
  }
}
