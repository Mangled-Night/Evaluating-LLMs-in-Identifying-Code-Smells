@Override public ByteBuffer write(ByteBuffer buffer,FrontendConnection c,boolean writeSocketIfFull){
  buffer=c.checkWriteBuffer(buffer,c.getPacketHeaderSize(),writeSocketIfFull);
  BufferUtil.writeUB3(buffer,calcPacketSize());
  buffer.put(packetId);
  buffer=c.writeToBuffer(data,buffer);
  return buffer;
}
@Override public void write(BackendAIOConnection c){
  ByteBuffer buffer=c.allocate();
  buffer=c.checkWriteBuffer(buffer,c.getPacketHeaderSize() + calcPacketSize(),false);
  BufferUtil.writeUB3(buffer,calcPacketSize());
  buffer.put(packetId);
  buffer.put(data);
  c.write(buffer);
}
