/** 
 * Returns a new byte array, copied from the given  {@code buf}, from the index 0 (inclusive) to the limit (exclusive), regardless of the current position. The position and the other index parameters are not changed.
 * @param buf a byte buffer
 * @return the byte array
 */
public static byte[] toBytes(ByteBuffer buf){
  ByteBuffer dup=buf.duplicate();
  dup.position(0);
  return readBytes(dup);
}
/** 
 * Converts a string to a UTF-8 byte array.
 * @param s string
 * @return the byte array
 */
public static byte[] toBytes(String s){
  return s.getBytes(UTF8_CHARSET);
}
/** 
 * Convert a boolean to a byte array. True becomes -1 and false becomes 0.
 * @param b value
 * @return <code>b</code> encoded in a byte array.
 */
public static byte[] toBytes(final boolean b){
  return new byte[]{b ? (byte)-1 : (byte)0};
}
/** 
 * Convert a long value to a byte array using big-endian.
 * @param val value to convert
 * @return the byte array
 */
public static byte[] toBytes(long val){
  byte[] b=new byte[8];
  for (int i=7; i > 0; i--) {
    b[i]=(byte)val;
    val>>>=8;
  }
  b[0]=(byte)val;
  return b;
}
