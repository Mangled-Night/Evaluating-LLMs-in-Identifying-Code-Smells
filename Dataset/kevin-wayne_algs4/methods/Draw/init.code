private void init(){
  if (frame != null)   frame.setVisible(false);
  frame=new JFrame();
  offscreenImage=new BufferedImage(2 * width,2 * height,BufferedImage.TYPE_INT_ARGB);
  onscreenImage=new BufferedImage(2 * width,2 * height,BufferedImage.TYPE_INT_ARGB);
  offscreen=offscreenImage.createGraphics();
  onscreen=onscreenImage.createGraphics();
  offscreen.scale(2.0,2.0);
  setXscale();
  setYscale();
  offscreen.setColor(DEFAULT_CLEAR_COLOR);
  offscreen.fillRect(0,0,width,height);
  setPenColor();
  setPenRadius();
  setFont();
  clear();
  RenderingHints hints=new RenderingHints(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  hints.put(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);
  offscreen.addRenderingHints(hints);
  RetinaImageIcon icon=new RetinaImageIcon(onscreenImage);
  draw=new JLabel(icon);
  draw.addMouseListener(this);
  draw.addMouseMotionListener(this);
  frame.setContentPane(draw);
  frame.addKeyListener(this);
  frame.setResizable(false);
  frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
  frame.setFocusTraversalKeysEnabled(false);
  frame.setTitle(title);
  frame.setJMenuBar(createMenuBar());
  frame.pack();
  frame.requestFocusInWindow();
  frame.setVisible(true);
}
