public class ProtobufDataWriter implements PersistedDataWriter<ProtobufPersistedData> {
  @Override public byte[] writeBytes(  ProtobufPersistedData data){
    return data.getValue().toByteArray();
  }
  @Override public void writeTo(  ProtobufPersistedData data,  OutputStream outputStream) throws IOException {
    data.getValue().writeTo(CodedOutputStream.newInstance(outputStream));
  }
}
