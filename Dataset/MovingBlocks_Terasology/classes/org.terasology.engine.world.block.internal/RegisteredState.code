private static class RegisteredState {
  private final Map<BlockUri,BlockFamily> registeredFamilyByUri;
  private final Map<BlockUri,Block> blocksByUri;
  private final TShortObjectMap<Block> blocksById;
  private final TObjectShortMap<BlockUri> idByUri;
  RegisteredState(){
    this.registeredFamilyByUri=Maps.newHashMap();
    this.blocksByUri=Maps.newHashMap();
    this.blocksById=new TShortObjectHashMap<>();
    this.idByUri=new TObjectShortHashMap<>();
  }
  RegisteredState(  RegisteredState oldState){
    this.registeredFamilyByUri=Maps.newHashMap(oldState.registeredFamilyByUri);
    this.blocksByUri=Maps.newHashMap(oldState.blocksByUri);
    this.blocksById=new TShortObjectHashMap<>(oldState.blocksById);
    this.idByUri=new TObjectShortHashMap<>(oldState.idByUri);
  }
}
