private <T>void asyncTest(int threadCount,TestRunnable<T> runnable) throws Exception {
  CountDownLatch latch=new CountDownLatch(threadCount);
  for (int i=0; i < threadCount; i++) {
    runnable.run(i,latch);
  }
  latch.await();
}
