/** 
 * Set auto-flush on all commands. Synchronize on  {@code stateLock} to initiate a happens-before relation and clear thethread caches of other threads.
 * @param autoFlush state of autoFlush.
 */
@Override public void setAutoFlushCommands(boolean autoFlush){
synchronized (stateLock) {
    this.autoFlushCommands=autoFlush;
  }
  connectionProvider.forEach(connection -> connection.setAutoFlushCommands(autoFlush));
}
