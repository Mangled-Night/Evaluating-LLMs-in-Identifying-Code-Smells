@Test void toArrayUsesReadView(){
  Partitions partitions=new Partitions();
  partitions.getPartitions().addAll(Arrays.asList(node1,node2));
  assertThat(partitions.toArray()).doesNotContain(node1,node2);
  partitions.updateCache();
  assertThat(partitions.toArray()).contains(node1,node2);
}
