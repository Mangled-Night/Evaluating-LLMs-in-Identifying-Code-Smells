@Override public StanzaCollector answer(InvocationOnMock invocation) throws Throwable {
  Stanza packet=(Stanza)invocation.getArguments()[0];
  protocol.getRequests().add(packet);
  return collector;
}
@Override public Object answer(InvocationOnMock invocation) throws Throwable {
  protocol.getRequests().add((Stanza)invocation.getArguments()[0]);
  return null;
}
@Override public Stanza answer(InvocationOnMock invocation) throws Throwable {
  return protocol.getResponses().poll();
}
@Override public Stanza answer(InvocationOnMock invocation) throws Throwable {
  Stanza packet=protocol.getResponses().poll();
  if (packet == null)   return packet;
  XMPPErrorException.ifHasErrorThenThrow(packet);
  return packet;
}
@Override public IQ answer(InvocationOnMock invocation) throws Throwable {
  collectorAndSend.answer(invocation);
  IQ response=(IQ)answerOrThrow.answer(invocation);
  return response;
}
