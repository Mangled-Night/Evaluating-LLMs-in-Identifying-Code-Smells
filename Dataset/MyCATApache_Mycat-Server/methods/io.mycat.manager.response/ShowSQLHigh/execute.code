public static void execute(ManagerConnection c,boolean isClear){
  ByteBuffer buffer=c.allocate();
  buffer=header.write(buffer,c,true);
  for (  FieldPacket field : fields) {
    buffer=field.write(buffer,c,true);
  }
  buffer=eof.write(buffer,c,true);
  byte packetId=eof.packetId;
  Map<String,UserStat> statMap=UserStatAnalyzer.getInstance().getUserStatMap();
  for (  UserStat userStat : statMap.values()) {
    String user=userStat.getUser();
    List<SqlFrequency> list=userStat.getSqlHigh().getSqlFrequency(isClear);
    if (list != null) {
      int i=1;
      for (      SqlFrequency sqlFrequency : list) {
        if (sqlFrequency != null) {
          RowDataPacket row=getRow(i,user,sqlFrequency.getSql(),sqlFrequency.getCount(),sqlFrequency.getAvgTime(),sqlFrequency.getMaxTime(),sqlFrequency.getMinTime(),sqlFrequency.getExecuteTime(),sqlFrequency.getLastTime(),c.getCharset(),sqlFrequency.getHost());
          row.packetId=++packetId;
          buffer=row.write(buffer,c,true);
          i++;
        }
      }
    }
  }
  EOFPacket lastEof=new EOFPacket();
  lastEof.packetId=++packetId;
  buffer=lastEof.write(buffer,c,true);
  c.write(buffer);
}
