@SuppressWarnings("unchecked") private <T extends Component>void copyIntoPrefab(EntityRef blockEntity,T comp,Set<Class<? extends Component>> retainComponents){
  ComponentMetadata<T> metadata=entityManager.getComponentLibrary().getMetadata((Class<T>)comp.getClass());
  if (!blockEntity.hasComponent(comp.getClass())) {
    blockEntity.addComponent(metadata.copyRaw(comp));
  }
 else   if (!metadata.isRetainUnalteredOnBlockChange() && !retainComponents.contains(metadata.getType())) {
    updateComponent(blockEntity,metadata,comp);
  }
}
