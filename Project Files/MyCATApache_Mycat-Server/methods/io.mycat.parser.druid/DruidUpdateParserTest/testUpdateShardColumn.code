/** 
 * 测试单表更新分片字段
 * @throws NoSuchMethodException
 */
@Test public void testUpdateShardColumn() throws NoSuchMethodException {
  throwExceptionParse("update hotnews set id = 1 where name = 234;",true);
  throwExceptionParse("update hotnews set id = 1 where id = 3;",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id = 1 and name = '234'",false);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id = 1 or name = '234'",true);
  throwExceptionParse("update hotnews set id = 'A', name = '123' where id = 'A' and name = '234'",false);
  throwExceptionParse("update hotnews set id = 'A', name = '123' where id = 'A' or name = '234'",true);
  throwExceptionParse("update hotnews set id = 1.5, name = '123' where id = 1.5 and name = '234'",false);
  throwExceptionParse("update hotnews set id = 1.5, name = '123' where id = 1.5 or name = '234'",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where name = '234' and (id = 1 or age > 3)",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id = 1 and (name = '234' or age > 3)",false);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id = 1 and name in (select name from test)",false);
  throwExceptionParse("update hotnews set id = 1, name = '123' where name = '123' and id in (select id from test)",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id between 1 and 3",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id between 1 and 3 and name = '234'",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id between 1 and 3 or name = '234'",true);
  throwExceptionParse("update hotnews set id = 1, name = '123' where id = 1 and name between '124' and '234'",false);
}
