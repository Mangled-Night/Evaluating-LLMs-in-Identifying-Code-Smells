public byte[] writeToBytes(FrontendConnection c){
  ByteBuffer buffer=c.allocate();
  this.write(buffer,c);
  buffer.flip();
  byte[] data=new byte[buffer.limit()];
  buffer.get(data);
  c.recycle(buffer);
  return data;
}
public byte[] writeToBytes(){
  int totalSize=calcPacketSize() + packetHeaderSize;
  ByteBuffer buffer=MycatServer.getInstance().getBufferPool().allocate(totalSize);
  BufferUtil.writeUB3(buffer,calcPacketSize());
  buffer.put(packetId);
  buffer.put(fieldCount);
  BufferUtil.writeLength(buffer,affectedRows);
  BufferUtil.writeLength(buffer,insertId);
  BufferUtil.writeUB2(buffer,serverStatus);
  BufferUtil.writeUB2(buffer,warningCount);
  if (message != null) {
    BufferUtil.writeWithLength(buffer,message);
  }
  buffer.flip();
  byte[] data=new byte[buffer.limit()];
  buffer.get(data);
  MycatServer.getInstance().getBufferPool().recycle(buffer);
  return data;
}
