/** 
 * Returns str, left-padded with pad to a length of len. For example: ('hi', 5, '??') =&gt; '???hi' ('hi', 1, '??') =&gt; 'h'
 */
public UTF8String lpad(int len,UTF8String pad){
  int spaces=len - this.numChars();
  if (spaces <= 0 || pad.numBytes() == 0) {
    return substring(0,len);
  }
 else {
    int padChars=pad.numChars();
    int count=spaces / padChars;
    UTF8String remain=pad.substring(0,spaces - padChars * count);
    byte[] data=new byte[this.numBytes + pad.numBytes * count + remain.numBytes];
    int offset=0;
    int idx=0;
    while (idx < count) {
      Platform.copyMemory(pad.base,pad.offset,data,Platform.BYTE_ARRAY_OFFSET + offset,pad.numBytes);
      ++idx;
      offset+=pad.numBytes;
    }
    Platform.copyMemory(remain.base,remain.offset,data,Platform.BYTE_ARRAY_OFFSET + offset,remain.numBytes);
    offset+=remain.numBytes;
    Platform.copyMemory(this.base,this.offset,data,Platform.BYTE_ARRAY_OFFSET + offset,numBytes());
    return UTF8String.fromBytes(data);
  }
}
