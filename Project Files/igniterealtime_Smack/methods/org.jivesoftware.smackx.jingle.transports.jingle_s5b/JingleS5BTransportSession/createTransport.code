@Override public JingleS5BTransport createTransport(){
  if (ourProposal == null) {
    ourProposal=createTransport(JingleManager.randomId(),Bytestream.Mode.tcp);
  }
  return ourProposal;
}
public JingleS5BTransport createTransport(String sid,Bytestream.Mode mode){
  JingleS5BTransport.Builder jb=JingleS5BTransport.getBuilder().setStreamId(sid).setMode(mode).setDestinationAddress(Socks5Utils.createDigest(sid,jingleSession.getLocal(),jingleSession.getRemote()));
  if (JingleS5BTransportManager.isUseLocalCandidates()) {
    for (    Bytestream.StreamHost host : transportManager().getLocalStreamHosts()) {
      jb.addTransportCandidate(new JingleS5BTransportCandidate(host,100,JingleS5BTransportCandidate.Type.direct));
    }
  }
  List<Bytestream.StreamHost> remoteHosts=Collections.emptyList();
  if (JingleS5BTransportManager.isUseExternalCandidates()) {
    try {
      remoteHosts=transportManager().getAvailableStreamHosts();
    }
 catch (    InterruptedException|XMPPException.XMPPErrorException|SmackException.NotConnectedException|SmackException.NoResponseException e) {
      LOGGER.log(Level.WARNING,"Could not determine available StreamHosts.",e);
    }
  }
  for (  Bytestream.StreamHost host : remoteHosts) {
    jb.addTransportCandidate(new JingleS5BTransportCandidate(host,0,JingleS5BTransportCandidate.Type.proxy));
  }
  return jb.build();
}
