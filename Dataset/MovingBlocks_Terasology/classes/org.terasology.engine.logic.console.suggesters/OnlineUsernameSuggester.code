/** 
 * Suggests user names of all online users
 */
public final class OnlineUsernameSuggester implements CommandParameterSuggester<String> {
  private final EntityManager entityManager;
  public OnlineUsernameSuggester(  EntityManager entityManager){
    this.entityManager=entityManager;
  }
  @Override public Set<String> suggest(  EntityRef sender,  Object... resolvedParameters){
    Iterable<EntityRef> clients=entityManager.getEntitiesWith(ClientComponent.class);
    Set<String> clientNames=Sets.newHashSet();
    for (    EntityRef client : clients) {
      ClientComponent clientComponent=client.getComponent(ClientComponent.class);
      DisplayNameComponent displayNameComponent=clientComponent.clientInfo.getComponent(DisplayNameComponent.class);
      clientNames.add(displayNameComponent.name);
    }
    return clientNames;
  }
}
