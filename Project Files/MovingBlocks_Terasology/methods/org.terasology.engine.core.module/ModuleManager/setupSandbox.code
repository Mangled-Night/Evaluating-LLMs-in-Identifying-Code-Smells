private void setupSandbox(){
  PermissionSet permissionSet=permissionProviderFactory.getBasePermissionSet();
  ExternalApiWhitelist.CLASSES.forEach(permissionSet::addAPIClass);
  ExternalApiWhitelist.PACKAGES.forEach(permissionSet::addAPIPackage);
  APIScanner apiScanner=new APIScanner(permissionProviderFactory);
  registry.stream().map(Module::getModuleManifest).forEach(apiScanner::scan);
  permissionSet.grantPermission("com.google.gson",ReflectPermission.class);
  permissionSet.grantPermission("com.google.gson.internal",ReflectPermission.class);
  if (reactor.core.scheduler.Scheduler.class != null) {
    permissionSet.grantPermission(new PropertyPermission("reactor.*","read"));
    permissionSet.grantPermission(new PropertyPermission("reactor.bufferSize.x","read"));
    permissionSet.grantPermission(new PropertyPermission("reactor.bufferSize.small","read"));
    permissionSet.grantPermission(new PropertyPermission("reactor.trace.operatorStacktrace","read"));
    permissionSet.grantPermission(new PropertyPermission("reactor.schedulers.defaultPoolSize","read"));
    permissionSet.grantPermission(new PropertyPermission("reactor.schedulers.defaultBoundedElasticSize","read"));
    permissionSet.grantPermission(new PropertyPermission("reactor.schedulers.defaultBoundedElasticQueueSize","read"));
  }
  Policy.setPolicy(new ModuleSecurityPolicy());
  System.setSecurityManager(new ModuleSecurityManager());
}
