static State.Result handleSet(RedisStateMachine rsm,State state,ByteBuf buffer,CommandOutput<?,?,?> output,Consumer<Exception> errorHandler){
  int end;
  if (state.count == NOT_FOUND) {
    if ((end=rsm.findLineEnd(buffer)) == NOT_FOUND) {
      return State.Result.BREAK_LOOP;
    }
    readAndMarkReadIdx(rsm,state,buffer,end);
    rsm.safeMultiSet(output,state.count,errorHandler);
  }
  return returnDependStateCount(rsm,state);
}
