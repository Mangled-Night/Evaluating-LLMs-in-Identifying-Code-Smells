/** 
 * Create a new  {@link CommandExpiryWriter}.
 * @param delegate must not be {@code null}.
 * @param clientOptions must not be {@code null}.
 * @param clientResources must not be {@code null}.
 */
public CommandExpiryWriter(RedisChannelWriter delegate,ClientOptions clientOptions,ClientResources clientResources){
  LettuceAssert.notNull(delegate,"RedisChannelWriter must not be null");
  LettuceAssert.isTrue(isSupported(clientOptions),"Command timeout not enabled");
  LettuceAssert.notNull(clientResources,"ClientResources must not be null");
  TimeoutOptions timeoutOptions=clientOptions.getTimeoutOptions();
  this.delegate=delegate;
  this.source=timeoutOptions.getSource();
  this.applyConnectionTimeout=timeoutOptions.isApplyConnectionTimeout();
  this.timeUnit=source.getTimeUnit();
  this.executorService=clientResources.eventExecutorGroup();
}
