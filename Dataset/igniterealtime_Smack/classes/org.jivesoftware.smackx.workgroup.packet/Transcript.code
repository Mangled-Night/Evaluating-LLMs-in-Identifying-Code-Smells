/** 
 * Represents the conversation transcript that occurred in a group chat room between an Agent and a user that requested assistance. The transcript contains all the Messages that were sent to the room as well as the sent presences.
 * @author Gaston Dombiak
 */
public class Transcript extends IQ {
  private final String sessionID;
  private final List<Stanza> packets;
  /** 
 * Creates a transcript request for the given sessionID.
 * @param sessionID the id of the session to get the conversation transcript.
 */
  public Transcript(  String sessionID){
    this(sessionID,new ArrayList<Stanza>());
  }
  /** 
 * Creates a new transcript for the given sessionID and list of packets. The list of packets may include Messages and/or Presences.
 * @param sessionID the id of the session that generated this conversation transcript.
 * @param packets the list of messages and presences send to the room.
 */
  public Transcript(  String sessionID,  List<Stanza> packets){
    super("transcript","http://jabber.org/protocol/workgroup");
    this.sessionID=sessionID;
    this.packets=packets;
  }
  /** 
 * Returns id of the session that generated this conversation transcript. The sessionID is a value generated by the server when a new request is received.
 * @return id of the session that generated this conversation transcript.
 */
  public String getSessionID(){
    return sessionID;
  }
  /** 
 * Returns the list of Messages and Presences that were sent to the room.
 * @return the list of Messages and Presences that were sent to the room.
 */
  public List<Stanza> getPackets(){
    return Collections.unmodifiableList(packets);
  }
  @Override protected IQChildElementXmlStringBuilder getIQChildElementBuilder(  IQChildElementXmlStringBuilder buf){
    buf.append(" sessionID=\"").append(sessionID).append("\">");
    for (    Stanza packet : packets) {
      buf.append(packet.toXML());
    }
    return buf;
  }
}
