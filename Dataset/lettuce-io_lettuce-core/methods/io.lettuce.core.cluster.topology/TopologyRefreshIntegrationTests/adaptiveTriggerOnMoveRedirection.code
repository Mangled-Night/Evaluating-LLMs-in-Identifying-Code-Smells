@Test void adaptiveTriggerOnMoveRedirection(){
  ClusterTopologyRefreshOptions topologyRefreshOptions=ClusterTopologyRefreshOptions.builder().enableAdaptiveRefreshTrigger(ClusterTopologyRefreshOptions.RefreshTrigger.MOVED_REDIRECT).build();
  clusterClient.setOptions(ClusterClientOptions.builder().topologyRefreshOptions(topologyRefreshOptions).build());
  StatefulRedisClusterConnection<String,String> connection=clusterClient.connect();
  RedisAdvancedClusterAsyncCommands<String,String> clusterConnection=connection.async();
  Partitions partitions=connection.getPartitions();
  RedisClusterNode node1=partitions.getPartitionBySlot(0);
  RedisClusterNode node2=partitions.getPartitionBySlot(12000);
  List<Integer> slots=node2.getSlots();
  slots.addAll(node1.getSlots());
  node2.setSlots(slots);
  node1.setSlots(Collections.emptyList());
  partitions.updateCache();
  assertThat(clusterClient.getPartitions().getPartitionByNodeId(node1.getNodeId()).getSlots()).hasSize(0);
  assertThat(clusterClient.getPartitions().getPartitionByNodeId(node2.getNodeId()).getSlots()).hasSize(16384);
  connection.reactive().set("b",value).toFuture();
  Wait.untilEquals(12000,() -> clusterClient.getPartitions().getPartitionByNodeId(node1.getNodeId()).getSlots().size()).waitOrTimeout();
  assertThat(clusterClient.getPartitions().getPartitionByNodeId(node1.getNodeId()).getSlots()).hasSize(12000);
  assertThat(clusterClient.getPartitions().getPartitionByNodeId(node2.getNodeId()).getSlots()).hasSize(4384);
  clusterConnection.getStatefulConnection().close();
}
