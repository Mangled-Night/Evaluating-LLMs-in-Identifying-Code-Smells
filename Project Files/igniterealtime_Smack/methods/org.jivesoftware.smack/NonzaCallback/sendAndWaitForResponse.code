static <SN extends Nonza,FN extends Nonza>SN sendAndWaitForResponse(NonzaCallback.Builder builder,Nonza nonza,Class<SN> successNonzaClass,Class<FN> failedNonzaClass) throws NoResponseException, NotConnectedException, InterruptedException, FailedNonzaException {
  NonzaResponseCallback<SN,FN> nonzaCallback=new NonzaResponseCallback<>(successNonzaClass,failedNonzaClass,builder);
  SN successNonza;
  try {
    nonzaCallback.connection.sendNonza(nonza);
    successNonza=nonzaCallback.waitForResponse();
  }
  finally {
    nonzaCallback.cancel();
  }
  return successNonza;
}
