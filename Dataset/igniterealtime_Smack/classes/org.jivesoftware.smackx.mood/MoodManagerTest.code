public class MoodManagerTest extends SmackTestSuite {
  @Test public void addMessageTest(){
    Message message=StanzaBuilder.buildMessage().build();
    MoodManager.addMoodToMessage(message,Mood.sad);
    assertTrue(message.hasExtension(MoodElement.ELEMENT,MoodElement.NAMESPACE));
    assertTrue(MoodElement.hasMoodElement(message));
    MoodElement element=MoodElement.fromMessage(message);
    assertNotNull(element);
    assertEquals(Mood.sad,element.getMood());
    assertFalse(element.hasConcretisation());
    assertFalse(element.hasText());
    message=StanzaBuilder.buildMessage().build();
    MoodManager.addMoodToMessage(message,Mood.happy,new MoodConcretisationTest.EcstaticMoodConcretisation());
    element=MoodElement.fromMessage(message);
    assertTrue(element.hasConcretisation());
  }
}
