protected void asyncGoLimited(final Runnable runnable){
  Runnable wrappedRunnable=new Runnable(){
    @Override public void run(){
      runnable.run();
synchronized (deferredAsyncRunnables) {
        Runnable defferredRunnable=deferredAsyncRunnables.poll();
        if (defferredRunnable == null) {
          currentAsyncRunnables--;
        }
 else {
          deferredAsyncRunnablesCount--;
          asyncGo(defferredRunnable);
        }
      }
    }
  }
;
synchronized (deferredAsyncRunnables) {
    if (currentAsyncRunnables < maxAsyncRunnables) {
      currentAsyncRunnables++;
      asyncGo(wrappedRunnable);
    }
 else {
      deferredAsyncRunnablesCount++;
      deferredAsyncRunnables.add(wrappedRunnable);
    }
    final int HIGH_WATERMARK=100;
    final int INFORM_WATERMARK=20;
    final int deferredAsyncRunnablesCount=this.deferredAsyncRunnablesCount;
    if (deferredAsyncRunnablesCount >= HIGH_WATERMARK && deferredAsyncRunnablesCountPrevious < HIGH_WATERMARK) {
      LOGGER.log(Level.WARNING,"High watermark of " + HIGH_WATERMARK + " simultaneous executing runnables reached");
    }
 else     if (deferredAsyncRunnablesCount >= INFORM_WATERMARK && deferredAsyncRunnablesCountPrevious < INFORM_WATERMARK) {
      LOGGER.log(Level.INFO,INFORM_WATERMARK + " simultaneous executing runnables reached");
    }
    deferredAsyncRunnablesCountPrevious=deferredAsyncRunnablesCount;
  }
}
