/** 
 * {@link io.lettuce.core.ScoredValueScanCursor} for scan cursor output.
 * @param < K > Key type.
 * @param < V > Value type.
 * @author Mark Paluch
 */
public class ScoredValueScanOutput<K,V> extends ScanOutput<K,V,ScoredValueScanCursor<V>> {
  private V value;
  public ScoredValueScanOutput(  RedisCodec<K,V> codec){
    super(codec,new ScoredValueScanCursor<V>());
  }
  @Override protected void setOutput(  ByteBuffer bytes){
    if (value == null) {
      value=codec.decodeValue(bytes);
      return;
    }
    double score=LettuceStrings.toDouble(decodeAscii(bytes));
    set(score);
  }
  @Override public void set(  double number){
    if (value != null) {
      output.getValues().add(ScoredValue.just(number,value));
    }
    value=null;
  }
}
