/** 
 * Decorator for recording Events to Record&Replay subsystem.
 */
public class RecordingEventSystemDecorator extends AbstractEventSystemDecorator {
  private final EventCatcher eventCatcher;
  private final RecordAndReplayCurrentStatus recordAndReplayCurrentStatus;
  public RecordingEventSystemDecorator(  EventSystem eventSystem,  EventCatcher eventCatcher,  RecordAndReplayCurrentStatus recordAndReplayCurrentStatus){
    super(eventSystem);
    this.eventCatcher=eventCatcher;
    this.recordAndReplayCurrentStatus=recordAndReplayCurrentStatus;
  }
  @Override public void send(  EntityRef entity,  Event event){
    if (currentThreadIsMain()) {
      if (recordAndReplayCurrentStatus.getStatus() == RecordAndReplayStatus.RECORDING) {
        eventCatcher.addEvent(new PendingEvent(entity,event));
      }
    }
    super.send(entity,event);
  }
  @Override public void send(  EntityRef entity,  Event event,  Component component){
    if (currentThreadIsMain()) {
      if (recordAndReplayCurrentStatus.getStatus() == RecordAndReplayStatus.RECORDING) {
        eventCatcher.addEvent(new PendingEvent(entity,event,component));
      }
    }
    super.send(entity,event,component);
  }
}
