public static final class ErrorsWhileSendingOrReceivingException extends StressTestFailedException {
  private static final long serialVersionUID=1L;
  public final Map<XMPPConnection,Exception> sendExceptions;
  public final Map<XMPPConnection,Exception> receiveExceptions;
  private ErrorsWhileSendingOrReceivingException(  Map<XMPPConnection,Exception> sendExceptions,  Map<XMPPConnection,Exception> receiveExceptions){
    super(createMessageFrom(sendExceptions,receiveExceptions));
    this.sendExceptions=sendExceptions;
    this.receiveExceptions=receiveExceptions;
  }
  private static String createMessageFrom(  Map<XMPPConnection,Exception> sendExceptions,  Map<XMPPConnection,Exception> receiveExceptions){
    StringBuilder sb=new StringBuilder(1024);
    sb.append("Exceptions while sending and/or receiving.");
    if (!sendExceptions.isEmpty()) {
      sb.append(" Send exxceptions: ");
      for (      Map.Entry<XMPPConnection,Exception> entry : sendExceptions.entrySet()) {
        sb.append(entry.getKey()).append(": ").append(entry.getValue()).append(';');
      }
    }
    if (!receiveExceptions.isEmpty()) {
      sb.append(" Receive exceptions: ");
      for (      Map.Entry<XMPPConnection,Exception> entry : receiveExceptions.entrySet()) {
        sb.append(entry.getKey()).append(": ").append(entry.getValue());
      }
    }
    return sb.toString();
  }
}
