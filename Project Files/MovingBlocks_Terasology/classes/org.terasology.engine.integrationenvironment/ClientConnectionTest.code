@IntegrationEnvironment(networkMode=NetworkMode.LISTEN_SERVER) public class ClientConnectionTest {
  private static final Logger logger=LoggerFactory.getLogger(ClientConnectionTest.class);
  @Test public void testClientConnection(  ModuleTestingHelper helper) throws IOException {
    Context clientContext=helper.createClient();
    List<TerasologyEngine> engines=helper.getEngines();
    Assertions.assertEquals(2,engines.size());
    logger.info("Engine 0 is {}",engines.get(0));
    logger.info("Engine 1 is {}",engines.get(1));
    Assertions.assertAll(engines.stream().map((engine) -> () -> Assertions.assertEquals(StateIngame.class,engine.getState().getClass(),"Unexpected engine state: " + engine + " is in state "+ engine.getState().toString())));
  }
}
