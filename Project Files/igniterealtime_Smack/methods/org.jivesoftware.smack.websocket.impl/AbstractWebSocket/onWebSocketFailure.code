protected void onWebSocketFailure(Throwable throwable){
  WebSocketException websocketException=new WebSocketException(throwable);
  if (future.wasSuccessful()) {
    connectionInternal.notifyConnectionError(websocketException);
  }
 else {
    future.setException(websocketException);
  }
}
