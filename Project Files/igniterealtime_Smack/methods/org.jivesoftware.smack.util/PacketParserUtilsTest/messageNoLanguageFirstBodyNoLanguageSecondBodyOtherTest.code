@Test public void messageNoLanguageFirstBodyNoLanguageSecondBodyOtherTest() throws FactoryConfigurationError, XmlPullParserException, IOException, Exception {
  String defaultLanguage=Stanza.getDefaultLanguage();
  String otherLanguage=determineNonDefaultLanguage();
  String control=XMLBuilder.create("message").namespace(StreamOpen.CLIENT_NAMESPACE).a("from","romeo@montague.lit/orchard").a("to","juliet@capulet.lit/balcony").a("id","zid615d9").a("type","chat").e("body").t(defaultLanguage).up().e("body").a("xml:lang",otherLanguage).t(otherLanguage).asString(outputProperties);
  Message message=PacketParserUtils.parseMessage(PacketParserUtils.getParserFor(control));
  assertEquals(defaultLanguage,message.getBody());
  assertEquals(defaultLanguage,message.getBody(null));
  assertEquals(otherLanguage,message.getBody(otherLanguage));
  assertEquals(2,message.getBodies().size());
  assertEquals(1,message.getBodyLanguages().size());
  assertXmlSimilar(control,message.toXML().toString());
}
