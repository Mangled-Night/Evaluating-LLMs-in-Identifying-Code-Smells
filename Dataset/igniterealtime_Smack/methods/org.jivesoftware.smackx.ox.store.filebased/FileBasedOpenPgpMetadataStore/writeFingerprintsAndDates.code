static void writeFingerprintsAndDates(Map<OpenPgpV4Fingerprint,Date> data,File destination) throws IOException {
  if (data == null || data.isEmpty()) {
    FileUtils.maybeDeleteFileOrThrow(destination);
    return;
  }
  FileUtils.maybeCreateFileWithParentDirectories(destination);
  BufferedWriter writer=null;
  try {
    OutputStream outputStream=FileUtils.prepareFileOutputStream(destination);
    OutputStreamWriter osw=new OutputStreamWriter(outputStream,Util.UTF8);
    writer=new BufferedWriter(osw);
    for (    OpenPgpV4Fingerprint fingerprint : data.keySet()) {
      Date date=data.get(fingerprint);
      String line=fingerprint.toString() + " " + (date != null ? XmppDateTime.formatXEP0082Date(date) : XmppDateTime.formatXEP0082Date(new Date()));
      writer.write(line);
      writer.newLine();
    }
  }
  finally {
    CloseableUtil.maybeClose(writer,LOGGER);
  }
}
