public HttpSession getOrCreateHttpSession(ChannelHandlerContext ctx,HttpRequest httpRequest){
  Attribute<HttpSession> attribute=ctx.channel().attr(SESSION_KEY);
  HttpSession httpSession=attribute.get();
  if (httpSession != null) {
    return httpSession;
  }
  httpSession=getSession(httpRequest);
  if (httpSession != null) {
    attribute.set(httpSession);
    return httpSession;
  }
  httpSession=newHttpSession();
  attribute.set(httpSession);
  return httpSession;
}
