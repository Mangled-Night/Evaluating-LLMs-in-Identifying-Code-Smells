/** 
 * Attempts to return the type of a parameter of a parameterised field. This uses compile-time information only - the type should be obtained from a field with a the generic types bound.
 * @return The type of the generic parameter at index for the given type, or null if it cannot be obtained.
 */
public static Type getTypeParameter(Type type,int index){
  if (!(type instanceof ParameterizedType)) {
    return null;
  }
  ParameterizedType parameterizedType=(ParameterizedType)type;
  if (index >= parameterizedType.getActualTypeArguments().length) {
    return null;
  }
  return parameterizedType.getActualTypeArguments()[index];
}
