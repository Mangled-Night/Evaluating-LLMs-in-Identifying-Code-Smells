private MamQueryPage(StanzaCollector stanzaCollector,MamFinIQ mamFin){
  this.mamFin=mamFin;
  List<Stanza> mamResultCarrierStanzas=stanzaCollector.getCollectedStanzasAfterCancelled();
  List<Message> mamResultCarrierMessages=new ArrayList<>(mamResultCarrierStanzas.size());
  List<MamResultExtension> mamResultExtensions=new ArrayList<>(mamResultCarrierStanzas.size());
  List<Forwarded<Message>> forwardedMessages=new ArrayList<>(mamResultCarrierStanzas.size());
  for (  Stanza mamResultStanza : mamResultCarrierStanzas) {
    Message resultMessage=(Message)mamResultStanza;
    mamResultCarrierMessages.add(resultMessage);
    MamElements.MamResultExtension mamResultExtension=MamElements.MamResultExtension.from(resultMessage);
    mamResultExtensions.add(mamResultExtension);
    forwardedMessages.add(mamResultExtension.getForwarded());
  }
  this.mamResultCarrierMessages=Collections.unmodifiableList(mamResultCarrierMessages);
  this.mamResultExtensions=Collections.unmodifiableList(mamResultExtensions);
  this.forwardedMessages=Collections.unmodifiableList(forwardedMessages);
  this.messages=Collections.unmodifiableList(Forwarded.extractMessagesFrom(forwardedMessages));
}
