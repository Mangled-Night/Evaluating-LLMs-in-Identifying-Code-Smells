/** 
 * Incoming OMEMO message.
 */
public static class Received extends OmemoMessage {
  private final String message;
  private final OmemoFingerprint sendersFingerprint;
  private final OmemoDevice senderDevice;
  private final boolean preKeyMessage;
  /** 
 * Create a new incoming OMEMO message.
 * @param element original OmemoElement
 * @param key message key (or transported key)
 * @param iv respective initialization vector
 * @param body decrypted body
 * @param sendersFingerprint OmemoFingerprint of the senders identityKey
 * @param senderDevice OmemoDevice of the sender
 * @param preKeyMessage if this was a preKeyMessage or not
 */
  Received(  OmemoElement element,  byte[] key,  byte[] iv,  String body,  OmemoFingerprint sendersFingerprint,  OmemoDevice senderDevice,  boolean preKeyMessage){
    super(element,key,iv);
    this.message=body;
    this.sendersFingerprint=sendersFingerprint;
    this.senderDevice=senderDevice;
    this.preKeyMessage=preKeyMessage;
  }
  /** 
 * Return the decrypted body of the message.
 * @return decrypted body
 */
  public String getBody(){
    return message;
  }
  /** 
 * Return the fingerprint of the messages sender device.
 * @return fingerprint of sender
 */
  public OmemoFingerprint getSendersFingerprint(){
    return sendersFingerprint;
  }
  /** 
 * Return the OmemoDevice which sent the message.
 * @return OMEMO device that sent the message.
 */
  public OmemoDevice getSenderDevice(){
    return senderDevice;
  }
  /** 
 * Return true, if this message was sent as a preKeyMessage.
 * @return preKeyMessage or not
 */
  boolean isPreKeyMessage(){
    return preKeyMessage;
  }
  /** 
 * Return true, if the message was a KeyTransportMessage. A KeyTransportMessage is a OmemoMessage without a payload.
 * @return keyTransportMessage?
 */
  public boolean isKeyTransportMessage(){
    return message == null;
  }
}
