/** 
 * Test correct functionality of isStale method.
 * @throws XmppStringprepException if the provided string is invalid.
 */
@Test public void isStaleDeviceTest() throws XmppStringprepException {
  OmemoDevice user=new OmemoDevice(JidCreate.bareFrom("alice@wonderland.lit"),123);
  OmemoDevice other=new OmemoDevice(JidCreate.bareFrom("bob@builder.tv"),444);
  Date now=new Date();
  Date deleteMe=new Date(now.getTime() - ((DELETE_STALE + 1) * ONE_HOUR));
  assertTrue(OmemoService.isStale(user,other,deleteMe,DELETE_STALE));
  assertFalse(OmemoService.isStale(user,user,deleteMe,DELETE_STALE));
  assertFalse(OmemoService.isStale(user,other,null,DELETE_STALE));
}
