public void testCompleteJmf(){
  XMPPTCPConnection x0=getConnection(0);
  XMPPTCPConnection x1=getConnection(1);
  for (int i=0; i < 1; i++)   try {
    ICETransportManager icetm0=new ICETransportManager(x0,"jivesoftware.com",3478);
    ICETransportManager icetm1=new ICETransportManager(x1,"jivesoftware.com",3478);
    JingleMediaManager jingleMediaManager0=new JmfMediaManager(icetm0);
    JingleMediaManager jingleMediaManager1=new JmfMediaManager(icetm1);
    List<JingleMediaManager> jml0=new ArrayList<JingleMediaManager>();
    List<JingleMediaManager> jml1=new ArrayList<JingleMediaManager>();
    jml0.add(jingleMediaManager0);
    jml1.add(jingleMediaManager1);
    final JingleManager jm0=new JingleManager(x0,jml0);
    final JingleManager jm1=new JingleManager(x1,jml1);
    jm0.addCreationListener(icetm0);
    jm1.addCreationListener(icetm1);
    JingleSessionRequestListener jingleSessionRequestListener=new JingleSessionRequestListener(){
      public void sessionRequested(      final JingleSessionRequest request){
        try {
          JingleSession session=request.accept();
          session.startIncoming();
        }
 catch (        XMPPException e) {
          LOGGER.log(Level.WARNING,"exception",e);
        }
      }
    }
;
    jm1.addJingleSessionRequestListener(jingleSessionRequestListener);
    JingleSession js0=jm0.createOutgoingJingleSession(x1.getUser());
    js0.startOutgoing();
    Thread.sleep(20000);
    JingleSession incomingJingleSession=jm1.getSession(js0.getConnection().getUser());
    Thread.sleep(15000);
    js0.terminate();
    jm1.removeJingleSessionRequestListener(jingleSessionRequestListener);
    Thread.sleep(60000);
  }
 catch (  Exception e) {
    LOGGER.log(Level.WARNING,"exception",e);
  }
}
