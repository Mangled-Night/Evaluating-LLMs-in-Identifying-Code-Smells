class EnumTypeHandlerSerializerTest {
  enum TestEnum {  NON_NULL}
  @Test void testNullValue() throws Exception {
    PersistedData nullData=mock(PersistedData.class);
    when(nullData.isNull()).thenReturn(true);
    PersistedDataSerializer persistedDataSerializer=mock(PersistedDataSerializer.class);
    when(persistedDataSerializer.serializeNull()).thenReturn(nullData);
    EnumTypeHandler<TestEnum> handler=new EnumTypeHandler<>(TestEnum.class);
    PersistedData serializedNull=handler.serialize(null,persistedDataSerializer);
    assertEquals(nullData,serializedNull);
    assertFalse(handler.deserialize(nullData).isPresent());
  }
  @Test void testNonNullValue() throws Exception {
    PersistedData data=mock(PersistedData.class);
    when(data.getAsString()).thenReturn(TestEnum.NON_NULL.toString());
    when(data.isString()).thenReturn(true);
    PersistedDataSerializer persistedDataSerializer=mock(PersistedDataSerializer.class);
    when(persistedDataSerializer.serialize(TestEnum.NON_NULL.toString())).thenReturn(data);
    EnumTypeHandler<TestEnum> handler=new EnumTypeHandler<>(TestEnum.class);
    PersistedData serializedNonNull=handler.serialize(TestEnum.NON_NULL,persistedDataSerializer);
    assertEquals(data,serializedNonNull);
    TestEnum deserializedValue=handler.deserialize(data).get();
    assertEquals(TestEnum.NON_NULL,deserializedValue);
  }
}
