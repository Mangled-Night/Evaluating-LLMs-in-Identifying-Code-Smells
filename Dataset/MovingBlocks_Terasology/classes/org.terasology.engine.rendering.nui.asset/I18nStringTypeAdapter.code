private static final class I18nStringTypeAdapter implements JsonDeserializer<String> {
  private final TranslationSystem translationSystem;
  private final Locale otherLocale;
  I18nStringTypeAdapter(  TranslationSystem translationSystem,  Locale otherLocale){
    this.translationSystem=translationSystem;
    this.otherLocale=otherLocale;
  }
  @Override public String deserialize(  JsonElement json,  Type typeOfT,  JsonDeserializationContext context) throws JsonParseException {
    String text=json.getAsString();
    return otherLocale == null ? translationSystem.translate(text) : translationSystem.translate(text,otherLocale);
  }
}
