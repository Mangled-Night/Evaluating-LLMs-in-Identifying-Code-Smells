/** 
 * Will a user recieve a message from another after only sending the user a directed presence, or will Wildfire intercept for offline storage? User1 becomes lines. User0 never sent an available presence to the server but instead sent one to User1. User1 sends a message to User0. Should User0 get the message?
 */
public void testDirectPresence(){
  getConnection(1).sendStanza(new Presence(Presence.Type.available));
  Presence presence=new Presence(Presence.Type.available);
  presence.setTo(getBareJID(1));
  getConnection(0).sendStanza(presence);
  StanzaCollector collector=getConnection(0).createStanzaCollector(new MessageTypeFilter(Message.Type.chat));
  try {
    getConnection(1).getChatManager().createChat(getBareJID(0),null).sendMessage("Test 1");
  }
 catch (  XMPPException e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
  Message message=(Message)collector.nextResult(2500);
  assertNotNull("Message not recieved from remote user",message);
}
