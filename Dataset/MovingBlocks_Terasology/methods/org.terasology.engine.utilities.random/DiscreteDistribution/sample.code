public T sample(Random rand){
  if (entries.isEmpty()) {
    return null;
  }
  double n=rand.nextDouble(0,chanceSum);
  int i=entries.size() / 2;
  int d=entries.size() / 2;
  while (true) {
    if (cumulativeChances.get(i) > n && (i == 0 || cumulativeChances.get(i - 1) <= n)) {
      return entries.get(i);
    }
 else {
      d/=2;
      if (d <= 0) {
        d=1;
      }
      if (cumulativeChances.get(i) > n) {
        i-=d;
      }
 else {
        i+=d;
      }
      if (i < 0) {
        return entries.get(0);
      }
      if (i >= cumulativeChances.size()) {
        return entries.get(entries.size() - 1);
      }
    }
  }
}
