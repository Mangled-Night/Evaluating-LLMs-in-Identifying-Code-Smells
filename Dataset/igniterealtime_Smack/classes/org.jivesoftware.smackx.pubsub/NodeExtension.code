/** 
 * A class which represents a common element within the pubsub defined schemas.  One which has a <b>node</b> as an attribute.  This class is used on its own as well as a base class for many others, since the node is a central concept to most pubsub functionality.
 * @author Robin Collier
 */
public class NodeExtension implements XmlElement {
  private final PubSubElementType element;
  private final String node;
  /** 
 * Constructs a <code>NodeExtension</code> with an element name specified by  {@link PubSubElementType} and the specified node id.
 * @param elem Defines the element name and namespace
 * @param nodeId Specifies the id of the node
 */
  public NodeExtension(  PubSubElementType elem,  String nodeId){
    element=elem;
    this.node=nodeId;
  }
  /** 
 * Constructs a <code>NodeExtension</code> with an element name specified by  {@link PubSubElementType}.
 * @param elem Defines the element name and namespace
 */
  public NodeExtension(  PubSubElementType elem){
    this(elem,null);
  }
  /** 
 * Gets the node id.
 * @return The node id
 */
  public String getNode(){
    return node;
  }
  @Override public String getElementName(){
    return element.getElementName();
  }
  public PubSubNamespace getPubSubNamespace(){
    return element.getNamespace();
  }
  @Override public final String getNamespace(){
    return getPubSubNamespace().getXmlns();
  }
  @Override public final XmlStringBuilder toXML(  XmlEnvironment enclosingNamespace){
    XmlStringBuilder xml=new XmlStringBuilder(this,enclosingNamespace);
    xml.optAttribute("node",node);
    addXml(xml);
    return xml;
  }
  protected void addXml(  XmlStringBuilder xml){
    xml.closeEmptyElement();
  }
  @Override public String toString(){
    return getClass().getName() + " - content [" + toXML()+ "]";
  }
}
