private void emit(){
  if (GATE_UPDATER.compareAndSet(this,GATE_OPEN,GATE_CLOSED)) {
    onEmit(new Emission<V>(){
      @Override public void success(      V value){
        selfFuture.complete(value);
      }
      @Override public void error(      Throwable exception){
        selfFuture.completeExceptionally(exception);
      }
    }
);
  }
}
