/** 
 * Computes the color of the facet at a given world coordinate.
 * @param facet the underlying facet
 * @param x the world x coordinate
 * @param z the world z coordinate
 * @return the color at the given world coords. Never <code>null</code>.
 */
protected Color getColor(FieldFacet2D facet,int x,int z){
  double value=facet.get(x,z);
  if (Double.isFinite(value)) {
    int round=DoubleMath.roundToInt(config.offset + config.scale * value,RoundingMode.HALF_UP);
    int idx=TeraMath.clamp(round,0,255);
    return GRAYS.get(idx);
  }
 else {
    return MISSING;
  }
}
