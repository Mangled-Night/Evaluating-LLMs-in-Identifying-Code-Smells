/** 
 * Try to get a matching chat for the given user JID, based on the  {@link MatchMode}. <li>NONE - return null <li>SUPPLIED_JID - match the jid in the from field of the message exactly. <li>BARE_JID - if not match for from field, try the bare jid.
 * @param userJID jid in the from field of message.
 * @return Matching chat, or null if no match found.
 */
private Chat getUserChat(Jid userJID){
  if (matchMode == MatchMode.NONE) {
    return null;
  }
  if (userJID == null) {
    return null;
  }
  Chat match=jidChats.get(userJID);
  if (match == null && (matchMode == MatchMode.BARE_JID)) {
    EntityBareJid entityBareJid=userJID.asEntityBareJidIfPossible();
    if (entityBareJid != null) {
      match=baseJidChats.get(entityBareJid);
    }
  }
  return match;
}
