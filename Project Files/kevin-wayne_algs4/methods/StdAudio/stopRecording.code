/** 
 * Turns off audio recording and returns the recorded samples.
 * @return the array of recorded samples
 */
public static double[] stopRecording(){
  if (isRecording) {
    double[] results=recordedSamples.toArray();
    isRecording=false;
    recordedSamples=null;
    return results;
  }
 else {
    throw new IllegalStateException("stopRecording() must be called after calling startRecording()");
  }
}
