/** 
 * Get the fingerprint of a contacts device.
 * @param device contacts OmemoDevice
 * @return fingerprint of the given OMEMO device.
 * @throws CannotEstablishOmemoSessionException if we have no session yet, and are unable to create one.
 * @throws SmackException.NotLoggedInException if the XMPP connection is not authenticated.
 * @throws CorruptedOmemoKeyException if the copy of the fingerprint we have is corrupted.
 * @throws SmackException.NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 * @throws SmackException.NoResponseException if there was no response from the remote entity.
 * @throws IOException if an I/O error occurred.
 */
public synchronized OmemoFingerprint getFingerprint(OmemoDevice device) throws CannotEstablishOmemoSessionException, SmackException.NotLoggedInException, CorruptedOmemoKeyException, SmackException.NotConnectedException, InterruptedException, SmackException.NoResponseException, IOException {
  if (getOwnJid() == null) {
    throw new SmackException.NotLoggedInException();
  }
  if (device.equals(getOwnDevice())) {
    return getOwnFingerprint();
  }
  return getOmemoService().getOmemoStoreBackend().getFingerprintAndMaybeBuildSession(new LoggedInOmemoManager(this),device);
}
