public static InputStream getStreamForClasspathFile(String path,ClassLoader loader) throws IOException {
  List<ClassLoader> classLoaders=getClassLoaders();
  if (loader != null) {
    classLoaders.add(0,loader);
  }
  for (  ClassLoader classLoader : classLoaders) {
    InputStream is=classLoader.getResourceAsStream(path);
    if (is != null) {
      return is;
    }
  }
  throw new IOException("Unable to get '" + path + "' from classpath. Tried ClassLoaders:"+ classLoaders);
}
