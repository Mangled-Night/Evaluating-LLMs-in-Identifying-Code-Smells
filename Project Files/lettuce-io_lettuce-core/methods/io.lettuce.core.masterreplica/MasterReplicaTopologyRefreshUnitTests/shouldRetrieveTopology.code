@Test void shouldRetrieveTopology(){
  MasterReplicaTopologyRefresh refresh=new MasterReplicaTopologyRefresh(connectionFactory,executorService,provider);
  CompletableFuture<StatefulRedisConnection<String,String>> master=CompletableFuture.completedFuture(connection);
  CompletableFuture<StatefulRedisConnection<String,String>> replica=CompletableFuture.completedFuture(connection);
  when(connectionFactory.connectToNodeAsync(any(),any())).thenReturn((CompletableFuture)master,(CompletableFuture)replica);
  RedisURI redisURI=new RedisURI();
  redisURI.setTimeout(Duration.ofMillis(1));
  List<RedisNodeDescription> nodes=refresh.getNodes(redisURI).block();
  assertThat(nodes).hasSize(2);
}
