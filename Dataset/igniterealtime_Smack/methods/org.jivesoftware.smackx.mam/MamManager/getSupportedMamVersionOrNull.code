private MamVersion getSupportedMamVersionOrNull() throws XMPPErrorException, NotConnectedException, NoResponseException, InterruptedException {
  if (mamVersion != null) {
    return mamVersion;
  }
  DiscoverInfo info=serviceDiscoveryManager.discoverInfo(getArchiveAddress());
  for (  MamVersion v : MamVersion.values()) {
    if (info.containsFeature(v.getNamespace())) {
      mamVersion=v;
      break;
    }
  }
  return mamVersion;
}
