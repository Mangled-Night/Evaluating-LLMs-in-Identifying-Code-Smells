public void testSendNodeTrPay_WithOutPayload() throws XMPPException {
  LeafNode node=getPubnode(false,true);
  try {
    node.send(new Item());
    fail("Exception should be thrown when there is no payload");
  }
 catch (  XMPPException e) {
    XMPPError err=e.getStanzaError();
    assertTrue(err.getType().equals(XMPPError.Type.MODIFY));
    assertTrue(err.getCondition().equals(Condition.bad_request.toString()));
    assertNotNull(err.getExtension("payload-required",PubSubNamespace.ERROR.getXmlns()));
  }
  try {
    node.send(new Item("test" + System.currentTimeMillis()));
    fail("Exception should be thrown when there is no payload");
  }
 catch (  XMPPException e) {
    XMPPError err=e.getStanzaError();
    assertTrue(err.getType().equals(XMPPError.Type.MODIFY));
    assertTrue(err.getCondition().equals(Condition.bad_request.toString()));
    assertNotNull(err.getExtension("payload-required",PubSubNamespace.ERROR.getXmlns()));
  }
}
