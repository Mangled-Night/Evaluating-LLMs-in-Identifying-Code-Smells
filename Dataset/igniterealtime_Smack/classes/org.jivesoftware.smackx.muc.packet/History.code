/** 
 * The History class controls the number of characters or messages to receive when entering a room.
 * @author Gaston Dombiak
 */
public static class History implements NamedElement {
  public static final String ELEMENT="history";
  private final int maxChars;
  private final int maxStanzas;
  private final int seconds;
  private final Date since;
  public History(  int maxChars,  int maxStanzas,  int seconds,  Date since){
    if (maxChars < 0 && maxStanzas < 0 && seconds < 0 && since == null) {
      throw new IllegalArgumentException();
    }
    this.maxChars=maxChars;
    this.maxStanzas=maxStanzas;
    this.seconds=seconds;
    this.since=since;
  }
  /** 
 * Returns the total number of characters to receive in the history.
 * @return total number of characters to receive in the history.
 */
  public int getMaxChars(){
    return maxChars;
  }
  /** 
 * Returns the total number of messages to receive in the history.
 * @return the total number of messages to receive in the history.
 */
  public int getMaxStanzas(){
    return maxStanzas;
  }
  /** 
 * Returns the number of seconds to use to filter the messages received during that time. In other words, only the messages received in the last "X" seconds will be included in the history.
 * @return the number of seconds to use to filter the messages received during that time.
 */
  public int getSeconds(){
    return seconds;
  }
  /** 
 * Returns the since date to use to filter the messages received during that time. In other words, only the messages received since the datetime specified will be included in the history.
 * @return the since date to use to filter the messages received during that time.
 */
  public Date getSince(){
    return since;
  }
  @Override public XmlStringBuilder toXML(  org.jivesoftware.smack.packet.XmlEnvironment enclosingNamespace){
    XmlStringBuilder xml=new XmlStringBuilder(this);
    xml.optIntAttribute("maxchars",getMaxChars());
    xml.optIntAttribute("maxstanzas",getMaxStanzas());
    xml.optIntAttribute("seconds",getSeconds());
    if (getSince() != null) {
      xml.attribute("since",XmppDateTime.formatXEP0082Date(getSince()));
    }
    xml.closeEmptyElement();
    return xml;
  }
  @Override public String getElementName(){
    return ELEMENT;
  }
}
