/** 
 * Test priority generated by STUN lib
 * @throws Exception if an exception occurs.
 */
public void testICEPriority() throws Exception {
  String first="";
  for (int i=0; i < 100; i++) {
    ICENegociator cc=new ICENegociator((short)1);
    cc.gatherCandidateAddresses();
    cc.prioritizeCandidates();
    for (    Candidate candidate : cc.getSortedCandidates()) {
      short nicNum=0;
      try {
        Enumeration<NetworkInterface> nics=NetworkInterface.getNetworkInterfaces();
        short tempNic=0;
        NetworkInterface nic=NetworkInterface.getByInetAddress(candidate.getAddress().getInetAddress());
        while (nics.hasMoreElements()) {
          NetworkInterface checkNIC=nics.nextElement();
          if (checkNIC.equals(nic)) {
            nicNum=tempNic;
            break;
          }
          i++;
        }
      }
 catch (      SocketException e1) {
        e1.printStackTrace();
      }
      try {
        TransportCandidate transportCandidate=new ICECandidate(candidate.getAddress().getInetAddress().getHostAddress(),1,nicNum,"1",candidate.getPort(),"1",candidate.getPriority(),ICECandidate.Type.prflx);
        transportCandidate.setLocalIp(candidate.getBase().getAddress().getInetAddress().getHostAddress());
        System.out.println("C: " + candidate.getAddress().getInetAddress() + "|"+ candidate.getBase().getAddress().getInetAddress()+ " p:"+ candidate.getPriority());
      }
 catch (      UtilityException e) {
        LOGGER.log(Level.WARNING,"exception",e);
      }
catch (      UnknownHostException e) {
        LOGGER.log(Level.WARNING,"exception",e);
      }
    }
    Candidate candidate=cc.getSortedCandidates().get(0);
    String temp="C: " + candidate.getAddress().getInetAddress() + "|"+ candidate.getBase().getAddress().getInetAddress()+ " p:"+ candidate.getPriority();
    if (first.equals(""))     first=temp;
    assertEquals(first,temp);
    first=temp;
  }
}
