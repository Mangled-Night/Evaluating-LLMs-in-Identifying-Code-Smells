/** 
 * Release all memory for the given task and mark it as inactive (e.g. when a task ends).
 * @return the number of bytes freed.
 */
public long releaseAllMemoryForeConnection(long connAttemptId){
synchronized (lock) {
    long numBytesToFree=getMemoryUsageConnection(connAttemptId);
    releaseMemory(numBytesToFree,connAttemptId);
    return numBytesToFree;
  }
}
