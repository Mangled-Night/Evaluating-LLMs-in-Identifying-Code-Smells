/** 
 * Builder class for  {@link XmppWebSocketTransportModuleDescriptor}. <br> To obtain an instance of  {@link XmppWebSocketTransportModuleDescriptor.Builder}, use  {@link XmppWebSocketTransportModuleDescriptor#getBuilder(ModularXmppClientToServerConnectionConfiguration.Builder)} method.<br> Use  {@link Builder#explicitlySetWebSocketEndpoint(URI)} to configure the URI of an endpoint as a backup in case connection couldn't be established with endpoints through http lookup.<br> Use  {@link Builder#explicitlySetWebSocketEndpointAndDiscovery(URI,boolean)} to configure endpoint and disallow websocket endpoint discovery through http lookup.By default,  {@link Builder#performWebSocketEndpointDiscovery} is set to true.<br> Use  {@link Builder#build()} to obtain {@link XmppWebSocketTransportModuleDescriptor}.
 */
public static final class Builder extends ModularXmppClientToServerConnectionModuleDescriptor.Builder {
  private boolean performWebSocketEndpointDiscovery=true;
  private boolean implicitWebSocketEndpoint=true;
  private URI uri;
  private WebSocketFactory webSocketFactory;
  private Builder(  ModularXmppClientToServerConnectionConfiguration.Builder connectionConfigurationBuilder){
    super(connectionConfigurationBuilder);
  }
  public Builder explicitlySetWebSocketEndpoint(  URI endpoint){
    return explicitlySetWebSocketEndpointAndDiscovery(endpoint,true);
  }
  public Builder explicitlySetWebSocketEndpointAndDiscovery(  URI endpoint,  boolean performWebSocketEndpointDiscovery){
    Objects.requireNonNull(endpoint,"Provided endpoint URI must not be null");
    this.uri=endpoint;
    this.performWebSocketEndpointDiscovery=performWebSocketEndpointDiscovery;
    return this;
  }
  public Builder explicitlySetWebSocketEndpoint(  CharSequence endpoint) throws URISyntaxException {
    URI endpointUri=new URI(endpoint.toString());
    return explicitlySetWebSocketEndpoint(endpointUri);
  }
  public Builder explicitlySetWebSocketEndpointAndDiscovery(  CharSequence endpoint,  boolean performWebSocketEndpointDiscovery) throws URISyntaxException {
    URI endpointUri=new URI(endpoint.toString());
    return explicitlySetWebSocketEndpointAndDiscovery(endpointUri,performWebSocketEndpointDiscovery);
  }
  public Builder disableImplicitWebsocketEndpoint(){
    implicitWebSocketEndpoint=false;
    return this;
  }
  public Builder setWebSocketFactory(  WebSocketFactory webSocketFactory){
    Objects.requireNonNull(webSocketFactory);
    this.webSocketFactory=webSocketFactory;
    return this;
  }
  @Override public ModularXmppClientToServerConnectionModuleDescriptor build(){
    return new XmppWebSocketTransportModuleDescriptor(this);
  }
}
