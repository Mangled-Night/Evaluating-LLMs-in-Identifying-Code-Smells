private static Fragment getTopIsInStack(@NonNull final FragmentManager fm,Fragment parentFragment,final boolean isInStack){
  List<Fragment> fragments=getFragments(fm);
  for (int i=fragments.size() - 1; i >= 0; --i) {
    Fragment fragment=fragments.get(i);
    if (fragment != null) {
      if (isInStack) {
        Bundle args=fragment.getArguments();
        if (args != null && args.getBoolean(ARGS_IS_ADD_STACK)) {
          return getTopIsInStack(fragment.getChildFragmentManager(),fragment,true);
        }
      }
 else {
        return getTopIsInStack(fragment.getChildFragmentManager(),fragment,false);
      }
    }
  }
  return parentFragment;
}
