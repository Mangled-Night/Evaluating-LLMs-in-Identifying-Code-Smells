/** 
 * Your ping to the server
 * @param sender Sender of command
 * @return String containing ping or error message
 */
@Command(shortDescription="Your ping to the server",helpText="The time it takes the packet " + "to reach the server and back",requiredPermission=PermissionManager.NO_PERMISSION) public String ping(@Sender EntityRef sender){
  Server server=networkSystem.getServer();
  if (server == null) {
    if (networkSystem.getMode().isServer()) {
      return "Your player is running on the server";
    }
 else {
      return "Please make sure you are connected to an online server (singleplayer doesn't count)";
    }
  }
  String[] remoteAddress=server.getRemoteAddress().split("-");
  String address=remoteAddress[1];
  int port=Integer.parseInt(remoteAddress[2]);
  try {
    PingService pingService=new PingService(address,port);
    long delay=pingService.call();
    return String.format("%d ms",delay);
  }
 catch (  UnknownHostException e) {
    return String.format("Error: Unknown host \"%s\" at %s:%s -- %s",remoteAddress[0],remoteAddress[1],remoteAddress[2],e);
  }
catch (  IOException e) {
    return String.format("Error: Failed to ping server \"%s\" at %s:%s -- %s",remoteAddress[0],remoteAddress[1],remoteAddress[2],e);
  }
}
