public class MamFinProviderTest extends MamTest {
  static final String exmapleMamFinXml="<fin xmlns='urn:xmpp:mam:2' stable='true'>" + "<set xmlns='http://jabber.org/protocol/rsm'>" + "<max>10</max>"+ "<after>09af3-cc343-b409f</after>"+ "</set>"+ "</fin>";
  @Test public void checkMamFinProvider() throws Exception {
    XmlPullParser parser=PacketParserUtils.getParserFor(exmapleMamFinXml);
    MamFinIQ mamFinIQ=new MamFinIQProvider().parse(parser,null);
    assertFalse(mamFinIQ.isComplete());
    assertTrue(mamFinIQ.isStable());
    assertNull(mamFinIQ.getQueryId());
    RSMSet rsmSet=mamFinIQ.getRSMSet();
    assertEquals(rsmSet.getAfter(),"09af3-cc343-b409f");
    assertEquals(rsmSet.getMax(),10);
  }
  @Test public void checkQueryLimitedResults() throws Exception {
    final String IQ_LIMITED_RESULTS_EXAMPLE="<iq type='result' id='u29303'>" + "<fin xmlns='urn:xmpp:mam:2' complete='true'>" + "<set xmlns='http://jabber.org/protocol/rsm'>"+ "<first index='0'>23452-4534-1</first>"+ "<last>390-2342-22</last>"+ "<count>16</count>"+ "</set>"+ "</fin>"+ "</iq>";
    IQ iq=PacketParserUtils.parseStanza(IQ_LIMITED_RESULTS_EXAMPLE);
    MamFinIQ mamFinIQ=(MamFinIQ)iq;
    assertEquals(mamFinIQ.getType(),IQ.Type.result);
    assertTrue(mamFinIQ.isComplete());
    assertEquals(mamFinIQ.getRSMSet().getCount(),16);
    assertEquals(mamFinIQ.getRSMSet().getFirst(),"23452-4534-1");
    assertEquals(mamFinIQ.getRSMSet().getFirstIndex(),0);
    assertEquals(mamFinIQ.getRSMSet().getLast(),"390-2342-22");
  }
}
