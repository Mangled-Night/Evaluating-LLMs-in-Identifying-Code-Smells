void doWithConnection(Consumer<? super T> action){
  if (isComplete()) {
    action.accept(connection);
  }
 else {
    future.thenAccept(action);
  }
}
void doWithConnection(BiConsumer<? super K,? super T> action){
  if (isComplete()) {
    action.accept(key,connection);
  }
 else {
    future.thenAccept(c -> action.accept(key,c));
  }
}
