@Test public void testAddAdjacentLights(){
  StubPropagatorWorldView worldView=new StubPropagatorWorldView(testingRegion,air);
  worldView.setBlockAt(new Vector3i(1,0,0),mediumLight);
  worldView.setBlockAt(new Vector3i(0,0,0),mediumLight);
  BatchPropagator propagator=new StandardBatchPropagator(lightRules,worldView);
  propagator.process(new BlockChange(new Vector3i(1,0,0),air,mediumLight),new BlockChange(ZERO_VECTOR,air,mediumLight));
  for (int i=0; i < fullLight.getLuminance() + 1; ++i) {
    for (    Vector3ic pos : Diamond3iIterable.shell(new Vector3i(0,0,0),i).build()) {
      long dist=Math.min(new Vector3i(0,0,0).gridDistance(pos),new Vector3i(1,0,0).gridDistance(pos));
      byte expectedLuminance=(byte)Math.max(mediumLight.getLuminance() - dist,0);
      assertEquals(expectedLuminance,worldView.getValueAt(pos));
    }
  }
}
