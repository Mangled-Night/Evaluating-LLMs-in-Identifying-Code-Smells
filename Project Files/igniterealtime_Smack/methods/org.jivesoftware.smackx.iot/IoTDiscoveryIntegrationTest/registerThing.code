public static ThingState registerThing(IoTDiscoveryManager iotDiscoveryManager,Thing thing) throws XMPPErrorException, InterruptedException, SmackException.SmackMessageException, NotConnectedException, NoResponseException {
  int attempts=0;
  while (true) {
    try {
      return iotDiscoveryManager.registerThing(thing);
    }
 catch (    IoTClaimedException e) {
      iotDiscoveryManager.unregister();
    }
    if (attempts++ > 3) {
      throw new SmackException.SmackMessageException("Could no register thing");
    }
  }
}
