private void writeImageToFile(BufferedImage image,Path path,String format){
  AccessController.doPrivileged((PrivilegedAction<Object>)() -> {
    try (OutputStream out=new BufferedOutputStream(Files.newOutputStream(path))){
      ImageIO.write(image,format,out);
      logger.info("Screenshot saved to {}! ",path);
    }
 catch (    IOException e) {
      logger.warn("Failed to save screenshot!",e);
    }
    return null;
  }
);
}
