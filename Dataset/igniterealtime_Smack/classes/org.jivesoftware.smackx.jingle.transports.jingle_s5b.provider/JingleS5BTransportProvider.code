/** 
 * Provider for JingleSocks5BytestreamTransport elements.
 */
public class JingleS5BTransportProvider extends JingleContentTransportProvider<JingleS5BTransport> {
  @Override public JingleS5BTransport parse(  XmlPullParser parser,  int initialDepth,  XmlEnvironment xmlEnvironment) throws XmlPullParserException, IOException {
    JingleS5BTransport.Builder builder=JingleS5BTransport.getBuilder();
    String streamId=parser.getAttributeValue(null,JingleS5BTransport.ATTR_SID);
    builder.setStreamId(streamId);
    String dstAddr=parser.getAttributeValue(null,JingleS5BTransport.ATTR_DSTADDR);
    builder.setDestinationAddress(dstAddr);
    String mode=parser.getAttributeValue(null,JingleS5BTransport.ATTR_MODE);
    if (mode != null) {
      builder.setMode(mode.equals(udp.toString()) ? udp : tcp);
    }
    JingleS5BTransportCandidate.Builder cb;
    outerloop:     while (true) {
      XmlPullParser.TagEvent tag=parser.nextTag();
switch (tag) {
case START_ELEMENT:
{
          String name=parser.getName();
switch (name) {
case JingleContentTransportCandidate.ELEMENT:
            cb=JingleS5BTransportCandidate.getBuilder();
          cb.setCandidateId(parser.getAttributeValue(null,ATTR_CID));
        cb.setHost(parser.getAttributeValue(null,ATTR_HOST));
      cb.setJid(parser.getAttributeValue(null,ATTR_JID));
    cb.setPriority(Integer.parseInt(parser.getAttributeValue(null,ATTR_PRIORITY)));
  String portString=parser.getAttributeValue(null,ATTR_PORT);
if (portString != null) {
  cb.setPort(Integer.parseInt(portString));
}
String typeString=parser.getAttributeValue(null,ATTR_TYPE);
if (typeString != null) {
cb.setType(JingleS5BTransportCandidate.Type.fromString(typeString));
}
builder.addTransportCandidate(cb.build());
break;
case JingleS5BTransportInfo.CandidateActivated.ELEMENT:
builder.setTransportInfo(new JingleS5BTransportInfo.CandidateActivated(parser.getAttributeValue(null,JingleS5BCandidateTransportInfo.ATTR_CID)));
break;
case JingleS5BTransportInfo.CandidateUsed.ELEMENT:
builder.setTransportInfo(new JingleS5BTransportInfo.CandidateUsed(parser.getAttributeValue(null,JingleS5BCandidateTransportInfo.ATTR_CID)));
break;
case JingleS5BTransportInfo.CandidateError.ELEMENT:
builder.setTransportInfo(JingleS5BTransportInfo.CandidateError.INSTANCE);
break;
case JingleS5BTransportInfo.ProxyError.ELEMENT:
builder.setTransportInfo(JingleS5BTransportInfo.ProxyError.INSTANCE);
break;
}
}
break;
case END_ELEMENT:
{
if (parser.getDepth() == initialDepth) {
break outerloop;
}
}
break;
}
}
return builder.build();
}
}
