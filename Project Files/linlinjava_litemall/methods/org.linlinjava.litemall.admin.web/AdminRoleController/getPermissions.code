/** 
 * 管理员的权限情况
 * @return 系统所有权限列表、角色权限、管理员已分配权限
 */
@RequiresPermissions("admin:role:permission:get") @RequiresPermissionsDesc(menu={"系统管理","角色管理"},button="权限详情") @GetMapping("/permissions") public Object getPermissions(Integer roleId){
  List<PermVo> systemPermissions=getSystemPermissions();
  Set<String> assignedPermissions=null;
  if (permissionService.checkSuperPermission(roleId)) {
    getSystemPermissions();
    assignedPermissions=systemPermissionsString;
  }
 else {
    assignedPermissions=permissionService.queryByRoleId(roleId);
  }
  Subject currentUser=SecurityUtils.getSubject();
  LitemallAdmin currentAdmin=(LitemallAdmin)currentUser.getPrincipal();
  Integer[] roles=currentAdmin.getRoleIds();
  List<Integer> roleIds=Arrays.asList(roles);
  Set<String> curPermissions=null;
  if (!permissionService.checkSuperPermission(roleIds)) {
    curPermissions=permissionService.queryByRoleId(roleIds);
  }
  Map<String,Object> data=new HashMap<>();
  data.put("systemPermissions",systemPermissions);
  data.put("assignedPermissions",assignedPermissions);
  data.put("curPermissions",curPermissions);
  return ResponseUtil.ok(data);
}
