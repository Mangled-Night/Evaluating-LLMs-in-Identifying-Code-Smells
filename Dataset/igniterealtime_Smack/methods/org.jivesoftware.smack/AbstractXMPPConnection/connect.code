/** 
 * Establishes a connection to the XMPP server. It basically creates and maintains a connection to the server. <p> Listeners will be preserved from a previous connection. </p>
 * @throws XMPPException if an error occurs on the XMPP protocol level.
 * @throws SmackException if an error occurs somewhere else besides XMPP protocol level.
 * @throws IOException if an I/O error occurred.
 * @return a reference to this object, to chain <code>connect()</code> with <code>login()</code>.
 * @throws InterruptedException if the calling thread was interrupted.
 */
public synchronized AbstractXMPPConnection connect() throws SmackException, IOException, XMPPException, InterruptedException {
  throwAlreadyConnectedExceptionIfAppropriate();
  callConnectionConnectingListener();
  initState();
  closingStreamReceived=false;
  streamId=null;
  try {
    connectInternal();
    if (!isSecureConnection() && getConfiguration().getSecurityMode() == SecurityMode.required) {
      throw new SecurityRequiredByClientException();
    }
  }
 catch (  SmackException|IOException|XMPPException|InterruptedException e) {
    instantShutdown();
    throw e;
  }
  assert connected;
  callConnectionConnectedListener();
  return this;
}
