private long blockUntilNextMillis(long time){
  while (System.currentTimeMillis() == time) {
  }
  return System.currentTimeMillis();
}
