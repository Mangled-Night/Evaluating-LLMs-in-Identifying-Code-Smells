/** 
 * Get the affiliations of this node.
 * @return List of {@link Affiliation}
 * @throws NoResponseException if there was no response from the remote entity.
 * @throws XMPPErrorException if there was an XMPP error returned.
 * @throws NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 */
public List<Affiliation> getAffiliations() throws NoResponseException, XMPPErrorException, NotConnectedException, InterruptedException {
  return getAffiliations(null,null);
}
/** 
 * Get the affiliations of this node. <p> {@code additionalExtensions} can be used e.g. to add a "Result Set Management" extension.{@code returnedExtensions} will be filled with the stanza extensions found in the answer.</p>
 * @param additionalExtensions additional {@code PacketExtensions} add to the request
 * @param returnedExtensions a collection that will be filled with the returned packetextensions
 * @return List of {@link Affiliation}
 * @throws NoResponseException if there was no response from the remote entity.
 * @throws XMPPErrorException if there was an XMPP error returned.
 * @throws NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 */
public List<Affiliation> getAffiliations(List<XmlElement> additionalExtensions,Collection<XmlElement> returnedExtensions) throws NoResponseException, XMPPErrorException, NotConnectedException, InterruptedException {
  return getAffiliations(AffiliationNamespace.basic,additionalExtensions,returnedExtensions);
}
private List<Affiliation> getAffiliations(AffiliationNamespace affiliationsNamespace,List<XmlElement> additionalExtensions,Collection<XmlElement> returnedExtensions) throws NoResponseException, XMPPErrorException, NotConnectedException, InterruptedException {
  PubSubElementType pubSubElementType=affiliationsNamespace.type;
  PubSub pubSub=createPubsubPacket(IQ.Type.get,new NodeExtension(pubSubElementType,getId()));
  if (additionalExtensions != null) {
    for (    XmlElement pe : additionalExtensions) {
      pubSub.addExtension(pe);
    }
  }
  PubSub reply=sendPubsubPacket(pubSub);
  if (returnedExtensions != null) {
    returnedExtensions.addAll(reply.getExtensions());
  }
  AffiliationsExtension affilElem=reply.getExtension(pubSubElementType);
  return affilElem.getAffiliations();
}
