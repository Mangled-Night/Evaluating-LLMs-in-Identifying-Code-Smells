/** 
 * <pre> 1. 尝试从 arthas.logging.config 这个配置里加载 logback.xml 2. 尝试从 arthas.home 下面找 logback.xml 可以用 arthas.logging.file.name 指定具体arthas.log的名字 可以用 arthas.logging.file.path 指定具体arthas.log的目录 </pre>
 * @param env
 */
public static LoggerContext initLogger(ArthasEnvironment env){
  String loggingConfig=env.resolvePlaceholders(LOGGING_CONFIG);
  if (loggingConfig == null || loggingConfig.trim().isEmpty()) {
    return null;
  }
  AnsiLog.debug("arthas logging file: " + loggingConfig);
  File configFile=new File(loggingConfig);
  if (!configFile.isFile()) {
    AnsiLog.error("can not find arthas logging config: " + loggingConfig);
    return null;
  }
  try {
    LoggerContext loggerContext=(LoggerContext)LoggerFactory.getILoggerFactory();
    loggerContext.reset();
    String fileName=env.getProperty(FILE_NAME_PROPERTY);
    if (fileName != null) {
      loggerContext.putProperty(ARTHAS_LOG_FILE,fileName);
    }
    String filePath=env.getProperty(FILE_PATH_PROPERTY);
    if (filePath != null) {
      loggerContext.putProperty(ARTHAS_LOG_PATH,filePath);
    }
    JoranConfigurator configurator=new JoranConfigurator();
    configurator.setContext(loggerContext);
    configurator.doConfigure(configFile.toURI().toURL());
    Iterator<Appender<ILoggingEvent>> appenders=loggerContext.getLogger("root").iteratorForAppenders();
    while (appenders.hasNext()) {
      Appender<ILoggingEvent> appender=appenders.next();
      if (appender instanceof RollingFileAppender) {
        RollingFileAppender fileAppender=(RollingFileAppender)appender;
        if ("ARTHAS".equalsIgnoreCase(fileAppender.getName())) {
          logFile=new File(fileAppender.getFile()).getCanonicalPath();
        }
      }
    }
    return loggerContext;
  }
 catch (  Throwable e) {
    AnsiLog.error("try to load arthas logging config file error: " + configFile,e);
  }
  return null;
}
