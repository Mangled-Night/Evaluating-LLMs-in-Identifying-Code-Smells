public void sendFriendshipRequest(BareJid bareJid) throws NotConnectedException, InterruptedException {
  XMPPConnection connection=connection();
  Presence presence=connection.getStanzaFactory().buildPresenceStanza().ofType(Presence.Type.subscribe).to(bareJid).build();
  friendshipRequestedCache.put(bareJid,null);
  connection().sendStanza(presence);
}
