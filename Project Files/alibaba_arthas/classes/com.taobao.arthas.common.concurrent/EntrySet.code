final class EntrySet extends AbstractSet<Map.Entry<K,V>> {
  @Override public Iterator<Map.Entry<K,V>> iterator(){
    return new EntryIterator();
  }
  @Override public boolean contains(  Object o){
    if (!(o instanceof Map.Entry<?,?>)) {
      return false;
    }
    Map.Entry<?,?> e=(Map.Entry<?,?>)o;
    V v=get(e.getKey());
    return v != null && v.equals(e.getValue());
  }
  @Override public boolean remove(  Object o){
    if (!(o instanceof Map.Entry<?,?>)) {
      return false;
    }
    Map.Entry<?,?> e=(Map.Entry<?,?>)o;
    return ConcurrentWeakKeyHashMap.this.remove(e.getKey(),e.getValue());
  }
  @Override public int size(){
    return ConcurrentWeakKeyHashMap.this.size();
  }
  @Override public boolean isEmpty(){
    return ConcurrentWeakKeyHashMap.this.isEmpty();
  }
  @Override public void clear(){
    ConcurrentWeakKeyHashMap.this.clear();
  }
}
