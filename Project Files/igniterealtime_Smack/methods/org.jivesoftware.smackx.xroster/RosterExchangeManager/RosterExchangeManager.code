/** 
 * Creates a new roster exchange manager.
 * @param connection an XMPPConnection which is used to send and receive messages.
 */
public RosterExchangeManager(XMPPConnection connection){
  weakRefConnection=new WeakReference<>(connection);
  packetListener=new StanzaListener(){
    @Override public void processStanza(    Stanza packet){
      Message message=(Message)packet;
      RosterExchange rosterExchange=(RosterExchange)message.getExtensionElement(ELEMENT,NAMESPACE);
      fireRosterExchangeListeners(message.getFrom(),rosterExchange.getRosterEntries());
    }
  }
;
  connection.addAsyncStanzaListener(packetListener,PACKET_FILTER);
}
