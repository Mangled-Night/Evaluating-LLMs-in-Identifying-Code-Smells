private static class MyRenderer extends JPanel {
  private final HeaderPanel header;
  private final DecimalFormat format=new DecimalFormat("#####0.00");
  private final JLabel lName=new JLabel();
  private final JLabel lMean=new JLabel();
  private final JLabel lSpike=new JLabel();
  private Dimension dName=new Dimension(0,0);
  MyRenderer(  HeaderPanel header){
    this.header=Preconditions.checkNotNull(header,"The parameter 'header' must not be null");
    setBackground(Color.WHITE);
    setLayout(new FlowLayout(FlowLayout.LEFT,4,2));
    lMean.setHorizontalAlignment(SwingConstants.RIGHT);
    lMean.setForeground(Color.GRAY);
    lMean.setPreferredSize(header.lMean.getPreferredSize());
    lSpike.setHorizontalAlignment(SwingConstants.RIGHT);
    lSpike.setForeground(Color.GRAY);
    lSpike.setPreferredSize(header.lSpike.getPreferredSize());
    add(lName);
    add(lMean);
    add(lSpike);
  }
  public void setEntry(  Entry entry){
    if (entry != null) {
      lName.setPreferredSize(null);
      lName.setForeground(entry.active ? Color.BLUE : Color.GRAY);
      lName.setText(entry.name);
      Dimension tmp=lName.getPreferredSize();
      if (tmp.width > dName.width || tmp.height > dName.height) {
        dName=tmp;
        header.setNameSize(dName);
      }
      lName.setPreferredSize(dName);
      lMean.setText("  " + format.format(entry.mean) + " ms");
      lSpike.setText("  " + format.format(entry.spike) + " ms");
    }
 else {
      lName.setText("");
      lMean.setText("");
      lSpike.setText("");
    }
  }
}
private static class MyRenderer extends JPanel {
  private final JPanel pHead=new JPanel();
  private final JPanel pList=new JPanel();
  private final JLabel lName=new JLabel();
  private final JLabel lId=new JLabel();
  private final JLabel lCounters=new JLabel();
  private final JLabel lActive=new JLabel();
  private final JPanel pError=new JPanel();
  private final JLabel lErrorSpacer=new JLabel();
  private final JLabel lError=new JLabel();
  private Dimension dId=new Dimension(0,0);
  private Dimension dName=new Dimension(0,0);
  MyRenderer(){
    setBackground(BACKGROUND);
    setLayout(new BorderLayout());
    pHead.setLayout(new BorderLayout());
    pHead.setBackground(BACKGROUND);
    pHead.add(pList,BorderLayout.LINE_START);
    pHead.add(lActive,BorderLayout.LINE_END);
    pHead.add(pError,BorderLayout.PAGE_END);
    lId.setHorizontalAlignment(SwingConstants.RIGHT);
    lName.setForeground(Color.BLUE);
    lCounters.setForeground(Color.GRAY);
    pList.setLayout(new FlowLayout(FlowLayout.LEFT,4,2));
    pList.setBackground(BACKGROUND);
    pList.add(lId);
    pList.add(lName);
    pList.add(lCounters);
    pError.setVisible(false);
    pError.setLayout(new FlowLayout(FlowLayout.LEFT,4,2));
    pError.setBackground(BACKGROUND);
    pError.add(lErrorSpacer);
    pError.add(lError);
    lError.setForeground(Color.RED);
    add(pHead,BorderLayout.PAGE_START);
  }
  public void setMonitor(  SingleThreadMonitor monitor){
    if (monitor != null) {
      lName.setPreferredSize(null);
      lName.setText(monitor.getName());
      Dimension tmp=lName.getPreferredSize();
      if (tmp.width > dName.width || tmp.height > dName.height) {
        dName=tmp;
      }
      lName.setPreferredSize(dName);
      lId.setPreferredSize(null);
      lId.setText("" + monitor.getThreadId());
      tmp=lId.getPreferredSize();
      if (tmp.width > dId.width || tmp.height > dId.height) {
        dId=tmp;
      }
      lId.setPreferredSize(dId);
      lCounters.setText(monitor.getLastTask());
      if (monitor.isAlive()) {
        if (monitor.isActive()) {
          lActive.setForeground(Color.GREEN);
          lActive.setText("Active");
        }
 else {
          lActive.setForeground(Color.GRAY);
          lActive.setText("Inactive");
        }
      }
 else {
        lActive.setForeground(Color.RED);
        lActive.setText("Disposed");
      }
      pError.setVisible(monitor.hasErrors());
      if (monitor.hasErrors()) {
        lErrorSpacer.setPreferredSize(dId);
        lError.setText(monitor.getNumErrors() + " Error(s), [" + monitor.getLastError().getClass().getSimpleName()+ "] "+ monitor.getLastError().getMessage());
      }
    }
 else {
      lName.setText("");
      lId.setText("");
      lActive.setText("");
    }
  }
}
