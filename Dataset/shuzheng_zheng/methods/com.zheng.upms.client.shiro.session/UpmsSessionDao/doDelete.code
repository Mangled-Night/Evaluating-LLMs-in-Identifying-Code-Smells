@Override protected void doDelete(Session session){
  String sessionId=session.getId().toString();
  String upmsType=ObjectUtils.toString(session.getAttribute(UpmsConstant.UPMS_TYPE));
  if ("client".equals(upmsType)) {
    String code=RedisUtil.get(ZHENG_UPMS_CLIENT_SESSION_ID + "_" + sessionId);
    Jedis jedis=RedisUtil.getJedis();
    jedis.del(ZHENG_UPMS_CLIENT_SESSION_ID + "_" + sessionId);
    jedis.srem(ZHENG_UPMS_CLIENT_SESSION_IDS + "_" + code,sessionId);
    jedis.close();
  }
  if ("server".equals(upmsType)) {
    String code=RedisUtil.get(ZHENG_UPMS_SERVER_SESSION_ID + "_" + sessionId);
    RedisUtil.remove(ZHENG_UPMS_SERVER_SESSION_ID + "_" + sessionId);
    RedisUtil.remove(ZHENG_UPMS_SERVER_CODE + "_" + code);
    Jedis jedis=RedisUtil.getJedis();
    Set<String> clientSessionIds=jedis.smembers(ZHENG_UPMS_CLIENT_SESSION_IDS + "_" + code);
    for (    String clientSessionId : clientSessionIds) {
      jedis.del(ZHENG_UPMS_CLIENT_SESSION_ID + "_" + clientSessionId);
      jedis.srem(ZHENG_UPMS_CLIENT_SESSION_IDS + "_" + code,clientSessionId);
    }
    LOGGER.debug("当前code={}，对应的注册系统个数：{}个",code,jedis.scard(ZHENG_UPMS_CLIENT_SESSION_IDS + "_" + code));
    jedis.close();
    RedisUtil.lrem(ZHENG_UPMS_SERVER_SESSION_IDS,1,sessionId);
  }
  RedisUtil.remove(ZHENG_UPMS_SHIRO_SESSION_ID + "_" + sessionId);
  LOGGER.debug("doUpdate >>>>> sessionId={}",sessionId);
}
