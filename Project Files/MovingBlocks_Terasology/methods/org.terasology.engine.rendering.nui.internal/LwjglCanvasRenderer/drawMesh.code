@Override public void drawMesh(Mesh mesh,Material material,Rectanglei drawRegion,Rectanglei cropRegion,Quaternionfc rotation,Vector3fc offset,float scale,float alpha){
  if (!material.isRenderable()) {
    return;
  }
  AABBfc meshAABB=mesh.getAABB();
  Vector3f meshExtents=meshAABB.extent(new Vector3f());
  float fitScale=0.35f * Math.min(drawRegion.getSizeX(),drawRegion.getSizeY()) / Math.max(meshExtents.x,Math.max(meshExtents.y,meshExtents.z));
  Vector3f centerOffset=meshAABB.center(new Vector3f());
  centerOffset.mul(-1.0f);
  Matrix4f centerTransform=new Matrix4f().translationRotateScale(centerOffset,new Quaternionf(),1);
  Matrix4f userTransform=new Matrix4f().translationRotateScale(offset,rotation,-fitScale * scale);
  Matrix4f translateTransform=new Matrix4f().translationRotateScale(new Vector3f((drawRegion.minX + drawRegion.getSizeX() / 2) * uiScale,(drawRegion.minY + drawRegion.getSizeY() / 2) * uiScale,0),new Quaternionf(),1);
  userTransform.mul(centerTransform);
  translateTransform.mul(userTransform);
  Matrix4f finalMat=new Matrix4f().setTranslation(0,0,-1024f);
  finalMat.mul(translateTransform);
  material.setFloat4(CROPPING_BOUNDARIES_PARAM,cropRegion.minX * uiScale,cropRegion.maxX * uiScale,cropRegion.minY * uiScale,cropRegion.maxY * uiScale);
  glEnable(GL11.GL_DEPTH_TEST);
  glClear(GL11.GL_DEPTH_BUFFER_BIT);
  modelMatrixStack.pushMatrix();
  modelMatrixStack.set(finalMat);
  modelMatrixStack.scale(this.uiScale,this.uiScale,this.uiScale);
  material.setMatrix4("posMatrix",translateTransform);
  material.setMatrix4("projectionMatrix",projMatrix);
  material.setMatrix4("modelViewMatrix",modelMatrixStack);
  material.setMatrix3("normalMatrix",modelMatrixStack.normal(new Matrix3f()));
  material.setFloat("alpha",alpha);
  material.bindTextures();
  mesh.render();
  modelMatrixStack.popMatrix();
  glDisable(GL11.GL_DEPTH_TEST);
}
