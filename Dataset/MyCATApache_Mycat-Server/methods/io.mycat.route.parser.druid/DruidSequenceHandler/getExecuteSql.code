/** 
 * 根据原sql获取可执行的sql
 * @param sql
 * @return
 * @throws UnsupportedEncodingException
 */
public String getExecuteSql(SessionSQLPair pair,String charset) throws UnsupportedEncodingException, InterruptedException {
  String executeSql=pair.sql;
  if (null != pair.sql && !"".equals(pair.sql)) {
    Matcher matcher=pattern.matcher(executeSql);
    if (matcher.find()) {
      String tableName=matcher.group(2);
      ReentrantLock lock=getSegLock(tableName);
      lock.lock();
      try {
        matcher=pattern.matcher(executeSql);
        while (matcher.find()) {
          long value=sequenceHandler.nextId(tableName.toUpperCase());
          executeSql=executeSql.replaceFirst(matcher.group(1),Long.toString(value));
          pair.session.getSource().setLastWriteTime(TimeUtil.currentTimeMillis());
        }
      }
  finally {
        lock.unlock();
      }
    }
  }
  return executeSql;
}
