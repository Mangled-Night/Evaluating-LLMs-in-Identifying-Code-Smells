@Override protected AssetManager setupAssetManager(){
  ModuleAwareAssetTypeManager assetTypeManager=new ModuleAwareAssetTypeManagerImpl();
  assetTypeManager.createAssetType(Prefab.class,PojoPrefab::new,"prefabs");
  assetTypeManager.createAssetType(BlockShape.class,BlockShapeImpl::new,"shapes");
  assetTypeManager.createAssetType(BlockSounds.class,BlockSounds::new,"blockSounds");
  assetTypeManager.createAssetType(BlockTile.class,BlockTile::new,"blockTiles");
  AssetType<BlockFamilyDefinition,BlockFamilyDefinitionData> blockFamilyDefinitionDataAssetType=assetTypeManager.createAssetType(BlockFamilyDefinition.class,BlockFamilyDefinition::new,"blocks");
  assetTypeManager.getAssetFileDataProducer(blockFamilyDefinitionDataAssetType).addAssetFormat(new BlockFamilyDefinitionFormat(assetTypeManager.getAssetManager()));
  assetTypeManager.createAssetType(StaticSound.class,NullSound::new,"sounds");
  assetTypeManager.createAssetType(StreamingSound.class,NullStreamingSound::new,"music");
  assetTypeManager.createAssetType(UISkinAsset.class,UISkinAsset::new,"skins");
  assetTypeManager.createAssetType(BehaviorTree.class,BehaviorTree::new,"behaviors");
  assetTypeManager.createAssetType(UIElement.class,UIElement::new,"ui");
  assetTypeManager.createAssetType(Font.class,FontImpl::new,"fonts");
  AssetType<Texture,TextureData> textureDataAssetType=assetTypeManager.createAssetType(Texture.class,HeadlessTexture::create,"textures","fonts");
  assetTypeManager.getAssetFileDataProducer(textureDataAssetType).addAssetFormat(new PNGTextureFormat(Texture.FilterMode.NEAREST,path -> path.getPath().get(1).equals("textures")));
  assetTypeManager.getAssetFileDataProducer(textureDataAssetType).addAssetFormat(new PNGTextureFormat(Texture.FilterMode.LINEAR,path -> path.getPath().get(1).equals("fonts")));
  assetTypeManager.createAssetType(Shader.class,HeadlessShader::new,"shaders");
  assetTypeManager.createAssetType(Material.class,HeadlessMaterial::new,"materials");
  assetTypeManager.createAssetType(Mesh.class,HeadlessMesh::new,"mesh");
  assetTypeManager.createAssetType(SkeletalMesh.class,HeadlessSkeletalMesh::new,"skeletalMesh");
  assetTypeManager.createAssetType(MeshAnimation.class,MeshAnimationImpl::new,"animations");
  assetTypeManager.createAssetType(Atlas.class,Atlas::new,"atlas");
  assetTypeManager.createAssetType(Subtexture.class,Subtexture::new);
  assetTypeManager.switchEnvironment(context.get(ModuleManager.class).getEnvironment());
  context.put(ModuleAwareAssetTypeManager.class,assetTypeManager);
  context.put(AssetManager.class,assetTypeManager.getAssetManager());
  return assetTypeManager.getAssetManager();
}
