@Test void shouldCallPolicyToDiscardReadBytes() throws Exception {
  DecodeBufferPolicy policy=mock(DecodeBufferPolicy.class);
  CommandHandler commandHandler=new CommandHandler(ClientOptions.builder().decodeBufferPolicy(policy).build(),clientResources,endpoint);
  ChannelPromise channelPromise=new DefaultChannelPromise(channel,ImmediateEventExecutor.INSTANCE);
  channelPromise.setSuccess();
  commandHandler.channelRegistered(context);
  commandHandler.channelActive(context);
  commandHandler.getStack().add(new Command<>(CommandType.PING,new StatusOutput<>(StringCodec.UTF8)));
  ByteBuf msg=context.alloc().buffer(100);
  msg.writeBytes("*1\r\n+OK\r\n".getBytes());
  commandHandler.channelRead(context,msg);
  commandHandler.channelUnregistered(context);
  verify(policy).afterCommandDecoded(any());
}
