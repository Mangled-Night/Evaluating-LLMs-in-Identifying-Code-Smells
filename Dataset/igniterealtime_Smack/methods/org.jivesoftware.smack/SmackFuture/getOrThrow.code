public final synchronized V getOrThrow() throws E, InterruptedException {
  while (result == null && exception == null && !cancelled) {
    futureWait();
  }
  if (exception != null) {
    throw exception;
  }
  if (cancelled) {
    throw new CancellationException();
  }
  assert result != null;
  return result;
}
