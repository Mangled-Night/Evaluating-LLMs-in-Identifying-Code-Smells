@Override public XmlStringBuilder toXML(org.jivesoftware.smack.packet.XmlEnvironment enclosingNamespace){
  XmlStringBuilder sb=new XmlStringBuilder(this,enclosingNamespace).rightAngleBracket();
  sb.halfOpenElement(SIGNED_PRE_KEY_PUB).attribute(SIGNED_PRE_KEY_ID,signedPreKeyId).rightAngleBracket().append(signedPreKeyB64).closeElement(SIGNED_PRE_KEY_PUB);
  sb.openElement(SIGNED_PRE_KEY_SIG).append(signedPreKeySignatureB64).closeElement(SIGNED_PRE_KEY_SIG);
  sb.openElement(IDENTITY_KEY).append(identityKeyB64).closeElement(IDENTITY_KEY);
  sb.openElement(PRE_KEYS);
  for (  Map.Entry<Integer,String> p : this.preKeysB64.entrySet()) {
    sb.halfOpenElement(PRE_KEY_PUB).attribute(PRE_KEY_ID,p.getKey()).rightAngleBracket().append(p.getValue()).closeElement(PRE_KEY_PUB);
  }
  sb.closeElement(PRE_KEYS);
  sb.closeElement(this);
  return sb;
}
