/** 
 * This integration test tests the basic secret key backup and restore functionality as described in XEP-0373 ยง5. In order to simulate two different devices, we are using two  {@link FileBasedOpenPgpStore} implementationswhich point to different directories. First, Alice generates a fresh OpenPGP key pair. She then creates a backup of the key in her private PEP node. Now the  {@link OpenPgpStore} implementation is replaced by another instance to simulate a different device.Then the secret key backup is restored from PubSub and the imported secret key is compared to the one in the original store. Afterwards the private PEP node is deleted from PubSub and the storage directories are emptied.
 * @see <a href="https://xmpp.org/extensions/xep-0373.html#synchro-pep">
     *     XEP-0373 ยง5: Synchronizing the Secret Key with a Private PEP Node</a>
 * @param environment TODO javadoc me please
 * @throws XMPPException.XMPPErrorException if there was an XMPP error returned.
 * @throws TestNotPossibleException if the test is not possible.
 * @throws SmackException.NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 * @throws SmackException.NoResponseException if there was no response from the remote entity.
 */
public OXSecretKeyBackupIntegrationTest(SmackIntegrationTestEnvironment environment) throws XMPPException.XMPPErrorException, TestNotPossibleException, SmackException.NotConnectedException, InterruptedException, SmackException.NoResponseException {
  super(environment);
  if (!OpenPgpManager.serverSupportsSecretKeyBackups(aliceConnection)) {
    throw new TestNotPossibleException("Server does not support the 'whitelist' PubSub access model.");
  }
}
