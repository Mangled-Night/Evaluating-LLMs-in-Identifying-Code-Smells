/** 
 * Processes recorded and pending events. If recordedEvents is not loaded, load it from RecordedEventStore.
 */
@Override public void process(){
  processRecordedEvents();
  PendingEvent event=pendingEvents.poll();
  while (event != null) {
    if (event.getComponent() != null) {
      originalSend(event.getEntity(),event.getEvent(),event.getComponent());
    }
 else {
      originalSend(event.getEntity(),event.getEvent());
    }
    event=pendingEvents.poll();
  }
}
