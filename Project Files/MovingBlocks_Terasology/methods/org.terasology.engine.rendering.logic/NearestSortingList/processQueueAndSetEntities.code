/** 
 * Updates the sorted list with all changes made while sorting before swapping the lists.
 * @param newEntities the newly sorted list with entities. All changes willbe applied to this list before the entities of this collection are set to this list.
 */
private synchronized void processQueueAndSetEntities(List<EntityRef> newEntities){
  for (  Command c : commands) {
    c.executeOn(newEntities);
  }
  commands.clear();
  entities=newEntities;
  sorting=false;
}
