@Test void shouldFailIfNoNodeConnects(){
  List<RedisURI> seed=Arrays.asList(RedisURI.create("127.0.0.1",7380),RedisURI.create("127.0.0.1",7381));
  when(nodeConnectionFactory.connectToNodeAsync(any(RedisCodec.class),eq(InetSocketAddress.createUnresolved("127.0.0.1",7380)))).thenReturn(completedWithException(new RedisException("connection failed")));
  when(nodeConnectionFactory.connectToNodeAsync(any(RedisCodec.class),eq(InetSocketAddress.createUnresolved("127.0.0.1",7381)))).thenReturn(completedWithException(new RedisException("connection failed")));
  try {
    sut.loadViews(seed,Duration.ofSeconds(1),true).toCompletableFuture().join();
    fail("Missing RedisConnectionException");
  }
 catch (  Exception e) {
    assertThat(e.getCause()).hasMessageStartingWith("Cannot retrieve cluster partitions from ");
    assertThat(e.getCause().getSuppressed()).hasSize(2);
  }
  verify(nodeConnectionFactory).connectToNodeAsync(any(RedisCodec.class),eq(InetSocketAddress.createUnresolved("127.0.0.1",7380)));
  verify(nodeConnectionFactory).connectToNodeAsync(any(RedisCodec.class),eq(InetSocketAddress.createUnresolved("127.0.0.1",7381)));
}
