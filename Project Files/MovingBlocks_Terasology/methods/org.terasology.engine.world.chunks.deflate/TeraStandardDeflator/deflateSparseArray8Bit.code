@Override public TeraArray deflateSparseArray8Bit(final byte[][] inflated,final byte[] deflated,final byte fill,final int rowSize,final int sizeX,final int sizeY,final int sizeZ){
  if (inflated == null && deflated == null) {
    return new TeraSparseArray8Bit(sizeX,sizeY,sizeZ,fill);
  }
  if (inflated == null) {
    return new TeraSparseArray8Bit(sizeX,sizeY,sizeZ,inflated,deflated);
  }
  byte[] packed=new byte[sizeY];
  byte[][] newInflated=new byte[sizeY][];
  for (int y=0; y < sizeY; y++) {
    byte[] planeXY=inflated[y];
    if (planeXY != null) {
      byte first=planeXY[0];
      boolean packing=true;
      for (int i=1; i < rowSize; i++) {
        if (first != planeXY[i]) {
          packing=false;
          break;
        }
      }
      if (packing) {
        packed[y]=first;
      }
 else {
        byte[] xyvalues=new byte[rowSize];
        System.arraycopy(inflated[y],0,xyvalues,0,rowSize);
        newInflated[y]=xyvalues;
      }
    }
 else {
      if (deflated != null) {
        packed[y]=deflated[y];
      }
    }
  }
  return new TeraSparseArray8Bit(sizeX,sizeY,sizeZ,newInflated,packed);
}
