@Test void shouldRandomizeReadNode(){
  StatefulRedisConnection<String,String> nodeConnectionMock2=mock(StatefulRedisConnection.class);
  when(nodeConnectionMock.isOpen()).thenReturn(true);
  when(nodeConnectionMock2.isOpen()).thenReturn(true);
  when(clientMock.connectToNodeAsync(eq(StringCodec.UTF8),eq("localhost:1"),any(),any())).thenReturn(ConnectionFuture.from(socketAddressMock,CompletableFuture.completedFuture(nodeConnectionMock)));
  when(clientMock.connectToNodeAsync(eq(StringCodec.UTF8),eq("localhost:2"),any(),any())).thenReturn(ConnectionFuture.from(socketAddressMock,CompletableFuture.completedFuture(nodeConnectionMock2)));
  AsyncCommand<String,String,String> async=new AsyncCommand<>(new Command<>(CommandType.READONLY,null,null));
  async.complete();
  when(asyncCommandsMock.readOnly()).thenReturn(async);
  when(nodeConnectionMock2.async()).thenReturn(asyncCommandsMock);
  sut.setReadFrom(ReadFrom.ANY);
  List<StatefulRedisConnection<String,String>> readCandidates=new ArrayList<>();
  for (int i=0; i < 10; i++) {
    readCandidates.add(sut.getConnection(ConnectionIntent.READ,1));
  }
  assertThat(readCandidates).contains(nodeConnectionMock,nodeConnectionMock2);
}
