@Override public ByteBuffer write(ByteBuffer buffer,FrontendConnection c,boolean writeSocketIfFull){
  int size=calcPacketSize();
  buffer=c.checkWriteBuffer(buffer,c.getPacketHeaderSize() + size,writeSocketIfFull);
  BufferUtil.writeUB3(buffer,size);
  buffer.put(packetId);
  BufferUtil.writeLength(buffer,fieldCount);
  if (extra > 0) {
    BufferUtil.writeLength(buffer,extra);
  }
  return buffer;
}
public void write(BufferArray bufferArray){
  int size=calcPacketSize();
  ByteBuffer buffer=bufferArray.checkWriteBuffer(packetHeaderSize + size);
  BufferUtil.writeUB3(buffer,size);
  buffer.put(packetId);
  BufferUtil.writeLength(buffer,fieldCount);
  if (extra > 0) {
    BufferUtil.writeLength(buffer,extra);
  }
}
