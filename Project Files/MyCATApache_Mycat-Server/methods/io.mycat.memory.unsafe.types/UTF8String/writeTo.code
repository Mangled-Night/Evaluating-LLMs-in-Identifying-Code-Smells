public void writeTo(ByteBuffer buffer){
  assert (buffer.hasArray());
  byte[] target=buffer.array();
  int offset=buffer.arrayOffset();
  int pos=buffer.position();
  writeToMemory(target,Platform.BYTE_ARRAY_OFFSET + offset + pos);
  buffer.position(pos + numBytes);
}
