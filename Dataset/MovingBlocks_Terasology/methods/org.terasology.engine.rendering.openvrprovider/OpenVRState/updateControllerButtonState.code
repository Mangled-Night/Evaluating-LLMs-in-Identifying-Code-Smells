void updateControllerButtonState(VRControllerState_t[] controllerStateReference){
  for (int handIndex=0; handIndex < 2; handIndex++) {
    if (lastControllerState[handIndex].ulButtonPressed != controllerStateReference[handIndex].ulButtonPressed) {
      for (      ControllerListener listener : controllerListeners) {
        listener.buttonStateChanged(lastControllerState[handIndex],controllerStateReference[handIndex],handIndex);
      }
    }
    lastControllerState[handIndex].unPacketNum=controllerStateReference[handIndex].unPacketNum;
    lastControllerState[handIndex].ulButtonPressed=controllerStateReference[handIndex].ulButtonPressed;
    lastControllerState[handIndex].ulButtonTouched=controllerStateReference[handIndex].ulButtonTouched;
    for (int i=0; i < 5; i++) {
      if (controllerStateReference[handIndex].rAxis[i] != null) {
        lastControllerState[handIndex].rAxis[i].x=controllerStateReference[handIndex].rAxis[i].x;
        lastControllerState[handIndex].rAxis[i].y=controllerStateReference[handIndex].rAxis[i].y;
      }
    }
  }
}
