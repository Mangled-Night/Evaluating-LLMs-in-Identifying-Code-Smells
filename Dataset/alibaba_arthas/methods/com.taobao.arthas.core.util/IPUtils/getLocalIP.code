/** 
 * get IP address, automatically distinguish the operating system.（windows or linux）
 * @return String
 */
public static String getLocalIP(){
  InetAddress ip=null;
  try {
    if (isWindowsOS()) {
      ip=InetAddress.getLocalHost();
    }
 else {
      if (!InetAddress.getLocalHost().isLoopbackAddress()) {
        ip=InetAddress.getLocalHost();
      }
 else {
        boolean bFindIP=false;
        Enumeration<NetworkInterface> netInterfaces=NetworkInterface.getNetworkInterfaces();
        while (netInterfaces.hasMoreElements()) {
          if (bFindIP) {
            break;
          }
          NetworkInterface ni=netInterfaces.nextElement();
          Enumeration<InetAddress> ips=ni.getInetAddresses();
          while (ips.hasMoreElements()) {
            ip=ips.nextElement();
            if (ip.isSiteLocalAddress() && !ip.isLoopbackAddress() && !ip.getHostAddress().contains(":")) {
              bFindIP=true;
              break;
            }
          }
        }
      }
    }
  }
 catch (  Exception e) {
  }
  return ip == null ? null : ip.getHostAddress();
}
