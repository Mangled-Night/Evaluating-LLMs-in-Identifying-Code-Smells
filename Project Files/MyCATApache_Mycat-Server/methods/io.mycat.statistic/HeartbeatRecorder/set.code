public void set(long value){
  try {
    long time=TimeUtil.currentTimeMillis();
    if (value < 0) {
      recordsAll.offer(new Record(0,time));
      return;
    }
    remove(time);
    int size=records.size();
    if (size == 0) {
      records.offer(new Record(value,time));
      avg1=avg2=avg3=value;
      return;
    }
    if (size >= MAX_RECORD_SIZE) {
      records.poll();
    }
    records.offer(new Record(value,time));
    recordsAll.offer(new Record(value,time));
    calculate(time);
  }
 catch (  Exception e) {
    LOGGER.error("record HeartbeatRecorder error ",e);
  }
}
