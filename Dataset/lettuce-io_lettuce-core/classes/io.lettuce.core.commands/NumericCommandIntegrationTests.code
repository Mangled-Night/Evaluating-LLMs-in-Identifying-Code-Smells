/** 
 * @author Will Glozer
 * @author Mark Paluch
 */
@ExtendWith(LettuceExtension.class) @TestInstance(TestInstance.Lifecycle.PER_CLASS) public class NumericCommandIntegrationTests extends TestSupport {
  private final RedisCommands<String,String> redis;
  @Inject protected NumericCommandIntegrationTests(  RedisCommands<String,String> redis){
    this.redis=redis;
  }
  @BeforeEach void setUp(){
    this.redis.flushall();
  }
  @Test void decr(){
    assertThat((long)redis.decr(key)).isEqualTo(-1);
    assertThat((long)redis.decr(key)).isEqualTo(-2);
  }
  @Test void decrby(){
    assertThat(redis.decrby(key,3)).isEqualTo(-3);
    assertThat(redis.decrby(key,3)).isEqualTo(-6);
  }
  @Test void incr(){
    assertThat((long)redis.incr(key)).isEqualTo(1);
    assertThat((long)redis.incr(key)).isEqualTo(2);
  }
  @Test void incrby(){
    assertThat(redis.incrby(key,3)).isEqualTo(3);
    assertThat(redis.incrby(key,3)).isEqualTo(6);
  }
  @Test void incrbyfloat(){
    assertThat(redis.incrbyfloat(key,3.0)).isEqualTo(3.0,offset(0.1));
    assertThat(redis.incrbyfloat(key,0.2)).isEqualTo(3.2,offset(0.1));
  }
}
