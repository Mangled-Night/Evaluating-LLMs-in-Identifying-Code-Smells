/** 
 * Set the presence used to join the MUC room. <p> The 'to' value of the given presence will be overridden and the given presence must be of type 'available', otherwise an  {@link IllegalArgumentException} will be thrown.<p>
 * @param presence TODO javadoc me please
 * @return a reference to this builder.
 * @deprecated use {@link #withPresence(Consumer)} instead.
 */
@Deprecated public Builder withPresence(Presence presence){
  if (presence.getType() != Presence.Type.available) {
    throw new IllegalArgumentException("Presence must be of type 'available'");
  }
  joinPresence=presence;
  return this;
}
/** 
 * Set the presence used to join the MUC room. <p> The consumer must not modify the presence type, otherwise an  {@link IllegalArgumentException} will be thrown.<p>
 * @param presenceBuilderConsumer a consumer which will be passed the presence build.
 * @return a reference to this builder.
 * @since 4.4.0
 */
public Builder withPresence(Consumer<? super PresenceBuilder> presenceBuilderConsumer){
  presenceBuilderConsumer.accept(joinPresenceBuilder);
  if (joinPresenceBuilder.getType() != Presence.Type.available) {
    throw new IllegalArgumentException("Presence must be of type 'available'");
  }
  return this;
}
