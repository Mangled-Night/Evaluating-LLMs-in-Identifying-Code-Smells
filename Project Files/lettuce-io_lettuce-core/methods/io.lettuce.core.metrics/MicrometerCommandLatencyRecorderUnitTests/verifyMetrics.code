@Test void verifyMetrics(){
  MicrometerOptions options=MicrometerOptions.create();
  MicrometerCommandLatencyRecorder commandLatencyRecorder=new MicrometerCommandLatencyRecorder(meterRegistry,options);
  commandLatencyRecorder.recordCommandLatency(LOCAL_ADDRESS,REMOTE_ADDRESS,CommandType.AUTH,1,10);
  commandLatencyRecorder.recordCommandLatency(LOCAL_ADDRESS,REMOTE_ADDRESS,CommandType.BGSAVE,100,500);
  commandLatencyRecorder.recordCommandLatency(LOCAL_ADDRESS,REMOTE_ADDRESS,CommandType.BGSAVE,200,1000);
  commandLatencyRecorder.recordCommandLatency(LOCAL_ADDRESS,REMOTE_ADDRESS,CommandType.BGSAVE,300,1500);
  assertThat(meterRegistry.find(METRIC_FIRST_RESPONSE).timers()).hasSize(2);
  assertThat(meterRegistry.find(METRIC_FIRST_RESPONSE).tag(LABEL_COMMAND,CommandType.BGSAVE.name()).timers()).hasSize(1).element(0).extracting(Timer::takeSnapshot).hasFieldOrPropertyWithValue("count",3L).hasFieldOrPropertyWithValue("max",300.0).hasFieldOrPropertyWithValue("total",600.0);
  assertThat(meterRegistry.find(METRIC_COMPLETION).timers()).hasSize(2);
  assertThat(meterRegistry.find(METRIC_COMPLETION).tag(LABEL_COMMAND,CommandType.BGSAVE.name()).timers()).hasSize(1).element(0).extracting(Timer::takeSnapshot).hasFieldOrPropertyWithValue("count",3L).hasFieldOrPropertyWithValue("max",1500.0).hasFieldOrPropertyWithValue("total",3000.0);
}
