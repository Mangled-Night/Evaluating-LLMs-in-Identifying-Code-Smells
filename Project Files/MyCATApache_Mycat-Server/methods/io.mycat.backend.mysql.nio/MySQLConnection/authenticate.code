public void authenticate(){
  AuthPacket packet=new AuthPacket();
  packet.packetId=1;
  packet.clientFlags=clientFlags;
  packet.maxPacketSize=maxPacketSize;
  packet.charsetIndex=this.charsetIndex;
  packet.user=user;
  try {
    packet.password=passwd(password,handshake);
  }
 catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException(e.getMessage());
  }
  packet.database=schema;
  packet.write(this);
}
