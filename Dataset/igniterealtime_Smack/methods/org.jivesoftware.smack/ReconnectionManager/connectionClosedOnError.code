@Override public void connectionClosedOnError(Exception e){
  done=false;
  if (!isAutomaticReconnectEnabled()) {
    return;
  }
  if (e instanceof StreamErrorException) {
    StreamErrorException xmppEx=(StreamErrorException)e;
    StreamError error=xmppEx.getStreamError();
    if (StreamError.Condition.conflict == error.getCondition()) {
      return;
    }
  }
  reconnect();
}
