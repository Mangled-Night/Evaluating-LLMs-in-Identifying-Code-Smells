@Override public XmlStringBuilder toXML(XmlEnvironment enclosingXmlEnvironment){
  XmlStringBuilder buf=new XmlStringBuilder(this,enclosingXmlEnvironment);
  addCommonAttributes(buf);
  buf.optAttribute("type",type);
  buf.rightAngleBracket();
  if (type == Type.error) {
    appendErrorIfExists(buf);
  }
  buf.append(getExtensions());
  buf.closeElement(ELEMENT);
  return buf;
}
@Override public XmlStringBuilder toXML(org.jivesoftware.smack.packet.XmlEnvironment enclosingNamespace){
  XmlStringBuilder xml=new XmlStringBuilder(this,enclosingNamespace);
  xml.rightAngleBracket();
  xml.escape(subject);
  xml.closeElement(getElementName());
  return xml;
}
@Override public XmlStringBuilder toXML(XmlEnvironment enclosingXmlEnvironment){
  XmlStringBuilder xml=new XmlStringBuilder(this,enclosingXmlEnvironment);
  xml.rightAngleBracket();
  xml.text(message);
  xml.closeElement(getElementName());
  return xml;
}
@Override public XmlStringBuilder toXML(XmlEnvironment xmlEnvironment){
  XmlStringBuilder xml=new XmlStringBuilder(this,xmlEnvironment);
  xml.optAttribute(PARENT_ATTRIBUTE_NAME,parent);
  xml.rightAngleBracket();
  xml.escape(thread);
  xml.closeElement(this);
  return xml;
}
