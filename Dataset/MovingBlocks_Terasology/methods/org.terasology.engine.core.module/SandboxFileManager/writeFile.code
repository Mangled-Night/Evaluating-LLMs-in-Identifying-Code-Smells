/** 
 * Write a new file. <p> How to use: <ul> <li>First of all, we need to create a file writer consumer, for example: <pre> {@code}Consumer<OutputStream> consumer = outputStream ->  try { outputStream.write(someBytes); } catch (IOException e) { logger.error("error", e); } }; }</pre></li> <li>Call  {@code writeFile} passing in the filename and the consumer as parameter.</li><li>When the execution is completed the  {@code OutputStream} is automatically closed.</li></ul>
 * @param filename Filename.
 * @param consumer Consumer to write the file.
 */
public void writeFile(String filename,Consumer<OutputStream> consumer){
  String sandboxPath=pathManager.getSandboxPath(filename).toString();
  AccessController.doPrivileged((PrivilegedAction<Void>)() -> {
    try (OutputStream outputStream=new FileOutputStream(sandboxPath)){
      ModuleOutputStream moduleInputStream=new ModuleOutputStream(outputStream);
      consumer.accept(moduleInputStream);
    }
 catch (    IOException e) {
      logger.error("Could not write the file: " + filename,e);
    }
    return null;
  }
);
}
