private boolean shouldAcceptMessage(MessageView message){
  if (message.hasExtension(Message.Body.QNAME)) {
    return true;
  }
  if (!xhtmlIm) {
    return false;
  }
  XHTMLExtension xhtmlExtension=XHTMLExtension.from(message);
  if (xhtmlExtension == null) {
    return false;
  }
  return true;
}
