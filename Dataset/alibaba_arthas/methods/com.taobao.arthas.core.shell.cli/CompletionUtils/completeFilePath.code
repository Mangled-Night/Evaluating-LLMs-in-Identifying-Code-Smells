/** 
 * 返回true表示已经完成completion，返回否则表示没有，调用者需要另外完成补全
 * @param completion
 * @return
 */
public static boolean completeFilePath(Completion completion){
  List<CliToken> tokens=completion.lineTokens();
  String token=tokens.get(tokens.size() - 1).value();
  if (token.startsWith("-") || StringUtils.isBlank(token)) {
    return false;
  }
  File dir=null;
  String partName="";
  if (StringUtils.isBlank(token)) {
    dir=new File("").getAbsoluteFile();
    token="";
  }
 else   if (token.endsWith("/")) {
    dir=new File(token);
  }
 else {
    File parent=new File(token).getAbsoluteFile().getParentFile();
    if (parent != null && parent.exists()) {
      dir=parent;
      partName=new File(token).getName();
    }
  }
  File tokenFile=new File(token);
  String tokenFileName=null;
  if (token.endsWith("/")) {
    tokenFileName="";
  }
 else {
    tokenFileName=tokenFile.getName();
  }
  if (dir == null) {
    return false;
  }
  File[] listFiles=dir.listFiles();
  ArrayList<String> names=new ArrayList<String>();
  if (listFiles != null) {
    for (    File child : listFiles) {
      if (child.getName().startsWith(partName)) {
        if (child.isDirectory()) {
          names.add(child.getName() + "/");
        }
 else {
          names.add(child.getName());
        }
      }
    }
  }
  if (names.size() == 1 && names.get(0).endsWith("/")) {
    String name=names.get(0);
    completion.complete(name.substring(tokenFileName.length()),false);
    return true;
  }
  String prefix=null;
  if (token.endsWith("/")) {
    prefix=token;
  }
 else {
    prefix=token.substring(0,token.length() - new File(token).getName().length());
  }
  ArrayList<String> namesWithPrefix=new ArrayList<String>();
  for (  String name : names) {
    namesWithPrefix.add(prefix + name);
  }
  CompletionUtils.complete(completion,namesWithPrefix);
  return true;
}
