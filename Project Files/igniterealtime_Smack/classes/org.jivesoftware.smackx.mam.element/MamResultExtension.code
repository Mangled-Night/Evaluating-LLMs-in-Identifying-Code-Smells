/** 
 * MAM result extension class.
 * @see <a href="http://xmpp.org/extensions/xep-0313.html">XEP-0313: Message
     *      Archive Management</a>
 */
public abstract static class MamResultExtension implements ExtensionElement {
  /** 
 * result element.
 */
  public static final String ELEMENT="result";
  /** 
 * id of the result.
 */
  private final String id;
  /** 
 * the forwarded element.
 */
  private final Forwarded<Message> forwarded;
  /** 
 * the query id.
 */
  private String queryId;
  protected final MamVersion version;
  /** 
 * MAM result extension constructor.
 * @param version TODO javadoc me please
 * @param queryId TODO javadoc me please
 * @param id TODO javadoc me please
 * @param forwarded TODO javadoc me please
 */
  public MamResultExtension(  MamVersion version,  String queryId,  String id,  Forwarded<Message> forwarded){
    if (StringUtils.isEmpty(id)) {
      throw new IllegalArgumentException("id must not be null or empty");
    }
    if (forwarded == null) {
      throw new IllegalArgumentException("forwarded must no be null");
    }
    if (version == null) {
      throw new IllegalArgumentException("version must not be null");
    }
    this.version=version;
    this.id=id;
    this.forwarded=forwarded;
    this.queryId=queryId;
  }
  /** 
 * Get the id.
 * @return the id
 */
  public String getId(){
    return id;
  }
  /** 
 * Get the forwarded element.
 * @return the forwarded element
 */
  public Forwarded<Message> getForwarded(){
    return forwarded;
  }
  /** 
 * Get query id.
 * @return the query id
 */
  public final String getQueryId(){
    return queryId;
  }
  @Override public String getElementName(){
    return ELEMENT;
  }
  @Override public final String getNamespace(){
    return version.getNamespace();
  }
  @Override public XmlStringBuilder toXML(  org.jivesoftware.smack.packet.XmlEnvironment enclosingNamespace){
    XmlStringBuilder xml=new XmlStringBuilder(this,enclosingNamespace);
    xml.optAttribute("queryid",getQueryId());
    xml.optAttribute("id",getId());
    xml.rightAngleBracket();
    xml.append(getForwarded());
    xml.closeElement(this);
    return xml;
  }
  public static MamResultExtension from(  MessageView message){
    for (    XmlElement extension : message.getExtensions()) {
      if (extension instanceof MamResultExtension) {
        return (MamResultExtension)extension;
      }
    }
    return null;
  }
}
