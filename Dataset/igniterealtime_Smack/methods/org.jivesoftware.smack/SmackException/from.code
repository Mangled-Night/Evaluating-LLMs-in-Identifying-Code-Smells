public static EndpointConnectionException from(List<RemoteConnectionEndpointLookupFailure> lookupFailures,List<? extends RemoteConnectionException<?>> connectionExceptions){
  StringBuilder sb=new StringBuilder(256);
  if (!lookupFailures.isEmpty()) {
    sb.append("Could not lookup the following endpoints: ");
    StringUtils.appendTo(lookupFailures,sb);
  }
  if (!connectionExceptions.isEmpty()) {
    sb.append("The following addresses failed: ");
    StringUtils.appendTo(connectionExceptions,sb,rce -> sb.append(rce.getErrorMessage()));
  }
  return new EndpointConnectionException(sb.toString(),lookupFailures,connectionExceptions);
}
public static NoEndpointsDiscoveredException from(List<LookupConnectionEndpointsFailed> lookupFailures){
  StringBuilder sb=new StringBuilder();
  if (lookupFailures.isEmpty()) {
    sb.append("No endpoint lookup finished within the timeout");
  }
 else {
    sb.append("No endpoints could be discovered due the following lookup failures: ");
    StringUtils.appendTo(lookupFailures,sb);
  }
  return new NoEndpointsDiscoveredException(sb.toString(),lookupFailures);
}
