@Override public StateTransitionResult.AttemptResult transitionInto(WalkStateGraphContext walkStateGraphContext) throws InterruptedException, SmackException, XMPPException {
  final String compressionMethod=selectedCompressionFactory.getCompressionMethod();
  connectionInternal.sendAndWaitForResponse(new Compress(compressionMethod),Compressed.class,Failure.class);
  connectionInternal.addXmppInputOutputFilter(usedXmppInputOutputCompressionFitler);
  connectionInternal.newStreamOpenWaitForFeaturesSequence("server stream features after compression enabled");
  connectionInternal.setCompressionEnabled(true);
  return new CompressionTransitionSuccessResult(compressionMethod);
}
