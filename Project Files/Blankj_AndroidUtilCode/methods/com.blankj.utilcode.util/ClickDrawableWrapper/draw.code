@Override public void draw(Canvas canvas){
  if (mBitmapDrawable == null) {
    Bitmap bitmap=Bitmap.createBitmap(getBounds().width(),getBounds().height(),Bitmap.Config.ARGB_8888);
    Canvas myCanvas=new Canvas(bitmap);
    if (mColorPaint != null) {
      myCanvas.drawRect(getBounds(),mColorPaint);
    }
 else {
      super.draw(myCanvas);
    }
    mBitmapDrawable=new BitmapDrawable(Resources.getSystem(),bitmap);
    mBitmapDrawable.setBounds(getBounds());
  }
  mBitmapDrawable.draw(canvas);
}
