public static boolean createAccount(String xmppDomain,String username,String password) throws KeyManagementException, NoSuchAlgorithmException, SmackException, IOException, XMPPException, InterruptedException {
  DomainBareJid xmppDomainJid=JidCreate.domainBareFrom(xmppDomain);
  Localpart localpart=Localpart.from(username);
  return createAccount(xmppDomainJid,localpart,password);
}
public static boolean createAccount(DomainBareJid xmppDomain,Localpart username,String password) throws KeyManagementException, NoSuchAlgorithmException, SmackException, IOException, XMPPException, InterruptedException {
  XMPPTCPConnectionConfiguration.Builder configBuilder=XMPPTCPConnectionConfiguration.builder().setXmppDomain(xmppDomain);
  TLSUtils.acceptAllCertificates(configBuilder);
  XMPPTCPConnectionConfiguration config=configBuilder.build();
  XMPPTCPConnection connection=new XMPPTCPConnection(config);
  connection.connect();
  try {
    if (!supportsIbr(connection))     return false;
    AccountManager accountManager=AccountManager.getInstance(connection);
    accountManager.createAccount(username,password);
    return true;
  }
  finally {
    connection.disconnect();
  }
}
