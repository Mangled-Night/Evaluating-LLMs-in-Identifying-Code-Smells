@Test public void parsesWell() throws IOException, XmlPullParserException {
  InputStream inputStream=getClass().getResourceAsStream(XHTML_EXTENSION_SAMPLE_RESOURCE_NAME);
  XmlPullParser parser=PacketParserUtils.getParserFor(inputStream);
  XHTMLExtensionProvider provider=new XHTMLExtensionProvider();
  ExtensionElement extension=provider.parse(parser,parser.getDepth(),null);
  assertThat(extension,instanceOf(XHTMLExtension.class));
  XHTMLExtension attachmentsInfo=(XHTMLExtension)extension;
  assertThat(sampleXhtml(),equalsCharSequence(attachmentsInfo.getBodies().get(0)));
}
