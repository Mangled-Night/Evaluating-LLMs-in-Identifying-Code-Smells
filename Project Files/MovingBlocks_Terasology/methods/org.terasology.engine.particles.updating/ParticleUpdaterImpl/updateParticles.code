private void updateParticles(final ParticleEmitterComponent particleSystem,final float delta){
  updateLifeRemaining(particleSystem.particlePool,delta);
  particleSystem.affectorFunctionMap.forEach((component,affector) -> affector.beforeUpdates(component,random,delta));
  for (int i=0; i < particleSystem.particlePool.livingParticles(); i++) {
    particleSystem.particlePool.loadTemporaryDataFrom(i,ParticleDataMask.ALL.toInt());
    particleSystem.affectorFunctionMap.forEach((component,affector) -> affector.update(component,particleSystem.particlePool.temporaryParticleData,random,delta));
    particleSystem.particlePool.storeTemporaryDataAt(i,ParticleDataMask.ALL.toInt());
  }
}
