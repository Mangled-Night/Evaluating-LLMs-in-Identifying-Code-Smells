public class RemoteDisablingPushNotificationsTest {
  private static final String remoteDisablingExample="<message from='push-5.client.example' to='user@example.com'>" + "<pubsub xmlns='http://jabber.org/protocol/pubsub' node='yxs32uqsflafdk3iuqo'>" + "<affiliation jid='user@example.com' affiliation='none' />"+ "</pubsub>"+ "</message>";
  private static final String wrongRemoteDisabling1="<message from='push-5.client.example' to='user@example.com'>" + "<pubsub xmlns='http://jabber.org/protocol/pubsub' node='yxs32uqsflafdk3iuqo'>" + "<affiliation jid='user@example.com'/>"+ "</pubsub>"+ "</message>";
  private static final String wrongRemoteDisabling2="<message from='push-5.client.example' to='user@example.com'>" + "<pubsub xmlns='http://jabber.org/protocol/pubsub' node='yxs32uqsflafdk3iuqo'>" + "<affiliation jid='user@example.com' affiliation='member' />"+ "</pubsub>"+ "</message>";
  private static final String wrongRemoteDisabling3="<message from='push-5.client.example' to='user@example.com'>" + "<pubsub xmlns='http://jabber.org/protocol/pubsub'>" + "</pubsub>"+ "</message>";
  @Test public void checkRemoteDisablingPushNotificationsParse() throws Exception {
    Message message=PacketParserUtils.parseStanza(remoteDisablingExample);
    RemoteDisablingExtension remoteDisablingExtension=RemoteDisablingExtension.from(message);
    assertEquals("yxs32uqsflafdk3iuqo",remoteDisablingExtension.getNode());
    assertEquals(JidCreate.from("user@example.com"),remoteDisablingExtension.getUserJid());
  }
  @Test public void checkWrongRemoteDisablighPushNotifications() throws Exception {
    assertThrows(IOException.class,() -> PacketParserUtils.parseStanza(wrongRemoteDisabling1));
    assertThrows(IOException.class,() -> PacketParserUtils.parseStanza(wrongRemoteDisabling2));
    Message message3=PacketParserUtils.parseStanza(wrongRemoteDisabling3);
    assertNotNull(message3);
  }
}
