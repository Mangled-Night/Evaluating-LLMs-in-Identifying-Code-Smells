private class ApiJobHandler implements JobListener {
  private Session session;
  public ApiJobHandler(  Session session){
    this.session=session;
  }
  @Override public void onForeground(  Job job){
    session.setForegroundJob(job);
  }
  @Override public void onBackground(  Job job){
    if (session.getForegroundJob() == job) {
      session.setForegroundJob(null);
      updateSessionInputStatus(session,InputStatus.ALLOW_INPUT);
    }
  }
  @Override public void onTerminated(  Job job){
    if (session.getForegroundJob() == job) {
      session.setForegroundJob(null);
      updateSessionInputStatus(session,InputStatus.ALLOW_INPUT);
    }
  }
  @Override public void onSuspend(  Job job){
    if (session.getForegroundJob() == job) {
      session.setForegroundJob(null);
      updateSessionInputStatus(session,InputStatus.ALLOW_INPUT);
    }
  }
}
