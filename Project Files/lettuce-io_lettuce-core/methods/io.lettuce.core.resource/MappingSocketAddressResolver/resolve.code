@Override public SocketAddress resolve(RedisURI redisURI){
  if (redisURI.getSocket() != null) {
    return getDomainSocketAddress(redisURI);
  }
  HostAndPort hostAndPort=HostAndPort.of(redisURI.getHost(),redisURI.getPort());
  HostAndPort mapped=mappingFunction.apply(hostAndPort);
  if (mapped == null) {
    throw new IllegalStateException("Mapping function must not return null for HostAndPort");
  }
  try {
    return doResolve(mapped);
  }
 catch (  UnknownHostException e) {
    return new InetSocketAddress(redisURI.getHost(),redisURI.getPort());
  }
}
