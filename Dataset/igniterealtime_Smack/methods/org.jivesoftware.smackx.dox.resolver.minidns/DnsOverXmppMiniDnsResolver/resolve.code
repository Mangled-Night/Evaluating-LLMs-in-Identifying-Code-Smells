@Override public DnsMessage resolve(DnsMessage query) throws IOException {
  Question question=query.getQuestion();
  final DnsQueryResult dnsQueryResult;
  if (query.isDnssecOk()) {
    DnssecQueryResult dnssecQueryResult=dnssecClient.queryDnssec(question);
    dnsQueryResult=dnssecQueryResult.dnsQueryResult;
  }
 else {
    dnsQueryResult=dnsClient.query(question);
  }
  return dnsQueryResult.response;
}
