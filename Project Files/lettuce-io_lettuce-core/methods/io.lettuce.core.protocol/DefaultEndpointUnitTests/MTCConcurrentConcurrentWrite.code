MTCConcurrentConcurrentWrite(Command<String,String,String> command,ClientResources clientResources){
  this.command=command;
  handler=new TestableEndpoint(ClientOptions.create(),clientResources){
    @Override protected <C extends RedisCommand<?,?,T>,T>void writeToBuffer(    C command){
      waitAndProgress(phase2);
      Object sharedLock=ReflectionTestUtils.getField(this,"sharedLock");
      AtomicLong writers=ReflectionTestUtils.getField(sharedLock,"writers");
      assertThat(writers.get()).isEqualTo(2);
      waitAndProgress(phase3);
      super.writeToBuffer(command);
    }
  }
;
}
