@Override public void update(){
  if (listener != null) {
    checkForUnload();
  }
  Chunk chunk;
  while ((chunk=readyChunks.poll()) != null) {
    Chunk oldChunk=chunkCache.put(chunk.getPosition(),chunk);
    if (oldChunk != null) {
      oldChunk.dispose();
    }
    chunk.markReady();
    if (listener != null) {
      listener.onChunkReady(chunk.getPosition());
    }
    worldEntity.send(new OnChunkLoaded(chunk.getPosition()));
  }
}
