/** 
 * {@link Set} of value output.
 * @param < K > Key type.
 * @param < V > Value type.
 * @author Will Glozer
 */
public class ValueSetOutput<K,V> extends CommandOutput<K,V,Set<V>> {
  private boolean initialized;
  public ValueSetOutput(  RedisCodec<K,V> codec){
    super(codec,Collections.emptySet());
  }
  @Override public void set(  ByteBuffer bytes){
    if (bytes == null && !initialized) {
      return;
    }
    output.add(bytes == null ? null : codec.decodeValue(bytes));
  }
  @Override public void multi(  int count){
    if (!initialized) {
      output=OutputFactory.newSet(count);
      initialized=true;
    }
  }
}
