/** 
 * Test reject() method.
 * @throws NotConnectedException if the XMPP connection is not connected.
 * @throws InterruptedException if the calling thread was interrupted.
 */
@Test public void shouldReplyWithErrorIfRequestIsRejected() throws NotConnectedException, InterruptedException {
  InBandBytestreamRequest ibbRequest=new InBandBytestreamRequest(byteStreamManager,initBytestream);
  ibbRequest.reject();
  ArgumentCaptor<IQ> argument=ArgumentCaptor.forClass(IQ.class);
  verify(connection).sendStanza(argument.capture());
  assertEquals(initiatorJID,argument.getValue().getTo());
  assertEquals(IQ.Type.error,argument.getValue().getType());
  assertEquals(StanzaError.Condition.not_acceptable,argument.getValue().getError().getCondition());
}
