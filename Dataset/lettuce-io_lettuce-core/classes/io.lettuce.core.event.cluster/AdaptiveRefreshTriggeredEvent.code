/** 
 * Event when a topology refresh is about to start by an adaptive refresh trigger.
 * @author Mark Paluch
 * @since 5.2
 */
public class AdaptiveRefreshTriggeredEvent implements Event {
  private final Supplier<Partitions> partitionsSupplier;
  private final Runnable topologyRefreshScheduler;
  public AdaptiveRefreshTriggeredEvent(  Supplier<Partitions> partitionsSupplier,  Runnable topologyRefreshScheduler){
    this.partitionsSupplier=partitionsSupplier;
    this.topologyRefreshScheduler=topologyRefreshScheduler;
  }
  /** 
 * Schedules a new topology refresh. Refresh happens asynchronously.
 */
  public void scheduleRefresh(){
    topologyRefreshScheduler.run();
  }
  /** 
 * Retrieve the currently known partitions.
 * @return the currently known topology view. The view is mutable and changes over time.
 */
  public Partitions getPartitions(){
    return partitionsSupplier.get();
  }
}
