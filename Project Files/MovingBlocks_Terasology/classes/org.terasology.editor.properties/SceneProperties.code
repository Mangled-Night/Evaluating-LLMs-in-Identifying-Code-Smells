public class SceneProperties implements PropertyProvider {
  private final TerasologyEngine engine;
  public SceneProperties(  TerasologyEngine engine){
    this.engine=engine;
  }
  @Override public List<Property<?>> getProperties(){
    List<Property<?>> result=Lists.newArrayList();
    GameState gameState=engine.getState();
    if (!(gameState instanceof StateIngame)) {
      return result;
    }
    StateIngame ingameState=(StateIngame)gameState;
    Context ingameContext=ingameState.getContext();
    BackdropProvider backdropProvider=ingameContext.get(BackdropProvider.class);
    if (backdropProvider != null) {
      result.addAll(new ReflectionProvider(backdropProvider,ingameContext).getProperties());
    }
    return result;
  }
}
