@Test void shouldDecodeTwoSingleEntryMessage(){
  sut.multi(2);
  sut.set(ByteBuffer.wrap("stream-key".getBytes()));
  sut.complete(1);
  sut.multi(2);
  sut.multi(2);
  sut.set(ByteBuffer.wrap("1234-11".getBytes()));
  sut.complete(3);
  sut.multi(2);
  sut.set(ByteBuffer.wrap("key1".getBytes()));
  sut.complete(4);
  sut.set(ByteBuffer.wrap("value1".getBytes()));
  sut.complete(4);
  sut.complete(3);
  sut.complete(2);
  sut.multi(2);
  sut.set(ByteBuffer.wrap("1234-22".getBytes()));
  sut.complete(3);
  sut.multi(2);
  sut.set(ByteBuffer.wrap("key2".getBytes()));
  sut.complete(4);
  sut.set(ByteBuffer.wrap("value2".getBytes()));
  sut.complete(4);
  sut.complete(3);
  sut.complete(2);
  sut.complete(1);
  sut.complete(0);
  assertThat(sut.get()).hasSize(2);
  StreamMessage<String,String> streamMessage1=sut.get().get(0);
  assertThat(streamMessage1.getId()).isEqualTo("1234-11");
  assertThat(streamMessage1.getStream()).isEqualTo("stream-key");
  assertThat(streamMessage1.getBody()).hasSize(1).containsEntry("key1","value1");
  StreamMessage<String,String> streamMessage2=sut.get().get(1);
  assertThat(streamMessage2.getId()).isEqualTo("1234-22");
  assertThat(streamMessage2.getStream()).isEqualTo("stream-key");
  assertThat(streamMessage2.getBody()).hasSize(1).containsEntry("key2","value2");
}
