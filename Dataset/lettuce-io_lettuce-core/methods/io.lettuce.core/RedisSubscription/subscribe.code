/** 
 * Subscription procedure called by a  {@link Publisher}
 * @param subscriber the subscriber, must not be {@code null}.
 */
void subscribe(Subscriber<? super T> subscriber){
  if (subscriber == null) {
    throw new NullPointerException("Subscriber must not be null");
  }
  State state=state();
  if (traceEnabled) {
    LOG.trace("{} subscribe: {}@{}",state,subscriber.getClass().getName(),subscriber.hashCode());
  }
  state.subscribe(this,subscriber);
}
