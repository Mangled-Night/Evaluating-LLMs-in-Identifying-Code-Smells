private void validateWrite(int commands){
  if (usesBoundedQueues()) {
    int maxMaintenanceCommands=5;
    int allowedRequestQueueSize=Math.max(1,clientOptions.getRequestQueueSize() - maxMaintenanceCommands);
    if (stack.size() + commands > allowedRequestQueueSize)     throw new RedisException("Internal stack size exceeded: " + clientOptions.getRequestQueueSize() + ". Commands are not accepted until the stack size drops.");
  }
}
