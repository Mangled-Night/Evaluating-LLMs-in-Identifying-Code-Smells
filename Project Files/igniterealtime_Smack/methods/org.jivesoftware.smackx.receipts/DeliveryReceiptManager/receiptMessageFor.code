/** 
 * Create and return a new message including a delivery receipt extension for the given message. <p> If  {@code messageWithReceiptRequest} does not have a Stanza ID set, then {@code null} will be returned.</p>
 * @param messageWithReceiptRequest the given message with a receipt request extension.
 * @return a new message with a receipt or <code>null</code>.
 * @since 4.1
 */
public static Message receiptMessageFor(Message messageWithReceiptRequest){
  String stanzaId=messageWithReceiptRequest.getStanzaId();
  if (StringUtils.isNullOrEmpty(stanzaId)) {
    return null;
  }
  Message message=StanzaBuilder.buildMessage().ofType(messageWithReceiptRequest.getType()).to(messageWithReceiptRequest.getFrom()).addExtension(new DeliveryReceipt(stanzaId)).build();
  return message;
}
