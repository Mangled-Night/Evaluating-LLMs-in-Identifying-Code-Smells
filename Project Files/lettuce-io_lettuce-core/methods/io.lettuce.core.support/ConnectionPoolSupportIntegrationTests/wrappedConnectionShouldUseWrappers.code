@Test void wrappedConnectionShouldUseWrappers() throws Exception {
  GenericObjectPool<StatefulRedisConnection<String,String>> pool=ConnectionPoolSupport.createGenericObjectPool(() -> client.connect(),new GenericObjectPoolConfig<>());
  StatefulRedisConnection<String,String> connection=pool.borrowObject();
  RedisCommands<String,String> sync=connection.sync();
  assertThat(connection).isInstanceOf(StatefulRedisConnection.class).isNotInstanceOf(StatefulRedisClusterConnectionImpl.class);
  assertThat(Proxy.isProxyClass(connection.getClass())).isTrue();
  assertThat(sync).isInstanceOf(RedisCommands.class);
  assertThat(connection.async()).isInstanceOf(RedisAsyncCommands.class).isNotInstanceOf(RedisAsyncCommandsImpl.class);
  assertThat(connection.reactive()).isInstanceOf(RedisReactiveCommands.class).isNotInstanceOf(RedisReactiveCommandsImpl.class);
  assertThat(sync.getStatefulConnection()).isInstanceOf(StatefulRedisConnection.class).isNotInstanceOf(StatefulRedisConnectionImpl.class).isSameAs(connection);
  connection.close();
  pool.close();
}
