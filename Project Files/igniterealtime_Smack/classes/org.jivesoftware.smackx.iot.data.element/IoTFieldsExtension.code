public class IoTFieldsExtension implements ExtensionElement {
  public static final String ELEMENT="fields";
  public static final String NAMESPACE=Constants.IOT_SENSORDATA_NAMESPACE;
  public static final QName QNAME=new QName(NAMESPACE,ELEMENT);
  private final int seqNr;
  private final boolean done;
  private final List<NodeElement> nodes;
  public IoTFieldsExtension(  int seqNr,  boolean done,  NodeElement node){
    this(seqNr,done,Collections.singletonList(node));
  }
  public IoTFieldsExtension(  int seqNr,  boolean done,  List<NodeElement> nodes){
    this.seqNr=seqNr;
    this.done=done;
    this.nodes=Collections.unmodifiableList(nodes);
  }
  public int getSequenceNr(){
    return seqNr;
  }
  public boolean isDone(){
    return done;
  }
  public List<NodeElement> getNodes(){
    return nodes;
  }
  @Override public String getElementName(){
    return ELEMENT;
  }
  @Override public String getNamespace(){
    return NAMESPACE;
  }
  @Override public XmlStringBuilder toXML(  org.jivesoftware.smack.packet.XmlEnvironment enclosingNamespace){
    XmlStringBuilder xml=new XmlStringBuilder(this);
    xml.attribute("seqnr",Integer.toString(seqNr));
    xml.attribute("done",done);
    xml.rightAngleBracket();
    xml.append(nodes);
    xml.closeElement(this);
    return xml;
  }
  public static IoTFieldsExtension buildFor(  int seqNr,  boolean done,  NodeInfo nodeInfo,  List<? extends IoTDataField> data){
    TimestampElement timestampElement=new TimestampElement(new Date(),data);
    NodeElement nodeElement=new NodeElement(nodeInfo,timestampElement);
    return new IoTFieldsExtension(seqNr,done,nodeElement);
  }
  public static IoTFieldsExtension from(  Message message){
    return message.getExtension(IoTFieldsExtension.class);
  }
}
