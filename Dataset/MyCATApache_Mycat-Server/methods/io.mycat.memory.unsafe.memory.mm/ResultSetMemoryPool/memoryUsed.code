@Override protected long memoryUsed(){
synchronized (lock) {
    long used=0;
    for (    Map.Entry<Long,Long> entry : memoryForConnection.entrySet()) {
      used+=entry.getValue();
    }
    return used;
  }
}
