public static String typeToString(Type type){
  return typeToString(type,false);
}
public static String typeToString(Type type,boolean useSimpleName){
  if (type instanceof Class) {
    final Class clazz=(Class)type;
    if (useSimpleName) {
      return clazz.getSimpleName();
    }
    return clazz.getTypeName();
  }
  if (type instanceof WildcardType) {
    return WildcardTypeImpl.toString((WildcardType)type,useSimpleName);
  }
  if (type instanceof ParameterizedType) {
    return ParameterizedTypeImpl.toString((ParameterizedType)type,useSimpleName);
  }
  if (type instanceof GenericArrayType) {
    return GenericArrayTypeImpl.toString((GenericArrayType)type,useSimpleName);
  }
  return null;
}
