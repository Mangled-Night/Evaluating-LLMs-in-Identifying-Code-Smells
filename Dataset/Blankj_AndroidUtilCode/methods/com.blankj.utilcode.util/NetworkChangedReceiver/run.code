@Override @RequiresPermission(ACCESS_NETWORK_STATE) public void run(){
  int preSize=mListeners.size();
  mListeners.add(listener);
  if (preSize == 0 && mListeners.size() == 1) {
    mType=getNetworkType();
    IntentFilter intentFilter=new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);
    Utils.getApp().registerReceiver(NetworkChangedReceiver.getInstance(),intentFilter);
  }
}
@Override public void run(){
  int preSize=mListeners.size();
  mListeners.remove(listener);
  if (preSize == 1 && mListeners.size() == 0) {
    Utils.getApp().unregisterReceiver(NetworkChangedReceiver.getInstance());
  }
}
@Override @RequiresPermission(ACCESS_NETWORK_STATE) public void run(){
  NetworkType networkType=NetworkUtils.getNetworkType();
  if (mType == networkType)   return;
  mType=networkType;
  if (networkType == NetworkType.NETWORK_NO) {
    for (    OnNetworkStatusChangedListener listener : mListeners) {
      listener.onDisconnected();
    }
  }
 else {
    for (    OnNetworkStatusChangedListener listener : mListeners) {
      listener.onConnected(networkType);
    }
  }
}
