/** 
 * 更新状态
 * @param sqlType
 * @param sql
 * @param startTime
 */
public void update(String schema,int sqlType,String sql,long sqlRows,long netInBytes,long netOutBytes,long startTime,long endTime,int rseultSetSize,String host){
  int invoking=runningCount.incrementAndGet();
  for (; ; ) {
    int max=concurrentMax.get();
    if (invoking > max) {
      if (concurrentMax.compareAndSet(max,invoking)) {
        break;
      }
    }
 else {
      break;
    }
  }
  long executeTime=endTime - startTime;
  if (executeTime >= SQL_SLOW_TIME) {
    SQLRecord record=new SQLRecord();
    record.executeTime=executeTime;
    record.statement=sql;
    record.startTime=startTime;
    record.host=host;
    record.schema=schema;
    this.sqlRecorder.add(record);
  }
  this.sqlRwStat.setConcurrentMax(concurrentMax.get());
  this.sqlRwStat.add(sqlType,sql,executeTime,netInBytes,netOutBytes,startTime,endTime);
  this.sqlLastStat.add(sql,executeTime,startTime,endTime,host);
  this.sqlHighStat.addSql(sql,executeTime,startTime,endTime,host);
  if (sqlType == ServerParse.SELECT && sqlRows > 10000) {
    this.sqlLargeStat.add(sql,sqlRows,executeTime,startTime,endTime,host);
  }
  if (rseultSetSize >= MycatServer.getInstance().getConfig().getSystem().getMaxResultSet()) {
    this.sqlResultSizeRecorder.addSql(sql,rseultSetSize);
  }
  runningCount.decrementAndGet();
}
