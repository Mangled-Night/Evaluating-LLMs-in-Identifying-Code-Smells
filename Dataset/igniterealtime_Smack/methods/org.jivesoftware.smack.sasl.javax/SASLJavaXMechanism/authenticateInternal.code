@Override protected void authenticateInternal() throws SmackJavaxSaslException {
  String[] mechanisms={getName()};
  Map<String,String> props=getSaslProps();
  String authzid=null;
  if (authorizationId != null) {
    authzid=authorizationId.toString();
  }
  try {
    sc=Sasl.createSaslClient(mechanisms,authzid,"xmpp",getServerName().toString(),props,new CallbackHandler(){
      @Override public void handle(      Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (int i=0; i < callbacks.length; i++) {
          if (callbacks[i] instanceof NameCallback) {
            NameCallback ncb=(NameCallback)callbacks[i];
            ncb.setName(authenticationId);
          }
 else           if (callbacks[i] instanceof PasswordCallback) {
            PasswordCallback pcb=(PasswordCallback)callbacks[i];
            pcb.setPassword(password.toCharArray());
          }
 else           if (callbacks[i] instanceof RealmCallback) {
            RealmCallback rcb=(RealmCallback)callbacks[i];
            String text=rcb.getDefaultText();
            rcb.setText(text);
          }
 else           if (callbacks[i] instanceof RealmChoiceCallback) {
          }
 else {
            throw new UnsupportedCallbackException(callbacks[i]);
          }
        }
      }
    }
);
  }
 catch (  SaslException e) {
    throw new SmackJavaxSaslException(e);
  }
}
@Override protected void authenticateInternal(CallbackHandler cbh) throws SmackJavaxSaslException {
  String[] mechanisms={getName()};
  Map<String,String> props=getSaslProps();
  try {
    sc=Sasl.createSaslClient(mechanisms,null,"xmpp",host,props,cbh);
  }
 catch (  SaslException e) {
    throw new SmackJavaxSaslException(e);
  }
}
