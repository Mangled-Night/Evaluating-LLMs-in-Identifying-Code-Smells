/** 
 * Return the bytes of symmetric encryption or decryption.
 * @param data           The data.
 * @param key            The key.
 * @param algorithm      The name of algorithm.
 * @param transformation The name of the transformation, e.g., <i>DES/CBC/PKCS5Padding</i>.
 * @param isEncrypt      True to encrypt, false otherwise.
 * @return the bytes of symmetric encryption or decryption
 */
private static byte[] symmetricTemplate(final byte[] data,final byte[] key,final String algorithm,final String transformation,final byte[] iv,final boolean isEncrypt){
  if (data == null || data.length == 0 || key == null || key.length == 0)   return null;
  try {
    SecretKey secretKey;
    if ("DES".equals(algorithm)) {
      DESKeySpec desKey=new DESKeySpec(key);
      SecretKeyFactory keyFactory=SecretKeyFactory.getInstance(algorithm);
      secretKey=keyFactory.generateSecret(desKey);
    }
 else {
      secretKey=new SecretKeySpec(key,algorithm);
    }
    Cipher cipher=Cipher.getInstance(transformation);
    if (iv == null || iv.length == 0) {
      cipher.init(isEncrypt ? Cipher.ENCRYPT_MODE : Cipher.DECRYPT_MODE,secretKey);
    }
 else {
      AlgorithmParameterSpec params=new IvParameterSpec(iv);
      cipher.init(isEncrypt ? Cipher.ENCRYPT_MODE : Cipher.DECRYPT_MODE,secretKey,params);
    }
    return cipher.doFinal(data);
  }
 catch (  Throwable e) {
    e.printStackTrace();
    return null;
  }
}
