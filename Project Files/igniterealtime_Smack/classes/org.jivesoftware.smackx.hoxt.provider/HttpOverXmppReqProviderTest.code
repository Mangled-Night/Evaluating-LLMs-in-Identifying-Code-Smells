public class HttpOverXmppReqProviderTest {
  @Test public void areAllReqAttributesCorrectlyParsed() throws Exception {
    String string="<req xmlns='urn:xmpp:http' method='OPTIONS' resource='*' version='1.1'/>";
    HttpOverXmppReq req=parseReq(string);
    assertEquals(req.getVersion(),"1.1");
    assertEquals(req.getMethod(),HttpMethod.OPTIONS);
    assertEquals(req.getResource(),"*");
  }
  @Test public void areGetRequestAttributesCorrectlyParsed() throws Exception {
    String string="<req xmlns='urn:xmpp:http' method='GET' resource='/rdf/xep' version='1.1'/>";
    HttpOverXmppReq req=parseReq(string);
    assertEquals(req.getVersion(),"1.1");
    assertEquals(req.getMethod(),HttpMethod.GET);
    assertEquals(req.getResource(),"/rdf/xep");
  }
  @Test public void getReqOptionAttributesCorrectlyParsed() throws Exception {
    String string="<req xmlns='urn:xmpp:http' method='OPTIONS' resource='*' version='1.1' maxChunkSize='256' sipub='false' ibb='true' jingle='false'/>";
    HttpOverXmppReq req=parseReq(string);
    assertEquals(req.getMaxChunkSize(),256);
    assertEquals(req.isSipub(),false);
    assertEquals(req.isIbb(),true);
    assertEquals(req.isJingle(),false);
  }
  @Test public void getReqOptionalAttributesDefaultValues() throws Exception {
    String string="<req xmlns='urn:xmpp:http' method='OPTIONS' resource='*' version='1.1'/>";
    HttpOverXmppReq req=parseReq(string);
    assertEquals(req.isSipub(),true);
    assertEquals(req.isIbb(),true);
    assertEquals(req.isJingle(),true);
  }
  private static HttpOverXmppReq parseReq(  String string) throws Exception {
    HttpOverXmppReqProvider provider=new HttpOverXmppReqProvider();
    XmlPullParser parser=PacketParserUtils.getParserFor(string);
    IQ iq=provider.parse(parser,null);
    assertTrue(iq instanceof HttpOverXmppReq);
    return (HttpOverXmppReq)iq;
  }
}
