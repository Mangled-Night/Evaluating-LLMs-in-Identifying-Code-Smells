public class SetupRemotePlayer extends SingleStepLoadProcess {
  private final Context context;
  public SetupRemotePlayer(  Context context){
    this.context=context;
  }
  @Override public String getMessage(){
    return "Awaiting player data";
  }
  @Override public boolean step(){
    NetworkSystemImpl networkSystem=(NetworkSystemImpl)context.get(NetworkSystem.class);
    EntityRef client=networkSystem.getServer().getClientEntity();
    if (client.exists()) {
      context.get(LocalPlayer.class).setClientEntity(client);
      return true;
    }
    return false;
  }
  @Override public int getExpectedCost(){
    return 1;
  }
}
