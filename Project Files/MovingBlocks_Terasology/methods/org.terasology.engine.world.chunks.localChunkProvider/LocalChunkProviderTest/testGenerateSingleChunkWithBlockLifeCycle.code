@Test void testGenerateSingleChunkWithBlockLifeCycle() throws InterruptedException, ExecutionException, TimeoutException {
  Vector3i chunkPosition=new Vector3i(0,0,0);
  blockAtBlockManager.setLifecycleEventsRequired(true);
  blockAtBlockManager.setEntity(mock(EntityRef.class));
  requestCreatingOrLoadingArea(chunkPosition).get(WAIT_CHUNK_IS_READY_IN_SECONDS,TimeUnit.SECONDS);
  chunkProvider.update();
  final ArgumentCaptor<Event> worldEventCaptor=ArgumentCaptor.forClass(Event.class);
  verify(worldEntity,atLeast(2)).send(worldEventCaptor.capture());
  Assertions.assertAll("World Events not valid",() -> {
    Event mustBeOnGeneratedEvent=worldEventCaptor.getAllValues().get(0);
    Assertions.assertTrue(mustBeOnGeneratedEvent instanceof OnChunkGenerated,"First world event must be OnChunkGenerated");
    Assertions.assertEquals(((OnChunkGenerated)mustBeOnGeneratedEvent).getChunkPos(),chunkPosition,"Chunk position at event not expected");
  }
,() -> {
    Event mustBeOnLoadedEvent=worldEventCaptor.getAllValues().get(1);
    Assertions.assertTrue(mustBeOnLoadedEvent instanceof OnChunkLoaded,"Second world event must be OnChunkLoaded");
    Assertions.assertEquals(chunkPosition,((OnChunkLoaded)mustBeOnLoadedEvent).getChunkPos(),"Chunk position at event not expected");
  }
);
  final ArgumentCaptor<Event> blockEventCaptor=ArgumentCaptor.forClass(Event.class);
  verify(blockAtBlockManager.getEntity(),atLeast(1)).send(blockEventCaptor.capture());
  Event mustBeOnActivatedBlocks=blockEventCaptor.getAllValues().get(0);
  Assertions.assertTrue(mustBeOnActivatedBlocks instanceof OnActivatedBlocks,"First block event must be OnActivatedBlocks");
  Assertions.assertTrue(((OnActivatedBlocks)mustBeOnActivatedBlocks).blockCount() > 0,"Block count on activate must be non zero");
}
