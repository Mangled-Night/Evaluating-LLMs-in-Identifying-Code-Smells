public static MeshData generateIconMeshData(TextureRegion tex){
  return generateIconMeshData(tex,0,false,null);
}
public static MeshData generateIconMeshData(TextureRegion tex,int alphaLimit,boolean withContour,Vector4f colorContour){
  ByteBuffer buffer=tex.getTexture().getData().getBuffers()[0];
  Rectanglei pixelRegion=tex.getPixelRegion();
  int posX=pixelRegion.minX;
  int posY=pixelRegion.minY;
  int stride=tex.getTexture().getWidth() * 4;
  float textureSize=Math.max(tex.getWidth(),tex.getHeight());
  StandardMeshData mesh=new StandardMeshData();
  Vector2f pos=new Vector2f();
  Color color=new Color();
  for (int y=0; y < tex.getHeight(); y++) {
    for (int x=0; x < tex.getWidth(); x++) {
      int r=buffer.get((posY + y) * stride + (posX + x) * 4) & 255;
      int g=buffer.get((posY + y) * stride + (posX + x) * 4 + 1) & 255;
      int b=buffer.get((posY + y) * stride + (posX + x) * 4 + 2) & 255;
      int a=buffer.get((posY + y) * stride + (posX + x) * 4 + 3) & 255;
      if (a > alphaLimit) {
        color.setRed(r).setGreen(g).setBlue(b).setAlpha(a);
        pos.set(2f / textureSize * x - 1f,2f / textureSize * (tex.getHeight() - y - 1) - 1f);
        addPixel(mesh,pos,2f / textureSize,color);
        if (withContour) {
          int newX=0;
          int newY=0;
          int newA=0;
          for (int i=0; i < 4; i++) {
            newA=alphaLimit + 1;
switch (i) {
case 0:
              if (x > 0) {
                newX=x - 1;
                newY=y;
                newA=buffer.get((posY + newY) * stride + (posX + newX) * 4 + 3) & 255;
              }
            break;
case 1:
          if (y > 0) {
            newX=x;
            newY=y - 1;
            newA=buffer.get((posY + newY) * stride + (posX + newX) * 4 + 3) & 255;
          }
        break;
case 2:
      if (x < 16) {
        newX=x + 1;
        newY=y;
        newA=buffer.get((posY + newY) * stride + (posX + newX) * 4 + 3) & 255;
      }
    break;
case 3:
  if (y < 16) {
    newX=x;
    newY=y + 1;
    newA=buffer.get((posY + newY) * stride + (posX + newX) * 4 + 3) & 255;
  }
break;
default :
break;
}
if (newA < alphaLimit) {
color.setRed(colorContour.x).setGreen(colorContour.y).setBlue(colorContour.z).setAlpha(colorContour.w);
addPixel(mesh,pos.set(2f * 0.0625f * newX - 0.5f,0.125f * (15 - newY) - 1f),0.125f,color);
}
}
}
}
}
}
return mesh;
}
