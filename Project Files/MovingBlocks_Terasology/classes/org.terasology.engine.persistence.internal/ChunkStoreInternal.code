final class ChunkStoreInternal implements ChunkStore {
  private final Vector3i chunkPosition;
  private final Chunk chunk;
  private final EngineEntityManager entityManager;
  private final EntityData.EntityStore entityStore;
  ChunkStoreInternal(  EntityData.ChunkStore chunkData,  EngineEntityManager entityManager,  BlockManager blockManager,  ExtraBlockDataManager extraDataManager){
    this.chunkPosition=new Vector3i(chunkData.getX(),chunkData.getY(),chunkData.getZ());
    this.entityManager=entityManager;
    this.chunk=ChunkSerializer.decode(chunkData,blockManager,extraDataManager);
    this.entityStore=chunkData.getStore();
  }
  @Override public Vector3ic getChunkPosition(){
    return chunkPosition;
  }
  @Override public Chunk getChunk(){
    chunk.prepareForReactivation();
    return chunk;
  }
  @Override public void restoreEntities(){
    new EntityRestorer(entityManager).restore(entityStore);
  }
}
