/** 
 * TODO: Add javadocs
 */
public final class EnableMaterial implements StateChange {
  private static StateChange defaultInstance=new DisableMaterial();
  private ResourceUrn materialUrn;
  private Material material;
  /** 
 * The constructor, to be used in the initialise method of a node. Sample use: addDesiredStateChange(new EnableMaterial("engine:prog.chunk"));
 */
  public EnableMaterial(  ResourceUrn materialUrn){
    this.materialUrn=materialUrn;
    this.material=getMaterial(materialUrn);
  }
  @Override public StateChange getDefaultInstance(){
    return defaultInstance;
  }
  @Override public int hashCode(){
    return Objects.hashCode(materialUrn);
  }
  @Override public boolean equals(  Object obj){
    return (obj instanceof EnableMaterial) && materialUrn.equals(((EnableMaterial)obj).materialUrn);
  }
  @Override public String toString(){
    return String.format("%30s: %s",this.getClass().getSimpleName(),materialUrn.toString());
  }
  @Override public void process(){
    material.enable();
  }
private static final class DisableMaterial implements StateChange {
    private ShaderManager shaderManager=CoreRegistry.get(ShaderManager.class);
    @Override public StateChange getDefaultInstance(){
      return this;
    }
    @Override public boolean equals(    Object obj){
      return (obj instanceof DisableMaterial);
    }
    @Override public int hashCode(){
      return DisableMaterial.class.hashCode();
    }
    @Override public String toString(){
      return String.format("%30s",this.getClass().getSimpleName());
    }
    @Override public void process(){
      shaderManager.disableShader();
    }
  }
}
