/** 
 * 根据类名匹配，搜索已经被JVM加载的类
 * @param inst             inst
 * @param classNameMatcher 类名匹配
 * @param limit            最大匹配限制
 * @return 匹配的类集合
 */
public static Set<Class<?>> searchClass(Instrumentation inst,Matcher<String> classNameMatcher,int limit){
  if (classNameMatcher == null) {
    return Collections.emptySet();
  }
  final Set<Class<?>> matches=new HashSet<Class<?>>();
  for (  Class<?> clazz : inst.getAllLoadedClasses()) {
    if (clazz == null) {
      continue;
    }
    if (classNameMatcher.matching(clazz.getName())) {
      matches.add(clazz);
    }
    if (matches.size() >= limit) {
      break;
    }
  }
  return matches;
}
public static Set<Class<?>> searchClass(Instrumentation inst,Matcher<String> classNameMatcher){
  return searchClass(inst,classNameMatcher,Integer.MAX_VALUE);
}
public static Set<Class<?>> searchClass(Instrumentation inst,String classPattern,boolean isRegEx){
  Matcher<String> classNameMatcher=classNameMatcher(classPattern,isRegEx);
  return GlobalOptions.isDisableSubClass ? searchClass(inst,classNameMatcher) : searchSubClass(inst,searchClass(inst,classNameMatcher));
}
public static Set<Class<?>> searchClass(Instrumentation inst,String classPattern,boolean isRegEx,String code){
  Set<Class<?>> matchedClasses=searchClass(inst,classPattern,isRegEx);
  return filter(matchedClasses,code);
}
