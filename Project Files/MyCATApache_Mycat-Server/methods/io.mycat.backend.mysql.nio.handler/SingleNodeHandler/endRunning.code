protected void endRunning(){
  Runnable callback=null;
  if (isRunning) {
    isRunning=false;
    callback=terminateCallBack;
    terminateCallBack=null;
  }
  if (callback != null) {
    callback.run();
  }
}
