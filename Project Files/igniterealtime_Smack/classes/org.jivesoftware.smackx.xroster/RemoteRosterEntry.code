/** 
 * Represents a roster item, which consists of a JID and , their name and the groups the roster item belongs to. This roster item does not belong to the local roster. Therefore, it does not persist in the server.<p> The idea of a RemoteRosterEntry is to be used as part of a roster exchange.
 * @author Gaston Dombiak
 */
public class RemoteRosterEntry {
  private final Jid user;
  private final String name;
  private final List<String> groupNames=new ArrayList<>();
  /** 
 * Creates a new remote roster entry.
 * @param user the user.
 * @param name the user's name.
 * @param groups the list of group names the entry will belong to, or <code>null</code> if thethe roster entry won't belong to a group.
 */
  public RemoteRosterEntry(  Jid user,  String name,  String[] groups){
    this.user=user;
    this.name=name;
    if (groups != null) {
      groupNames.addAll(Arrays.asList(groups));
    }
  }
  /** 
 * Returns the user.
 * @return the user.
 */
  public Jid getUser(){
    return user;
  }
  /** 
 * Returns the user's name.
 * @return the user's name.
 */
  public String getName(){
    return name;
  }
  /** 
 * Returns an Iterator for the group names (as Strings) that the roster entry belongs to.
 * @return an Iterator for the group names.
 */
  public Iterator<String> getGroupNames(){
synchronized (groupNames) {
      return Collections.unmodifiableList(groupNames).iterator();
    }
  }
  /** 
 * Returns a String array for the group names that the roster entry belongs to.
 * @return a String[] for the group names.
 */
  public String[] getGroupArrayNames(){
synchronized (groupNames) {
      return Collections.unmodifiableList(groupNames).toArray(new String[groupNames.size()]);
    }
  }
  public String toXML(){
    StringBuilder buf=new StringBuilder();
    buf.append("<item jid=\"").append(user).append('"');
    if (name != null) {
      buf.append(" name=\"").append(name).append('"');
    }
    buf.append('>');
synchronized (groupNames) {
      for (      String groupName : groupNames) {
        buf.append("<group>").append(groupName).append("</group>");
      }
    }
    buf.append("</item>");
    return buf.toString();
  }
}
