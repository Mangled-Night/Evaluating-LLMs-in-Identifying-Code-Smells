/** 
 * When inserting new network addresses to the proxy the order should remain in the order they were inserted.
 * @throws UnknownHostException if unknown host.
 */
@Test public void shouldPreserveAddressOrderOnInsertions() throws UnknownHostException {
  Socks5Proxy proxy=Socks5Proxy.getSocks5Proxy();
  LinkedHashSet<InetAddress> addresses=new LinkedHashSet<>(proxy.getLocalAddresses());
  for (int i=1; i <= 3; i++) {
    addresses.add(InetAddress.getByName(Integer.toString(i)));
  }
  for (  InetAddress address : addresses) {
    proxy.addLocalAddress(address);
  }
  List<InetAddress> localAddresses=proxy.getLocalAddresses();
  Iterator<InetAddress> iterator=addresses.iterator();
  for (int i=0; i < addresses.size(); i++) {
    assertEquals(iterator.next(),localAddresses.get(i));
  }
}
