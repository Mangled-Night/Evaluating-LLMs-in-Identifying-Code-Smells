protected final void setCurrentConnectionExceptionAndNotify(Exception exception){
  if (exception instanceof SmackException) {
    currentSmackException=(SmackException)exception;
  }
 else   if (exception instanceof XMPPException) {
    currentXmppException=(XMPPException)exception;
  }
 else {
    currentSmackException=new SmackException.SmackWrappedException(exception);
  }
  notifyWaitingThreads();
}
