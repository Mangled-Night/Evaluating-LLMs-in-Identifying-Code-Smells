private static Fragment getTopShowIsInStack(@NonNull final FragmentManager fm,Fragment parentFragment,final boolean isInStack){
  List<Fragment> fragments=getFragments(fm);
  for (int i=fragments.size() - 1; i >= 0; --i) {
    Fragment fragment=fragments.get(i);
    if (fragment != null && fragment.isResumed() && fragment.isVisible() && fragment.getUserVisibleHint()) {
      if (isInStack) {
        Bundle args=fragment.getArguments();
        if (args != null && args.getBoolean(ARGS_IS_ADD_STACK)) {
          return getTopShowIsInStack(fragment.getChildFragmentManager(),fragment,true);
        }
      }
 else {
        return getTopShowIsInStack(fragment.getChildFragmentManager(),fragment,false);
      }
    }
  }
  return parentFragment;
}
