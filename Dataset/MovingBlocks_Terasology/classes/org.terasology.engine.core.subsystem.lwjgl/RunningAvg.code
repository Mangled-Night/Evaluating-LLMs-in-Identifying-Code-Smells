private static class RunningAvg {
  private static final long DAMPEN_THRESHOLD=10 * 1000L * 1000L;
  private static final float DAMPEN_FACTOR=0.9f;
  private final long[] slots;
  private int offset;
  RunningAvg(  int slotCount){
    this.slots=new long[slotCount];
    this.offset=0;
  }
  public void init(  long value){
    while (this.offset < this.slots.length) {
      this.slots[this.offset++]=value;
    }
  }
  public void add(  long value){
    this.slots[this.offset++ % this.slots.length]=value;
    this.offset%=this.slots.length;
  }
  public long avg(){
    long sum=0;
    for (    long slot : this.slots) {
      sum+=slot;
    }
    return sum / this.slots.length;
  }
  public void dampenForLowResTicker(){
    if (this.avg() > DAMPEN_THRESHOLD) {
      for (int i=0; i < this.slots.length; i++) {
        this.slots[i]*=(long)DAMPEN_FACTOR;
      }
    }
  }
}
