public static String formatJson(final String json){
  return formatJson(json,4);
}
public static String formatJson(final String json,final int indentSpaces){
  try {
    for (int i=0, len=json.length(); i < len; i++) {
      char c=json.charAt(i);
      if (c == '{') {
        return new JSONObject(json).toString(indentSpaces);
      }
 else       if (c == '[') {
        return new JSONArray(json).toString(indentSpaces);
      }
 else       if (!Character.isWhitespace(c)) {
        return json;
      }
    }
  }
 catch (  JSONException e) {
    e.printStackTrace();
  }
  return json;
}
